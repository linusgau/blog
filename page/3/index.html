<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#222">

<link rel="stylesheet" href="/blog/css/main.css">


<link rel="stylesheet" href="/blog/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/blue/pace-theme-minimal.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script>


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/blog/',
    scheme: 'Pisces',
    version: '7.5.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":true},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":true,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'å¤åˆ¶',
      copy_success: 'å¤åˆ¶æˆåŠŸ',
      copy_failure: 'å¤åˆ¶å¤±è´¥'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="Dunwu&#39;s Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Dunwu">
<meta property="og:url" content="https://dunwu.github.io/blog/page/3/index.html">
<meta property="og:site_name" content="Dunwu">
<meta property="og:description" content="Dunwu&#39;s Blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Zhang Peng">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://dunwu.github.io/blog/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Dunwu</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/blog/atom.xml" title="Dunwu" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/blog/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Dunwu</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <h1 class="site-subtitle" itemprop="description">å¤§é“è‡³ç®€ï¼ŒçŸ¥æ˜“è¡Œéš¾</h1>
      
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/blog/" rel="section"><i class="fa fa-fw fa-home"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/blog/about/" rel="section"><i class="fa fa-fw fa-user"></i>å…³äº</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/blog/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>æ ‡ç­¾<span class="badge">50</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/blog/categories/" rel="section"><i class="fa fa-fw fa-th"></i>åˆ†ç±»<span class="badge">14</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blog/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>å½’æ¡£<span class="badge">90</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="æœç´¢..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/dunwu" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/blog/theory/distributed-lock/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Zhang Peng">
      <meta itemprop="description" content="Dunwu's Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/theory/distributed-lock/" class="post-title-link" itemprop="url">åˆ†å¸ƒå¼é”åŸºæœ¬åŸç†</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-06-04 23:42:00" itemprop="dateCreated datePublished" datetime="2019-06-04T23:42:00+08:00">2019-06-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-08-10 09:56:46" itemprop="dateModified" datetime="2020-08-10T09:56:46+08:00">2020-08-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E5%88%86%E5%B8%83%E5%BC%8F/" itemprop="url" rel="index">
                    <span itemprop="name">åˆ†å¸ƒå¼</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/blog/theory/distributed-lock/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="theory/distributed-lock/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>9.8k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>9 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="åˆ†å¸ƒå¼é”åŸºæœ¬åŸç†"><a class="markdownIt-Anchor" href="#åˆ†å¸ƒå¼é”åŸºæœ¬åŸç†"></a> åˆ†å¸ƒå¼é”åŸºæœ¬åŸç†</h1>
<blockquote>
<p>åœ¨å¹¶å‘åœºæ™¯ä¸‹ï¼Œä¸ºäº†ä¿è¯å¹¶å‘å®‰å…¨ï¼Œæˆ‘ä»¬å¸¸å¸¸è¦é€šè¿‡äº’æ–¥ï¼ˆåŠ é”ï¼‰æ‰‹æ®µæ¥ä¿è¯æ•°æ®åŒæ­¥å®‰å…¨ã€‚</p>
<p>JDK è™½ç„¶æä¾›äº†å¤§é‡é”å·¥å…·ï¼Œä½†æ˜¯åªèƒ½ä½œç”¨äºå•ä¸€ Java è¿›ç¨‹ï¼Œæ— æ³•åº”ç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦ä½¿ç”¨åˆ†å¸ƒå¼é”ã€‚</p>
<p>åˆ†å¸ƒå¼é”çš„è§£å†³æ–¹æ¡ˆå¤§è‡´æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<ul>
<li>åŸºäºæ•°æ®åº“å®ç°</li>
<li>åŸºäºç¼“å­˜ï¼ˆredisï¼Œmemcached ç­‰ï¼‰å®ç°</li>
<li>åŸºäº Zookeeper å®ç° âœ…</li>
</ul>
<p>æ³¨ï¼šæ¨èåŸºäº ZooKeeper å®ç°åˆ†å¸ƒå¼é”ï¼Œå…·ä½“åŸå› çœ‹å®Œæœ¬æ–‡å³å¯æ˜äº†ã€‚</p>
<p>ğŸ“¦ æœ¬æ–‡å·²å½’æ¡£åˆ°ï¼šã€Œ<a href="https://github.com/dunwu/blog" target="_blank" rel="noopener">blog</a>ã€</p>
</blockquote>
<!-- TOC depthFrom:2 depthTo:3 -->
<ul>
<li><a href="#%E4%B8%80%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E6%80%9D%E8%B7%AF">ä¸€ã€åˆ†å¸ƒå¼é”æ€è·¯</a></li>
<li><a href="#%E4%BA%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81">äºŒã€æ•°æ®åº“åˆ†å¸ƒå¼é”</a>
<ul>
<li><a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%8E%9F%E7%90%86">æ•°æ®åº“åˆ†å¸ƒå¼é”åŸç†</a></li>
<li><a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E9%97%AE%E9%A2%98">æ•°æ®åº“åˆ†å¸ƒå¼é”é—®é¢˜</a></li>
<li><a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%B0%8F%E7%BB%93">æ•°æ®åº“åˆ†å¸ƒå¼é”å°ç»“</a></li>
</ul>
</li>
<li><a href="#%E4%B8%89redis-%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81">ä¸‰ã€Redis åˆ†å¸ƒå¼é”</a>
<ul>
<li><a href="#redis-%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%8E%9F%E7%90%86">Redis åˆ†å¸ƒå¼é”åŸç†</a></li>
<li><a href="#redis-%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%AE%9E%E7%8E%B0">Redis åˆ†å¸ƒå¼é”å®ç°</a></li>
<li><a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%B0%8F%E7%BB%93-1">æ•°æ®åº“åˆ†å¸ƒå¼é”å°ç»“</a></li>
<li><a href="#redlock-%E7%AE%97%E6%B3%95">RedLock ç®—æ³•</a></li>
</ul>
</li>
<li><a href="#%E5%9B%9Bzookeeper-%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81">å››ã€ZooKeeper åˆ†å¸ƒå¼é”</a>
<ul>
<li><a href="#zookeeper-%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%8E%9F%E7%90%86">ZooKeeper åˆ†å¸ƒå¼é”åŸç†</a></li>
<li><a href="#zookeeper-%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%AE%9E%E7%8E%B0">ZooKeeper åˆ†å¸ƒå¼é”å®ç°</a></li>
<li><a href="#zookeeper-%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%B0%8F%E7%BB%93">ZooKeeper åˆ†å¸ƒå¼é”å°ç»“</a></li>
</ul>
</li>
<li><a href="#%E4%BA%94-%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E6%96%B9%E6%A1%88%E5%AF%B9%E6%AF%94">äº”ã€ åˆ†å¸ƒå¼é”æ–¹æ¡ˆå¯¹æ¯”</a></li>
<li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">å‚è€ƒèµ„æ–™</a></li>
</ul>
<!-- /TOC -->
<h2 id="ä¸€-åˆ†å¸ƒå¼é”æ€è·¯"><a class="markdownIt-Anchor" href="#ä¸€-åˆ†å¸ƒå¼é”æ€è·¯"></a> ä¸€ã€åˆ†å¸ƒå¼é”æ€è·¯</h2>
<p>åˆ†å¸ƒå¼é”çš„æ€»ä½“æ€è·¯å¤§åŒå°å¼‚ï¼Œä»…åœ¨å®ç°ç»†èŠ‚ä¸Šæœ‰æ‰€ä¸åŒã€‚</p>
<p>åˆ†å¸ƒå¼é”çš„ä¸»è¦æ€è·¯å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>äº’æ–¥ã€å¯é‡å…¥</strong> - åˆ›å»ºé”å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œè¡¨ç°å½¢å¼ä¸ºå‘æ•°æ®å­˜å‚¨æœåŠ¡å™¨æˆ–å®¹å™¨æ’å…¥ä¸€ä¸ªå”¯ä¸€çš„ keyï¼Œä¸€æ—¦æœ‰ä¸€ä¸ªçº¿ç¨‹æ’å…¥è¿™ä¸ª keyï¼Œå…¶ä»–çº¿ç¨‹å°±ä¸èƒ½å†æ’å…¥äº†ã€‚
<ul>
<li>ä¿è¯ key å”¯ä¸€æ€§çš„æœ€ç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨ UUIDã€‚</li>
<li>å­˜å‚¨é”çš„é‡å…¥æ¬¡æ•°ï¼Œä»¥åŠåˆ†å¸ƒå¼ç¯å¢ƒä¸‹å”¯ä¸€çš„çº¿ç¨‹æ ‡è¯†ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¯ä»¥ä½¿ç”¨ json å­˜å‚¨ç»“æ„åŒ–æ•°æ®ï¼Œä¸ºäº†ä¿è¯å”¯ä¸€ï¼Œå¯ä»¥è€ƒè™‘å°† mac åœ°å€ï¼ˆIP åœ°å€ã€æœºå™¨ IDï¼‰ã€Jvm è¿›ç¨‹ IDï¼ˆåº”ç”¨ IDã€æœåŠ¡ IDï¼‰ã€çº¿ç¨‹ ID æ‹¼æ¥èµ·æ¥ä½œä¸ºå”¯ä¸€æ ‡è¯†ã€‚<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;<span class="attr">"count"</span>:<span class="number">1</span>,<span class="attr">"expireAt"</span>:<span class="number">147506817232</span>,<span class="attr">"jvmPid"</span>:<span class="number">22224</span>,<span class="attr">"mac"</span>:<span class="string">"28-D2-44-0E-0D-9A"</span>,<span class="attr">"threadId"</span>:<span class="number">14</span>&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><strong>é¿å…æ­»é”</strong> - æ•°æ®åº“åˆ†å¸ƒå¼é”å’Œç¼“å­˜åˆ†å¸ƒå¼é”ï¼ˆRedisï¼‰çš„æ€è·¯éƒ½æ˜¯å¼•å…¥è¶…æ—¶æœºåˆ¶ï¼Œå³æˆåŠŸç”³è¯·é”åï¼Œè¶…è¿‡ä¸€å®šæ—¶é—´ï¼Œé”å¤±æ•ˆï¼ˆåˆ é™¤ keyï¼‰ï¼ŒåŸå› åœ¨äºå®ƒä»¬æ— æ³•æ„ŸçŸ¥ç”³è¯·é”çš„å®¢æˆ·ç«¯èŠ‚ç‚¹çŠ¶æ€ã€‚è€Œ ZooKeeper ç”±äºå…¶ znode ä»¥ç›®å½•ã€æ–‡ä»¶å½¢å¼ç»„ç»‡ï¼Œå¤©ç„¶å°±å­˜åœ¨ç‰©ç†ç©ºé—´éš”ç¦»ï¼Œåªè¦ znode å­˜åœ¨ï¼Œå³è¡¨ç¤ºå®¢æˆ·ç«¯èŠ‚ç‚¹è¿˜åœ¨å·¥ä½œï¼Œæ‰€ä»¥ä¸å­˜åœ¨è¿™ç§é—®é¢˜ã€‚</li>
<li><strong>å®¹é”™</strong> - åªè¦å¤§éƒ¨åˆ† Redis èŠ‚ç‚¹å¯ç”¨ï¼Œå®¢æˆ·ç«¯å°±èƒ½æ­£å¸¸åŠ é”ã€‚</li>
<li><strong>è‡ªæ—‹é‡è¯•</strong> - è·å–ä¸åˆ°é”æ—¶ï¼Œä¸è¦ç›´æ¥è¿”å›å¤±è´¥ï¼Œè€Œæ˜¯æ”¯æŒä¸€å®šçš„å‘¨æœŸè‡ªæ—‹é‡è¯•ï¼Œè®¾ç½®ä¸€ä¸ªæ€»çš„è¶…æ—¶æ—¶é—´ï¼Œå½“è¿‡äº†è¶…æ—¶æ—¶é—´ä»¥åè¿˜æ²¡æœ‰è·å–åˆ°é”åˆ™è¿”å›å¤±è´¥ã€‚</li>
</ul>
<h2 id="äºŒ-æ•°æ®åº“åˆ†å¸ƒå¼é”"><a class="markdownIt-Anchor" href="#äºŒ-æ•°æ®åº“åˆ†å¸ƒå¼é”"></a> äºŒã€æ•°æ®åº“åˆ†å¸ƒå¼é”</h2>
<h3 id="æ•°æ®åº“åˆ†å¸ƒå¼é”åŸç†"><a class="markdownIt-Anchor" href="#æ•°æ®åº“åˆ†å¸ƒå¼é”åŸç†"></a> æ•°æ®åº“åˆ†å¸ƒå¼é”åŸç†</h3>
<p>ï¼ˆ1ï¼‰åˆ›å»ºè¡¨</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`methodLock`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'ä¸»é”®'</span>,</span><br><span class="line">  <span class="string">`method_name`</span> <span class="built_in">varchar</span>(<span class="number">64</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span> <span class="keyword">COMMENT</span> <span class="string">'é”å®šçš„æ–¹æ³•å'</span>,</span><br><span class="line">  <span class="string">`desc`</span> <span class="built_in">varchar</span>(<span class="number">1024</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'å¤‡æ³¨ä¿¡æ¯'</span>,</span><br><span class="line">  <span class="string">`update_time`</span> <span class="built_in">timestamp</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="keyword">CURRENT_TIMESTAMP</span> <span class="keyword">COMMENT</span> <span class="string">'ä¿å­˜æ•°æ®æ—¶é—´ï¼Œè‡ªåŠ¨ç”Ÿæˆ'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> <span class="string">`uidx_method_name`</span> (<span class="string">`method_name `</span>) <span class="keyword">USING</span> BTREE</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8 <span class="keyword">COMMENT</span>=<span class="string">'é”å®šä¸­çš„æ–¹æ³•'</span>;</span><br></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰è·å–é”</p>
<p>æƒ³è¦é”ä½æŸä¸ªæ–¹æ³•æ—¶ï¼Œæ‰§è¡Œä»¥ä¸‹ SQLï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> methodLock(method_name,<span class="keyword">desc</span>) <span class="keyword">values</span> (â€˜method_nameâ€™,â€˜<span class="keyword">desc</span>â€™)</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºæˆ‘ä»¬å¯¹ <code>method_name</code> åšäº†å”¯ä¸€æ€§çº¦æŸï¼Œè¿™é‡Œå¦‚æœæœ‰å¤šä¸ªè¯·æ±‚åŒæ—¶æäº¤åˆ°æ•°æ®åº“çš„è¯ï¼Œæ•°æ®åº“ä¼šä¿è¯åªæœ‰ä¸€ä¸ªæ“ä½œå¯ä»¥æˆåŠŸï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥è®¤ä¸ºæ“ä½œæˆåŠŸçš„é‚£ä¸ªçº¿ç¨‹è·å¾—äº†è¯¥æ–¹æ³•çš„é”ï¼Œå¯ä»¥æ‰§è¡Œæ–¹æ³•ä½“å†…å®¹ã€‚</p>
<p>æˆåŠŸæ’å…¥åˆ™è·å–é”ã€‚</p>
<p>ï¼ˆ3ï¼‰é‡Šæ”¾é”</p>
<p>å½“æ–¹æ³•æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œæƒ³è¦é‡Šæ”¾é”çš„è¯ï¼Œéœ€è¦æ‰§è¡Œä»¥ä¸‹ Sql:</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> methodLock <span class="keyword">where</span> method_name =<span class="string">'method_name'</span></span><br></pre></td></tr></table></figure>
<h3 id="æ•°æ®åº“åˆ†å¸ƒå¼é”é—®é¢˜"><a class="markdownIt-Anchor" href="#æ•°æ®åº“åˆ†å¸ƒå¼é”é—®é¢˜"></a> æ•°æ®åº“åˆ†å¸ƒå¼é”é—®é¢˜</h3>
<ul>
<li>è¿™æŠŠé”å¼ºä¾èµ–æ•°æ®åº“çš„å¯ç”¨æ€§ã€‚å¦‚æœæ•°æ®åº“æ˜¯ä¸€ä¸ªå•ç‚¹ï¼Œä¸€æ—¦æ•°æ®åº“æŒ‚æ‰ï¼Œä¼šå¯¼è‡´ä¸šåŠ¡ç³»ç»Ÿä¸å¯ç”¨ã€‚</li>
<li>è¿™æŠŠé”æ²¡æœ‰å¤±æ•ˆæ—¶é—´ï¼Œä¸€æ—¦è§£é”æ“ä½œå¤±è´¥ï¼Œå°±ä¼šå¯¼è‡´é”è®°å½•ä¸€ç›´åœ¨æ•°æ®åº“ä¸­ï¼Œå…¶ä»–çº¿ç¨‹æ— æ³•å†è·å¾—åˆ°é”ã€‚</li>
<li>è¿™æŠŠé”åªèƒ½æ˜¯éé˜»å¡çš„ï¼Œå› ä¸ºæ•°æ®çš„ insert æ“ä½œï¼Œä¸€æ—¦æ’å…¥å¤±è´¥å°±ä¼šç›´æ¥æŠ¥é”™ã€‚æ²¡æœ‰è·å¾—é”çš„çº¿ç¨‹å¹¶ä¸ä¼šè¿›å…¥æ’é˜Ÿé˜Ÿåˆ—ï¼Œè¦æƒ³å†æ¬¡è·å¾—é”å°±è¦å†æ¬¡è§¦å‘è·å¾—é”æ“ä½œã€‚</li>
<li>è¿™æŠŠé”æ˜¯éé‡å…¥çš„ï¼ŒåŒä¸€ä¸ªçº¿ç¨‹åœ¨æ²¡æœ‰é‡Šæ”¾é”ä¹‹å‰æ— æ³•å†æ¬¡è·å¾—è¯¥é”ã€‚å› ä¸ºæ•°æ®ä¸­æ•°æ®å·²ç»å­˜åœ¨äº†ã€‚</li>
</ul>
<p>è§£å†³åŠæ³•ï¼š</p>
<ul>
<li>å•ç‚¹é—®é¢˜å¯ä»¥ç”¨å¤šæ•°æ®åº“å®ä¾‹ï¼ŒåŒæ—¶å¡ N ä¸ªè¡¨ï¼ŒN/2+1 ä¸ªæˆåŠŸå°±ä»»åŠ¡é”å®šæˆåŠŸ</li>
<li>å†™ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œéš”ä¸€æ®µæ—¶é—´æ¸…é™¤ä¸€æ¬¡è¿‡æœŸçš„æ•°æ®ã€‚</li>
<li>å†™ä¸€ä¸ª while å¾ªç¯ï¼Œä¸æ–­çš„é‡è¯•æ’å…¥ï¼Œç›´åˆ°æˆåŠŸã€‚</li>
<li>åœ¨æ•°æ®åº“è¡¨ä¸­åŠ ä¸ªå­—æ®µï¼Œè®°å½•å½“å‰è·å¾—é”çš„æœºå™¨çš„ä¸»æœºä¿¡æ¯å’Œçº¿ç¨‹ä¿¡æ¯ï¼Œé‚£ä¹ˆä¸‹æ¬¡å†è·å–é”çš„æ—¶å€™å…ˆæŸ¥è¯¢æ•°æ®åº“ï¼Œå¦‚æœå½“å‰æœºå™¨çš„ä¸»æœºä¿¡æ¯å’Œçº¿ç¨‹ä¿¡æ¯åœ¨æ•°æ®åº“å¯ä»¥æŸ¥åˆ°çš„è¯ï¼Œç›´æ¥æŠŠé”åˆ†é…ç»™ä»–å°±å¯ä»¥äº†ã€‚</li>
</ul>
<h3 id="æ•°æ®åº“åˆ†å¸ƒå¼é”å°ç»“"><a class="markdownIt-Anchor" href="#æ•°æ®åº“åˆ†å¸ƒå¼é”å°ç»“"></a> æ•°æ®åº“åˆ†å¸ƒå¼é”å°ç»“</h3>
<ul>
<li>ä¼˜ç‚¹: ç›´æ¥å€ŸåŠ©æ•°æ®åº“ï¼Œå®¹æ˜“ç†è§£ã€‚</li>
<li>ç¼ºç‚¹: ä¼šæœ‰å„ç§å„æ ·çš„é—®é¢˜ï¼Œåœ¨è§£å†³é—®é¢˜çš„è¿‡ç¨‹ä¸­ä¼šä½¿æ•´ä¸ªæ–¹æ¡ˆå˜å¾—è¶Šæ¥è¶Šå¤æ‚ã€‚æ“ä½œæ•°æ®åº“éœ€è¦ä¸€å®šçš„å¼€é”€ï¼Œæ€§èƒ½é—®é¢˜éœ€è¦è€ƒè™‘ã€‚</li>
</ul>
<h2 id="ä¸‰-redis-åˆ†å¸ƒå¼é”"><a class="markdownIt-Anchor" href="#ä¸‰-redis-åˆ†å¸ƒå¼é”"></a> ä¸‰ã€Redis åˆ†å¸ƒå¼é”</h2>
<p>ç›¸æ¯”äºç”¨æ•°æ®åº“æ¥å®ç°åˆ†å¸ƒå¼é”ï¼ŒåŸºäºç¼“å­˜å®ç°çš„åˆ†å¸ƒå¼é”çš„æ€§èƒ½ä¼šæ›´å¥½ä¸€äº›ã€‚ç›®å‰æœ‰å¾ˆå¤šæˆç†Ÿçš„åˆ†å¸ƒå¼äº§å“ï¼ŒåŒ…æ‹¬ Redisã€memcacheã€Tair ç­‰ã€‚è¿™é‡Œä»¥ Redis ä¸¾ä¾‹ã€‚</p>
<h3 id="redis-åˆ†å¸ƒå¼é”åŸç†"><a class="markdownIt-Anchor" href="#redis-åˆ†å¸ƒå¼é”åŸç†"></a> Redis åˆ†å¸ƒå¼é”åŸç†</h3>
<p>è¿™ä¸ªåˆ†å¸ƒå¼é”æœ‰ 3 ä¸ªé‡è¦çš„è€ƒé‡ç‚¹ï¼š</p>
<ol>
<li>äº’æ–¥ï¼ˆåªèƒ½æœ‰ä¸€ä¸ªå®¢æˆ·ç«¯è·å–é”ï¼‰</li>
<li>ä¸èƒ½æ­»é”</li>
<li>å®¹é”™ï¼ˆåªè¦å¤§éƒ¨åˆ† redis èŠ‚ç‚¹åˆ›å»ºäº†è¿™æŠŠé”å°±å¯ä»¥ï¼‰</li>
</ol>
<p>å¯¹åº”çš„ Redis æŒ‡ä»¤å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>setnx</code> - <code>setnx key val</code>ï¼šå½“ä¸”ä»…å½“ key ä¸å­˜åœ¨æ—¶ï¼Œset ä¸€ä¸ª key ä¸º val çš„å­—ç¬¦ä¸²ï¼Œè¿”å› 1ï¼›è‹¥ key å­˜åœ¨ï¼Œåˆ™ä»€ä¹ˆéƒ½ä¸åšï¼Œè¿”å› 0ã€‚</li>
<li><code>expire</code> - <code>expire key timeout</code>ï¼šä¸º key è®¾ç½®ä¸€ä¸ªè¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸º secondï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´é”ä¼šè‡ªåŠ¨é‡Šæ”¾ï¼Œé¿å…æ­»é”ã€‚</li>
<li><code>delete</code> - <code>delete key</code>ï¼šåˆ é™¤ key</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<p>ä¸è¦å°† setnx å’Œ expire ä½œä¸ºä¸¤ä¸ªå‘½ä»¤ç»„åˆå®ç°åŠ é”ï¼Œè¿™æ ·å°±<strong>æ— æ³•ä¿è¯åŸå­æ€§</strong>ã€‚å¦‚æœå®¢æˆ·ç«¯åœ¨ setnx ä¹‹åå´©æºƒï¼Œé‚£ä¹ˆå°†å¯¼è‡´é”æ— æ³•é‡Šæ”¾ã€‚æ­£ç¡®çš„åšæ³•åº”æ˜¯åœ¨ setnx å‘½ä»¤ä¸­æŒ‡å®š expire æ—¶é—´ã€‚</p>
</blockquote>
<h3 id="redis-åˆ†å¸ƒå¼é”å®ç°"><a class="markdownIt-Anchor" href="#redis-åˆ†å¸ƒå¼é”å®ç°"></a> Redis åˆ†å¸ƒå¼é”å®ç°</h3>
<p>ï¼ˆ1ï¼‰ç”³è¯·é”</p>
<figure class="highlight gams"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SET</span> resource_name <span class="comment">my_random_value NX PX 30000</span></span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œè¿™ä¸ªå‘½ä»¤å°± okã€‚</p>
<ul>
<li><code>NX</code>ï¼šè¡¨ç¤ºåªæœ‰ <code>key</code> ä¸å­˜åœ¨çš„æ—¶å€™æ‰ä¼šè®¾ç½®æˆåŠŸã€‚ï¼ˆå¦‚æœæ­¤æ—¶ redis ä¸­å­˜åœ¨è¿™ä¸ª keyï¼Œé‚£ä¹ˆè®¾ç½®å¤±è´¥ï¼Œè¿”å› <code>nil</code>ï¼‰</li>
<li><code>PX 30000</code>ï¼šæ„æ€æ˜¯ 30s åé”è‡ªåŠ¨é‡Šæ”¾ã€‚åˆ«äººåˆ›å»ºçš„æ—¶å€™å¦‚æœå‘ç°å·²ç»æœ‰äº†å°±ä¸èƒ½åŠ é”äº†ã€‚</li>
</ul>
<p>ï¼ˆ2ï¼‰é‡Šæ”¾é”</p>
<p>é‡Šæ”¾é”å°±æ˜¯åˆ é™¤ key ï¼Œä½†æ˜¯ä¸€èˆ¬å¯ä»¥ç”¨ <code>lua</code> è„šæœ¬åˆ é™¤ï¼Œåˆ¤æ–­ value ä¸€æ ·æ‰åˆ é™¤ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">-- åˆ é™¤é”çš„æ—¶å€™ï¼Œæ‰¾åˆ° key å¯¹åº”çš„ valueï¼Œè·Ÿè‡ªå·±ä¼ è¿‡å»çš„ value åšæ¯”è¾ƒï¼Œå¦‚æœæ˜¯ä¸€æ ·çš„æ‰åˆ é™¤ã€‚</span><br><span class="line"><span class="keyword">if</span> redis.call(<span class="string">"get"</span>,KEYS[<span class="number">1</span>]) == ARGV[<span class="number">1</span>] then</span><br><span class="line">    <span class="keyword">return</span> redis.call(<span class="string">"del"</span>,KEYS[<span class="number">1</span>])</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h3 id="æ•°æ®åº“åˆ†å¸ƒå¼é”å°ç»“-2"><a class="markdownIt-Anchor" href="#æ•°æ®åº“åˆ†å¸ƒå¼é”å°ç»“-2"></a> æ•°æ®åº“åˆ†å¸ƒå¼é”å°ç»“</h3>
<p>ä¸ºå•¥è¦ç”¨ <code>random_value</code> éšæœºå€¼å‘¢ï¼Ÿå› ä¸ºå¦‚æœæŸä¸ªå®¢æˆ·ç«¯è·å–åˆ°äº†é”ï¼Œä½†æ˜¯é˜»å¡äº†å¾ˆé•¿æ—¶é—´æ‰æ‰§è¡Œå®Œï¼Œæ¯”å¦‚è¯´è¶…è¿‡äº† 30sï¼Œæ­¤æ—¶å¯èƒ½å·²ç»è‡ªåŠ¨é‡Šæ”¾é”äº†ï¼Œæ­¤æ—¶å¯èƒ½åˆ«çš„å®¢æˆ·ç«¯å·²ç»è·å–åˆ°äº†è¿™ä¸ªé”ï¼Œè¦æ˜¯ä½ è¿™ä¸ªæ—¶å€™ç›´æ¥åˆ é™¤ key çš„è¯ä¼šæœ‰é—®é¢˜ï¼Œæ‰€ä»¥å¾—ç”¨éšæœºå€¼åŠ ä¸Šé¢çš„ <code>lua</code> è„šæœ¬æ¥é‡Šæ”¾é”ã€‚</p>
<p>ä½†æ˜¯è¿™æ ·æ˜¯è‚¯å®šä¸è¡Œçš„ã€‚å› ä¸ºå¦‚æœæ˜¯æ™®é€šçš„ redis å•å®ä¾‹ï¼Œé‚£å°±æ˜¯å•ç‚¹æ•…éšœã€‚æˆ–è€…æ˜¯ redis æ™®é€šä¸»ä»ï¼Œé‚£ redis ä¸»ä»å¼‚æ­¥å¤åˆ¶ï¼Œå¦‚æœä¸»èŠ‚ç‚¹æŒ‚äº†ï¼ˆkey å°±æ²¡æœ‰äº†ï¼‰ï¼Œkey è¿˜æ²¡åŒæ­¥åˆ°ä»èŠ‚ç‚¹ï¼Œæ­¤æ—¶ä»èŠ‚ç‚¹åˆ‡æ¢ä¸ºä¸»èŠ‚ç‚¹ï¼Œåˆ«äººå°±å¯ä»¥ set keyï¼Œä»è€Œæ‹¿åˆ°é”ã€‚</p>
<h3 id="redlock-ç®—æ³•"><a class="markdownIt-Anchor" href="#redlock-ç®—æ³•"></a> RedLock ç®—æ³•</h3>
<p>è¿™ä¸ªåœºæ™¯æ˜¯å‡è®¾æœ‰ä¸€ä¸ª redis clusterï¼Œæœ‰ 5 ä¸ª redis master å®ä¾‹ã€‚ç„¶åæ‰§è¡Œå¦‚ä¸‹æ­¥éª¤è·å–ä¸€æŠŠé”ï¼š</p>
<ol>
<li>è·å–å½“å‰æ—¶é—´æˆ³ï¼Œå•ä½æ˜¯æ¯«ç§’ï¼›</li>
<li>è·Ÿä¸Šé¢ç±»ä¼¼ï¼Œè½®æµå°è¯•åœ¨æ¯ä¸ª master èŠ‚ç‚¹ä¸Šåˆ›å»ºé”ï¼Œè¿‡æœŸæ—¶é—´è¾ƒçŸ­ï¼Œä¸€èˆ¬å°±å‡ åæ¯«ç§’ï¼›</li>
<li>å°è¯•åœ¨<strong>å¤§å¤šæ•°èŠ‚ç‚¹</strong>ä¸Šå»ºç«‹ä¸€ä¸ªé”ï¼Œæ¯”å¦‚ 5 ä¸ªèŠ‚ç‚¹å°±è¦æ±‚æ˜¯ 3 ä¸ªèŠ‚ç‚¹ <code>n / 2 + 1</code>ï¼›</li>
<li>å®¢æˆ·ç«¯è®¡ç®—å»ºç«‹å¥½é”çš„æ—¶é—´ï¼Œå¦‚æœå»ºç«‹é”çš„æ—¶é—´å°äºè¶…æ—¶æ—¶é—´ï¼Œå°±ç®—å»ºç«‹æˆåŠŸäº†ï¼›</li>
<li>è¦æ˜¯é”å»ºç«‹å¤±è´¥äº†ï¼Œé‚£ä¹ˆå°±ä¾æ¬¡ä¹‹å‰å»ºç«‹è¿‡çš„é”åˆ é™¤ï¼›</li>
<li>åªè¦åˆ«äººå»ºç«‹äº†ä¸€æŠŠåˆ†å¸ƒå¼é”ï¼Œä½ å°±å¾—<strong>ä¸æ–­è½®è¯¢å»å°è¯•è·å–é”</strong>ã€‚</li>
</ol>
<p><a href="https://redis.io/" target="_blank" rel="noopener">Redis å®˜æ–¹</a>ç»™å‡ºäº†ä»¥ä¸Šä¸¤ç§åŸºäº Redis å®ç°åˆ†å¸ƒå¼é”çš„æ–¹æ³•ï¼Œè¯¦ç»†è¯´æ˜å¯ä»¥æŸ¥çœ‹ï¼š<a href="https://redis.io/topics/distlock" target="_blank" rel="noopener">https://redis.io/topics/distlock</a> ã€‚</p>
<h2 id="å››-zookeeper-åˆ†å¸ƒå¼é”"><a class="markdownIt-Anchor" href="#å››-zookeeper-åˆ†å¸ƒå¼é”"></a> å››ã€ZooKeeper åˆ†å¸ƒå¼é”</h2>
<h3 id="zookeeper-åˆ†å¸ƒå¼é”åŸç†"><a class="markdownIt-Anchor" href="#zookeeper-åˆ†å¸ƒå¼é”åŸç†"></a> ZooKeeper åˆ†å¸ƒå¼é”åŸç†</h3>
<p>è¿™ä¹Ÿæ˜¯ ZooKeeper å®¢æˆ·ç«¯ curator çš„åˆ†å¸ƒå¼é”å®ç°ã€‚</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªç›®å½• mylockï¼›</li>
<li>çº¿ç¨‹ A æƒ³è·å–é”å°±åœ¨ mylock ç›®å½•ä¸‹åˆ›å»ºä¸´æ—¶é¡ºåºèŠ‚ç‚¹ï¼›</li>
<li>è·å– mylock ç›®å½•ä¸‹æ‰€æœ‰çš„å­èŠ‚ç‚¹ï¼Œç„¶åè·å–æ¯”è‡ªå·±å°çš„å…„å¼ŸèŠ‚ç‚¹ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¯´æ˜å½“å‰çº¿ç¨‹é¡ºåºå·æœ€å°ï¼Œè·å¾—é”ï¼›</li>
<li>çº¿ç¨‹ B è·å–æ‰€æœ‰èŠ‚ç‚¹ï¼Œåˆ¤æ–­è‡ªå·±ä¸æ˜¯æœ€å°èŠ‚ç‚¹ï¼Œè®¾ç½®ç›‘å¬æ¯”è‡ªå·±æ¬¡å°çš„èŠ‚ç‚¹ï¼›</li>
<li>çº¿ç¨‹ A å¤„ç†å®Œï¼Œåˆ é™¤è‡ªå·±çš„èŠ‚ç‚¹ï¼Œçº¿ç¨‹ B ç›‘å¬åˆ°å˜æ›´äº‹ä»¶ï¼Œåˆ¤æ–­è‡ªå·±æ˜¯ä¸æ˜¯æœ€å°çš„èŠ‚ç‚¹ï¼Œå¦‚æœæ˜¯åˆ™è·å¾—é”ã€‚</li>
</ol>
<h3 id="zookeeper-åˆ†å¸ƒå¼é”å®ç°"><a class="markdownIt-Anchor" href="#zookeeper-åˆ†å¸ƒå¼é”å®ç°"></a> ZooKeeper åˆ†å¸ƒå¼é”å®ç°</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ZooKeeperSession</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> bingo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2018/11/29</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZooKeeperSession</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> CountDownLatch connectedSemaphore = <span class="keyword">new</span> CountDownLatch(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ZooKeeper zookeeper;</span><br><span class="line">    <span class="keyword">private</span> CountDownLatch latch;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ZooKeeperSession</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.zookeeper = <span class="keyword">new</span> ZooKeeper(<span class="string">"192.168.31.187:2181,192.168.31.19:2181,192.168.31.227:2181"</span>, <span class="number">50000</span>, <span class="keyword">new</span> ZooKeeperWatcher());</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                connectedSemaphore.await();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">"ZooKeeper session established......"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–åˆ†å¸ƒå¼é”</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> productId</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Boolean <span class="title">acquireDistributedLock</span><span class="params">(Long productId)</span> </span>&#123;</span><br><span class="line">        String path = <span class="string">"/product-lock-"</span> + productId;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            zookeeper.create(path, <span class="string">""</span>.getBytes(), Ids.OPEN_ACL_UNSAFE, CreateMode.EPHEMERAL);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">// ç›¸å½“äºæ˜¯ç»™nodeæ³¨å†Œä¸€ä¸ªç›‘å¬å™¨ï¼Œå»çœ‹çœ‹è¿™ä¸ªç›‘å¬å™¨æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">                    Stat stat = zk.exists(path, <span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (stat != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        <span class="keyword">this</span>.latch = <span class="keyword">new</span> CountDownLatch(<span class="number">1</span>);</span><br><span class="line">                        <span class="keyword">this</span>.latch.await(waitTime, TimeUnit.MILLISECONDS);</span><br><span class="line">                        <span class="keyword">this</span>.latch = <span class="keyword">null</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    zookeeper.create(path, <span class="string">""</span>.getBytes(), Ids.OPEN_ACL_UNSAFE, CreateMode.EPHEMERAL);</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception ee) &#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é‡Šæ”¾æ‰ä¸€ä¸ªåˆ†å¸ƒå¼é”</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> productId</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">releaseDistributedLock</span><span class="params">(Long productId)</span> </span>&#123;</span><br><span class="line">        String path = <span class="string">"/product-lock-"</span> + productId;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            zookeeper.delete(path, -<span class="number">1</span>);</span><br><span class="line">            System.out.println(<span class="string">"release the lock for product[id="</span> + productId + <span class="string">"]......"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å»ºç«‹zk sessionçš„watcher</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> bingo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 2018/11/29</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">ZooKeeperWatcher</span> <span class="keyword">implements</span> <span class="title">Watcher</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">process</span><span class="params">(WatchedEvent event)</span> </span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"Receive watched event: "</span> + event.getState());</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (KeeperState.SyncConnected == event.getState()) &#123;</span><br><span class="line">                connectedSemaphore.countDown();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.latch != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">this</span>.latch.countDown();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°è£…å•ä¾‹çš„é™æ€å†…éƒ¨ç±»</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> bingo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 2018/11/29</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> ZooKeeperSession instance;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">static</span> &#123;</span><br><span class="line">            instance = <span class="keyword">new</span> ZooKeeperSession();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ZooKeeperSession <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> instance;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–å•ä¾‹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ZooKeeperSession <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Singleton.getInstance();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆå§‹åŒ–å•ä¾‹çš„ä¾¿æ·æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        getInstance();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥é‡‡ç”¨å¦ä¸€ç§æ–¹å¼ï¼Œåˆ›å»ºä¸´æ—¶é¡ºåºèŠ‚ç‚¹ï¼š</p>
<p>å¦‚æœæœ‰ä¸€æŠŠé”ï¼Œè¢«å¤šä¸ªäººç»™ç«äº‰ï¼Œæ­¤æ—¶å¤šä¸ªäººä¼šæ’é˜Ÿï¼Œç¬¬ä¸€ä¸ªæ‹¿åˆ°é”çš„äººä¼šæ‰§è¡Œï¼Œç„¶åé‡Šæ”¾é”ï¼›åé¢çš„æ¯ä¸ªäººéƒ½ä¼šå»ç›‘å¬<strong>æ’åœ¨è‡ªå·±å‰é¢</strong>çš„é‚£ä¸ªäººåˆ›å»ºçš„ node ä¸Šï¼Œä¸€æ—¦æŸä¸ªäººé‡Šæ”¾äº†é”ï¼Œæ’åœ¨è‡ªå·±åé¢çš„äººå°±ä¼šè¢« zookeeper ç»™é€šçŸ¥ï¼Œä¸€æ—¦è¢«é€šçŸ¥äº†ä¹‹åï¼Œå°± ok äº†ï¼Œè‡ªå·±å°±è·å–åˆ°äº†é”ï¼Œå°±å¯ä»¥æ‰§è¡Œä»£ç äº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZooKeeperDistributedLock</span> <span class="keyword">implements</span> <span class="title">Watcher</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ZooKeeper zk;</span><br><span class="line">    <span class="keyword">private</span> String locksRoot = <span class="string">"/locks"</span>;</span><br><span class="line">    <span class="keyword">private</span> String productId;</span><br><span class="line">    <span class="keyword">private</span> String waitNode;</span><br><span class="line">    <span class="keyword">private</span> String lockNode;</span><br><span class="line">    <span class="keyword">private</span> CountDownLatch latch;</span><br><span class="line">    <span class="keyword">private</span> CountDownLatch connectedLatch = <span class="keyword">new</span> CountDownLatch(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> sessionTimeout = <span class="number">30000</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ZooKeeperDistributedLock</span><span class="params">(String productId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.productId = productId;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String address = <span class="string">"192.168.31.187:2181,192.168.31.19:2181,192.168.31.227:2181"</span>;</span><br><span class="line">            zk = <span class="keyword">new</span> ZooKeeper(address, sessionTimeout, <span class="keyword">this</span>);</span><br><span class="line">            connectedLatch.await();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> LockException(e);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (KeeperException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> LockException(e);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> LockException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">process</span><span class="params">(WatchedEvent event)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (event.getState() == KeeperState.SyncConnected) &#123;</span><br><span class="line">            connectedLatch.countDown();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.latch != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.latch.countDown();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">acquireDistributedLock</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.tryLock()) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                waitForLock(waitNode, sessionTimeout);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (KeeperException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> LockException(e);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> LockException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">tryLock</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"> 		    <span class="comment">// ä¼ å…¥è¿›å»çš„locksRoot + â€œ/â€ + productId</span></span><br><span class="line">		    <span class="comment">// å‡è®¾productIdä»£è¡¨äº†ä¸€ä¸ªå•†å“idï¼Œæ¯”å¦‚è¯´1</span></span><br><span class="line">		    <span class="comment">// locksRoot = locks</span></span><br><span class="line">		    <span class="comment">// /locks/10000000000ï¼Œ/locks/10000000001ï¼Œ/locks/10000000002</span></span><br><span class="line">            lockNode = zk.create(locksRoot + <span class="string">"/"</span> + productId, <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">0</span>], ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.EPHEMERAL_SEQUENTIAL);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// çœ‹çœ‹åˆšåˆ›å»ºçš„èŠ‚ç‚¹æ˜¯ä¸æ˜¯æœ€å°çš„èŠ‚ç‚¹</span></span><br><span class="line">	 	    <span class="comment">// locksï¼š10000000000ï¼Œ10000000001ï¼Œ10000000002</span></span><br><span class="line">            List&lt;String&gt; locks = zk.getChildren(locksRoot, <span class="keyword">false</span>);</span><br><span class="line">            Collections.sort(locks);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(lockNode.equals(locksRoot+<span class="string">"/"</span>+ locks.get(<span class="number">0</span>)))&#123;</span><br><span class="line">                <span class="comment">//å¦‚æœæ˜¯æœ€å°çš„èŠ‚ç‚¹,åˆ™è¡¨ç¤ºå–å¾—é”</span></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//å¦‚æœä¸æ˜¯æœ€å°çš„èŠ‚ç‚¹ï¼Œæ‰¾åˆ°æ¯”è‡ªå·±å°1çš„èŠ‚ç‚¹</span></span><br><span class="line">	  <span class="keyword">int</span> previousLockIndex = -<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; locks.size(); i++) &#123;</span><br><span class="line">		<span class="keyword">if</span>(lockNode.equals(locksRoot + â€œ/â€ + locks.get(i))) &#123;</span><br><span class="line">	         	    previousLockIndex = i - <span class="number">1</span>;</span><br><span class="line">		    <span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	   &#125;</span><br><span class="line"></span><br><span class="line">	   <span class="keyword">this</span>.waitNode = locks.get(previousLockIndex);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (KeeperException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> LockException(e);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> LockException(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">waitForLock</span><span class="params">(String waitNode, <span class="keyword">long</span> waitTime)</span> <span class="keyword">throws</span> InterruptedException, KeeperException </span>&#123;</span><br><span class="line">        Stat stat = zk.exists(locksRoot + <span class="string">"/"</span> + waitNode, <span class="keyword">true</span>);</span><br><span class="line">        <span class="keyword">if</span> (stat != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.latch = <span class="keyword">new</span> CountDownLatch(<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">this</span>.latch.await(waitTime, TimeUnit.MILLISECONDS);</span><br><span class="line">            <span class="keyword">this</span>.latch = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">unlock</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// åˆ é™¤/locks/10000000000èŠ‚ç‚¹</span></span><br><span class="line">            <span class="comment">// åˆ é™¤/locks/10000000001èŠ‚ç‚¹</span></span><br><span class="line">            System.out.println(<span class="string">"unlock "</span> + lockNode);</span><br><span class="line">            zk.delete(lockNode, -<span class="number">1</span>);</span><br><span class="line">            lockNode = <span class="keyword">null</span>;</span><br><span class="line">            zk.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (KeeperException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LockException</span> <span class="keyword">extends</span> <span class="title">RuntimeException</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">LockException</span><span class="params">(String e)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">super</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">LockException</span><span class="params">(Exception e)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">super</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="zookeeper-åˆ†å¸ƒå¼é”å°ç»“"><a class="markdownIt-Anchor" href="#zookeeper-åˆ†å¸ƒå¼é”å°ç»“"></a> ZooKeeper åˆ†å¸ƒå¼é”å°ç»“</h3>
<p>ZooKeeper ç‰ˆæœ¬çš„åˆ†å¸ƒå¼é”é—®é¢˜ç›¸å¯¹æ¯”è¾ƒæ¥è¯´å°‘ã€‚</p>
<ul>
<li>é”çš„å ç”¨æ—¶é—´é™åˆ¶ï¼šredis å°±æœ‰å ç”¨æ—¶é—´é™åˆ¶ï¼Œè€Œ ZooKeeper åˆ™æ²¡æœ‰ï¼Œæœ€ä¸»è¦çš„åŸå› æ˜¯ redis ç›®å‰æ²¡æœ‰åŠæ³•çŸ¥é“å·²ç»è·å–é”çš„å®¢æˆ·ç«¯çš„çŠ¶æ€ï¼Œæ˜¯å·²ç»æŒ‚äº†å‘¢è¿˜æ˜¯æ­£åœ¨æ‰§è¡Œè€—æ—¶è¾ƒé•¿çš„ä¸šåŠ¡é€»è¾‘ã€‚è€Œ ZooKeeper é€šè¿‡ä¸´æ—¶èŠ‚ç‚¹å°±èƒ½æ¸…æ™°çŸ¥é“ï¼Œå¦‚æœä¸´æ—¶èŠ‚ç‚¹å­˜åœ¨è¯´æ˜è¿˜åœ¨æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œå¦‚æœä¸´æ—¶èŠ‚ç‚¹ä¸å­˜åœ¨è¯´æ˜å·²ç»æ‰§è¡Œå®Œæ¯•é‡Šæ”¾é”æˆ–è€…æ˜¯æŒ‚äº†ã€‚ç”±æ­¤çœ‹æ¥ redis å¦‚æœèƒ½åƒ ZooKeeper ä¸€æ ·æ·»åŠ ä¸€äº›ä¸å®¢æˆ·ç«¯ç»‘å®šçš„ä¸´æ—¶é”®ï¼Œä¹Ÿæ˜¯ä¸€å¤§å¥½äº‹ã€‚</li>
<li>æ˜¯å¦å•ç‚¹æ•…éšœï¼šredis æœ¬èº«æœ‰å¾ˆå¤šä¸­ç©æ³•ï¼Œå¦‚å®¢æˆ·ç«¯ä¸€è‡´æ€§ hashï¼ŒæœåŠ¡å™¨ç«¯ sentinel æ–¹æ¡ˆæˆ–è€… cluster æ–¹æ¡ˆï¼Œå¾ˆéš¾åšåˆ°ä¸€ç§åˆ†å¸ƒå¼é”æ–¹å¼èƒ½åº”å¯¹æ‰€æœ‰è¿™äº›æ–¹æ¡ˆã€‚è€Œ ZooKeeper åªæœ‰ä¸€ç§ç©æ³•ï¼Œå¤šå°æœºå™¨çš„èŠ‚ç‚¹æ•°æ®æ˜¯ä¸€è‡´çš„ï¼Œæ²¡æœ‰ redis çš„é‚£ä¹ˆå¤šçš„éº»çƒ¦å› ç´ è¦è€ƒè™‘ã€‚</li>
</ul>
<p>æ€»ä½“ä¸Šæ¥è¯´ ZooKeeper å®ç°åˆ†å¸ƒå¼é”æ›´åŠ çš„ç®€å•ï¼Œå¯é æ€§æ›´é«˜ã€‚ä½† ZooKeeper å› ä¸ºéœ€è¦é¢‘ç¹çš„åˆ›å»ºå’Œåˆ é™¤èŠ‚ç‚¹ï¼Œæ€§èƒ½ä¸Šä¸å¦‚ Redis æ–¹å¼ã€‚</p>
<h2 id="äº”-åˆ†å¸ƒå¼é”æ–¹æ¡ˆå¯¹æ¯”"><a class="markdownIt-Anchor" href="#äº”-åˆ†å¸ƒå¼é”æ–¹æ¡ˆå¯¹æ¯”"></a> äº”ã€ åˆ†å¸ƒå¼é”æ–¹æ¡ˆå¯¹æ¯”</h2>
<p>æ•°æ®åº“åˆ†å¸ƒå¼é”ï¼Œé—®é¢˜æ¯”è¾ƒå¤šï¼Œè§£å†³èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œä¸æ¨èã€‚</p>
<p>æ€§èƒ½ï¼š</p>
<ul>
<li>Redis åˆ†å¸ƒå¼é”ï¼Œå…¶å®<strong>éœ€è¦è‡ªå·±ä¸æ–­è‡ªæ—‹å»å°è¯•è·å–é”</strong>ï¼Œæ¯”è¾ƒæ¶ˆè€—æ€§èƒ½ã€‚</li>
<li>ZooKeeper åˆ†å¸ƒå¼é”ï¼Œè·å–ä¸åˆ°é”ï¼Œæ³¨å†Œä¸ªç›‘å¬å™¨å³å¯ï¼Œä¸éœ€è¦ä¸æ–­ä¸»åŠ¨å°è¯•è·å–é”ï¼Œæ€§èƒ½å¼€é”€è¾ƒå°ã€‚</li>
</ul>
<p>å¯é æ€§ï¼š</p>
<ul>
<li>å¦‚æœæ˜¯ redis è·å–é”çš„é‚£ä¸ªå®¢æˆ·ç«¯å‡ºç° bug æŒ‚äº†ï¼Œé‚£ä¹ˆåªèƒ½ç­‰å¾…è¶…æ—¶æ—¶é—´ä¹‹åæ‰èƒ½é‡Šæ”¾é”ï¼›</li>
<li>è€Œ zk çš„è¯ï¼Œå› ä¸ºåˆ›å»ºçš„æ˜¯ä¸´æ—¶ znodeï¼Œåªè¦å®¢æˆ·ç«¯æŒ‚äº†ï¼Œznode å°±æ²¡äº†ï¼Œæ­¤æ—¶å°±è‡ªåŠ¨é‡Šæ”¾é”ã€‚</li>
</ul>
<p>ç»¼ä¸Šåˆ†æï¼Œ<strong>ZooKeeper å®ç°åˆ†å¸ƒå¼é”æ›´åŠ çš„ç®€å•ï¼Œå¯é æ€§æ›´é«˜</strong>ã€‚âœ…</p>
<h2 id="å‚è€ƒèµ„æ–™"><a class="markdownIt-Anchor" href="#å‚è€ƒèµ„æ–™"></a> å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://juejin.im/post/5a20cd8bf265da43163cdd9a" target="_blank" rel="noopener">åˆ†å¸ƒå¼é”å®ç°æ±‡æ€»</a></li>
<li><a href="https://www.jianshu.com/p/1c5c1a592088" target="_blank" rel="noopener">Redis å®ç°åˆ†å¸ƒå¼é”ï¼Œä»¥åŠå¯é‡å…¥é”æ€è·¯</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/blog/network/network-interview/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Zhang Peng">
      <meta itemprop="description" content="Dunwu's Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/network/network-interview/" class="post-title-link" itemprop="url">ç½‘ç»œé€šä¿¡çŸ¥è¯†ç‚¹é¢ç»</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-06-02 00:00:00" itemprop="dateCreated datePublished" datetime="2019-06-02T00:00:00+08:00">2019-06-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-08-10 09:56:46" itemprop="dateModified" datetime="2020-08-10T09:56:46+08:00">2020-08-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index">
                    <span itemprop="name">ç½‘ç»œ</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/blog/network/network-interview/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="network/network-interview/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>4k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>4 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ç½‘ç»œé€šä¿¡çŸ¥è¯†ç‚¹é¢ç»"><a class="markdownIt-Anchor" href="#ç½‘ç»œé€šä¿¡çŸ¥è¯†ç‚¹é¢ç»"></a> ç½‘ç»œé€šä¿¡çŸ¥è¯†ç‚¹é¢ç»</h1>
<blockquote>
<p>ğŸ“¦ æœ¬æ–‡å·²å½’æ¡£åˆ°ï¼šã€Œ<a href="https://github.com/dunwu/blog" target="_blank" rel="noopener">blog</a>ã€</p>
<p>å¦‚æœä½ ä¸æ˜¯ä»äº‹äºé€šä¿¡é¢†åŸŸï¼Œé¢è¯•æ—¶é—®åŠè®¡ç®—æœºç½‘ç»œçš„çŸ¥è¯†ï¼Œä¸€èˆ¬ä¹Ÿå°±é™å®šåœ¨ï¼šHTTPï¼ˆå« HTTPSã€Cookieã€Sessionï¼‰ã€TCPã€UDPã€Socket è¿™äº›</p>
</blockquote>
<!-- TOC depthFrom:2 depthTo:3 -->
<ul>
<li><a href="#1-%E7%BB%BC%E5%90%88">1. ç»¼åˆ</a>
<ul>
<li><a href="#11-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A6%82%E4%BD%95%E5%88%86%E5%B1%82">1.1. è®¡ç®—æœºç½‘ç»œå¦‚ä½•åˆ†å±‚ï¼Ÿ</a></li>
</ul>
</li>
<li><a href="#2-http">2. HTTP</a></li>
<li><a href="#3-dns">3. DNS</a></li>
<li><a href="#4-tcpudp">4. TCP/UDP</a>
<ul>
<li><a href="#41-%E4%BB%80%E4%B9%88%E6%98%AF-tcp">4.1. ä»€ä¹ˆæ˜¯ TCPï¼Ÿ</a></li>
<li><a href="#42-tcp-%E7%9A%84%E7%89%B9%E6%80%A7%E6%98%AF%E4%BB%80%E4%B9%88">4.2. TCP çš„ç‰¹æ€§æ˜¯ä»€ä¹ˆï¼Ÿ</a></li>
<li><a href="#43-tcp-%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B">4.3. TCP ä¸‰æ¬¡æ¡æ‰‹</a></li>
<li><a href="#44-tcp-%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B">4.4. TCP å››æ¬¡æŒ¥æ‰‹</a></li>
<li><a href="#45-tcp-%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3">4.5. TCP æ»‘åŠ¨çª—å£</a></li>
<li><a href="#46-tcp-%E9%87%8D%E4%BC%A0%E6%9C%BA%E5%88%B6">4.6. TCP é‡ä¼ æœºåˆ¶</a></li>
</ul>
</li>
</ul>
<!-- /TOC -->
<h2 id="1-ç»¼åˆ"><a class="markdownIt-Anchor" href="#1-ç»¼åˆ"></a> 1. ç»¼åˆ</h2>
<h3 id="11-è®¡ç®—æœºç½‘ç»œå¦‚ä½•åˆ†å±‚"><a class="markdownIt-Anchor" href="#11-è®¡ç®—æœºç½‘ç»œå¦‚ä½•åˆ†å±‚"></a> 1.1. è®¡ç®—æœºç½‘ç»œå¦‚ä½•åˆ†å±‚ï¼Ÿ</h3>
<blockquote>
<p>â“ é—®é¢˜ï¼šè®¡ç®—æœºç½‘ç»œå¦‚ä½•åˆ†å±‚ï¼Ÿå„å±‚çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿå„å±‚çš„ä¸»è¦åè®®ã€è®¾å¤‡åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>è¿™æ˜¯å­¦ä¹ è®¡ç®—æœºç½‘ç»œçŸ¥è¯†å®è§‚å±‚é¢å¿…é¡»è¦äº†è§£çš„æ ¸å¿ƒç‚¹ã€‚çŸ¥é“äº†è¿™äº›ï¼Œå¯¹äºç½‘ç»œçš„ä½“ç³»ç»“æ„å°±åŸºæœ¬ä¸Šäº†è§£äº†ã€‚</p>
</blockquote>
<div align="center"><img src="http://dunwu.test.upcdn.net/cs/network/overview/network-layers.png!zp"/></div>
è®¡ç®—æœºç½‘ç»œåˆ†å±‚ä¸€èˆ¬æœ‰ä¸‰ç§åˆ’åˆ†ä½“ç³»ï¼šOSI åˆ†å±‚ï¼›äº”å±‚åè®®åˆ†å±‚ï¼›TCP/IP åè®®åˆ†å±‚ã€‚
<ul>
<li>OSI çš„ä¸ƒå±‚ä½“ç³»ç»“æ„æ¦‚å¿µæ¸…æ¥šï¼Œç†è®ºå®Œæ•´ï¼Œä½†æ˜¯æ¯”è¾ƒå¤æ‚ä¸”ä¸å®ç”¨ï¼Œæ‰€ä»¥å¹¶ä¸æµè¡Œã€‚</li>
<li>äº”å±‚åè®®åˆ†å±‚æ˜¯ä¸€ç§æŠ˜ä¸­æ–¹æ¡ˆï¼Œåœ¨ç°å®ä¸­æ›´ä¸ºæµè¡Œã€‚</li>
</ul>
<div align="center"><img src="http://dunwu.test.upcdn.net/cs/network/overview/ç½‘ç»œåˆ†å±‚æ¶æ„å›¾.png!zp"/></div>
**ç‰©ç†å±‚**
<blockquote>
<p>ç‰©ç†å±‚ï¼ˆPhysical Layerï¼‰åªæ¥æ”¶å’Œå‘é€ä¸€ä¸²æ¯”ç‰¹(bit)æµï¼Œä¸è€ƒè™‘ä¿¡æ¯çš„æ„ä¹‰å’Œä¿¡æ¯ç»“æ„ã€‚</p>
<p>æ‰©å±•é˜…è¯»ï¼š<a href="network-physical.md">è®¡ç®—æœºç½‘ç»œä¹‹ç‰©ç†å±‚</a></p>
</blockquote>
<ul>
<li>å…³é”®è¯ï¼šè°ƒåˆ¶ã€è§£è°ƒã€æ•°å­—ä¿¡å·ã€æ¨¡æ‹Ÿä¿¡å·ã€é€šä¿¡åª’ä»‹ã€ä¿¡é“å¤ç”¨</li>
<li>æ•°æ®å•å…ƒï¼šæ¯”ç‰¹æµã€‚</li>
<li>å…¸å‹è®¾å¤‡ï¼šå…‰çº¤ã€åŒè½´ç”µç¼†ã€åŒç»çº¿ã€ä¸­ç»§å™¨å’Œé›†çº¿å™¨ã€‚</li>
</ul>
<p><strong>æ•°æ®é“¾è·¯å±‚</strong></p>
<blockquote>
<p>ç½‘ç»œå±‚é’ˆå¯¹çš„è¿˜æ˜¯ä¸»æœºä¹‹é—´çš„æ•°æ®ä¼ è¾“æœåŠ¡ï¼Œè€Œä¸»æœºä¹‹é—´å¯ä»¥æœ‰å¾ˆå¤šé“¾è·¯ï¼Œæ•°æ®é“¾è·¯å±‚ï¼ˆData Link Layerï¼‰å°±æ˜¯ä¸ºåŒä¸€é“¾è·¯çš„ä¸»æœºæä¾›æ•°æ®ä¼ è¾“æœåŠ¡ã€‚æ•°æ®é“¾è·¯å±‚æŠŠç½‘ç»œå±‚ä¼ ä¸‹æ¥çš„åˆ†ç»„å°è£…æˆå¸§ã€‚</p>
<p>æ‰©å±•é˜…è¯»ï¼š<a href="network-data-link.md">è®¡ç®—æœºç½‘ç»œä¹‹æ•°æ®é“¾è·¯å±‚</a></p>
</blockquote>
<ul>
<li>å…³é”®è¯ï¼šç‚¹å¯¹ç‚¹ä¿¡é“ã€å¹¿æ’­ä¿¡é“ã€<code>PPP</code>ã€<code>CSMA/CD</code>ã€å±€åŸŸç½‘ã€ä»¥å¤ªç½‘ã€<code>MAC</code>ã€é€‚é…å™¨ã€é›†çº¿å™¨ã€ç½‘æ¡¥ã€äº¤æ¢æœº</li>
<li>ä¸»è¦åè®®ï¼š<code>PPP</code>ã€<code>CSMA/CD</code> ç­‰ã€‚</li>
<li>æ•°æ®å•å…ƒï¼šå¸§ï¼ˆframeï¼‰ã€‚</li>
<li>å…¸å‹è®¾å¤‡ï¼šäºŒå±‚äº¤æ¢æœºã€ç½‘æ¡¥ã€ç½‘å¡ã€‚</li>
</ul>
<p><strong>ç½‘ç»œå±‚</strong></p>
<blockquote>
<p>ç½‘ç»œå±‚ï¼ˆnetwork layerï¼‰ä¸ºåˆ†ç»„äº¤æ¢ç½‘ä¸Šçš„ä¸åŒä¸»æœºæä¾›é€šä¿¡æœåŠ¡ã€‚åœ¨å‘é€æ•°æ®æ—¶ï¼Œç½‘ç»œå±‚æŠŠè¿è¾“å±‚äº§ç”Ÿçš„æŠ¥æ–‡æ®µæˆ–ç”¨æˆ·æ•°æ®æŠ¥å°è£…æˆåˆ†ç»„æˆ–åŒ…è¿›è¡Œä¼ é€ã€‚</p>
<p>æ‰©å±•é˜…è¯»ï¼š<a href="network-network.md">è®¡ç®—æœºç½‘ç»œä¹‹ç½‘ç»œå±‚</a></p>
</blockquote>
<ul>
<li>å…³é”®è¯ï¼š<code>IP</code>ã€<code>ICMP</code>ã€<code>ARP</code>ã€è·¯ç”±</li>
<li>ä¸»è¦åè®®ï¼š<code>IP</code>ã€‚</li>
<li>æ•°æ®å•å…ƒï¼šIP æ•°æ®æŠ¥ï¼ˆpacketï¼‰ã€‚</li>
<li>å…¸å‹è®¾å¤‡ï¼šç½‘å…³ã€è·¯ç”±å™¨ã€‚</li>
</ul>
<p><strong>ä¼ è¾“å±‚</strong></p>
<blockquote>
<p>ä¼ è¾“å±‚ï¼ˆtransport layerï¼‰ä¸ºä¸¤å°ä¸»æœºä¸­è¿›ç¨‹é—´çš„é€šä¿¡æä¾›é€šç”¨çš„æ•°æ®ä¼ è¾“æœåŠ¡ã€‚</p>
<p>æ‰©å±•é˜…è¯»ï¼š<a href="network-network.md">è®¡ç®—æœºç½‘ç»œä¹‹ç½‘ç»œå±‚</a></p>
</blockquote>
<ul>
<li>å…³é”®è¯ï¼š<code>UDP</code>ã€<code>TCP</code>ã€æ»‘åŠ¨çª—å£ã€æ‹¥å¡æ§åˆ¶ã€ä¸‰æ¬¡æ¡æ‰‹</li>
<li>ä¸»è¦åè®®ï¼š<code>TCP</code>ã€<code>UDP</code>ã€‚</li>
<li>æ•°æ®å•å…ƒï¼šæŠ¥æ–‡æ®µï¼ˆsegmentï¼‰æˆ–ç”¨æˆ·æ•°æ®æŠ¥ã€‚</li>
</ul>
<p><sub>~**ä¼šè¯å±‚**~</sub></p>
<blockquote>
<p>~~ä¼šè¯å±‚ï¼ˆSession Layerï¼‰ä¸å‚ä¸å…·ä½“çš„ä¼ è¾“ï¼Œå®ƒæä¾›åŒ…æ‹¬è®¿é—®éªŒè¯å’Œä¼šè¯ç®¡ç†åœ¨å†…çš„å»ºç«‹å’Œç»´æŠ¤åº”ç”¨ä¹‹é—´é€šä¿¡çš„æœºåˆ¶ã€‚~~</p>
</blockquote>
<p><sub>~**è¡¨ç¤ºå±‚**~</sub></p>
<blockquote>
<p>~~è¡¨ç¤ºå±‚ï¼ˆPresentation Layerï¼‰æ˜¯ä¸ºåœ¨åº”ç”¨è¿‡ç¨‹ä¹‹é—´ä¼ é€çš„ä¿¡æ¯æä¾›è¡¨ç¤ºæ–¹æ³•çš„æœåŠ¡ï¼Œå®ƒå…³å¿ƒçš„åªæ˜¯å‘å‡ºä¿¡æ¯çš„è¯­æ³•ä¸è¯­ä¹‰ã€‚è¡¨ç¤ºå±‚è¦å®ŒæˆæŸäº›ç‰¹å®šçš„åŠŸèƒ½ï¼Œä¸»è¦æœ‰ä¸åŒæ•°æ®ç¼–ç æ ¼å¼çš„è½¬æ¢ï¼Œæä¾›æ•°æ®å‹ç¼©ã€è§£å‹ç¼©æœåŠ¡ï¼Œå¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ã€è§£å¯†ã€‚~~</p>
</blockquote>
<p><strong>åº”ç”¨å±‚</strong></p>
<blockquote>
<p>åº”ç”¨å±‚ï¼ˆapplication layerï¼‰é€šè¿‡åº”ç”¨è¿›ç¨‹é—´çš„äº¤äº’æ¥å®Œæˆç‰¹å®šç½‘ç»œåº”ç”¨ã€‚åº”ç”¨å±‚åè®®å®šä¹‰çš„æ˜¯åº”ç”¨è¿›ç¨‹é—´é€šä¿¡å’Œäº¤äº’çš„è§„åˆ™ã€‚</p>
<p>æ‰©å±•é˜…è¯»ï¼š<a href="network-application.md">è®¡ç®—æœºç½‘ç»œä¹‹åº”ç”¨å±‚</a></p>
</blockquote>
<ul>
<li>å…³é”®è¯ï¼š<code>HTTP</code>ã€<code>DNS</code>ã€<code>FTP</code>ã€<code>TELNET</code>ã€<code>DHCP</code></li>
<li>ä¸»è¦åè®®ï¼š<code>HTTP</code>ã€<code>DNS</code>ã€<code>SMTP</code>ã€<code>Telnet</code>ã€<code>FTP</code>ã€<code>SNMP</code> ç­‰ã€‚</li>
<li>æ•°æ®å•å…ƒï¼šæŠ¥æ–‡ï¼ˆmessageï¼‰ã€‚</li>
</ul>
<h2 id="2-http"><a class="markdownIt-Anchor" href="#2-http"></a> 2. HTTP</h2>
<blockquote>
<p>æ‰©å±•é˜…è¯»ï¼š<a href="http.md">è¶…æ–‡æœ¬ä¼ è¾“åè®® HTTP</a></p>
</blockquote>
<h2 id="3-dns"><a class="markdownIt-Anchor" href="#3-dns"></a> 3. DNS</h2>
<blockquote>
<p>æ‰©å±•é˜…è¯»ï¼š<a href="dns.md">åŸŸåç³»ç»Ÿ DNS</a></p>
</blockquote>
<h2 id="4-tcpudp"><a class="markdownIt-Anchor" href="#4-tcpudp"></a> 4. TCP/UDP</h2>
<blockquote>
<p>æ‰©å±•é˜…è¯»ï¼š<a href="tcp.md">ä¼ è¾“æ§åˆ¶åè®® TCP</a>ï¼Œ<a href="udp.md">ç”¨æˆ·æ•°æ®æŠ¥åè®® UDP</a></p>
</blockquote>
<h3 id="41-ä»€ä¹ˆæ˜¯-tcp"><a class="markdownIt-Anchor" href="#41-ä»€ä¹ˆæ˜¯-tcp"></a> 4.1. ä»€ä¹ˆæ˜¯ TCPï¼Ÿ</h3>
<p><strong>TCPï¼ˆTransmission Control Protocolï¼‰ï¼Œå³ä¼ è¾“æ§åˆ¶åè®®ï¼Œå®ƒæ˜¯ä¸€ç§<code>é¢å‘è¿æ¥çš„</code>ã€<code>å¯é çš„</code>ã€<code>åŸºäºå­—èŠ‚æµçš„</code>ä¼ è¾“å±‚é€šä¿¡åè®®</strong>ã€‚</p>
<h3 id="42-tcp-çš„ç‰¹æ€§æ˜¯ä»€ä¹ˆ"><a class="markdownIt-Anchor" href="#42-tcp-çš„ç‰¹æ€§æ˜¯ä»€ä¹ˆ"></a> 4.2. TCP çš„ç‰¹æ€§æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<ul>
<li><code>é¢å‘è¿æ¥çš„</code> - é¢å‘è¿æ¥æ˜¯æŒ‡ TCP éœ€è¦é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹åŸåˆ™å»ºç«‹å’Œæ–­å¼€åŒå‘è¿æ¥ã€‚</li>
<li><code>å¯é çš„</code> - å¯é æ˜¯æŒ‡ TCP ä¼ è¾“çš„æ•°æ®åŒ…ä¿è¯ä»¥åŸå§‹é¡ºåºåˆ°è¾¾ç›®çš„åœ°ï¼Œä¸”æ•°æ®åŒ…ä¸è¢«æŸåã€‚ä¸ºäº†å®ç°è¿™ç‚¹ï¼ŒTCP é€šè¿‡ä»¥ä¸‹æŠ€æœ¯æ¥ä¿è¯ï¼š
<ul>
<li>æ•°æ®åŒ…çš„åºåˆ—å·å’Œæ ¡éªŒç </li>
<li>ç¡®è®¤åŒ…å’Œè‡ªåŠ¨é‡ä¼ 
<ul>
<li>å¦‚æœå‘é€è€…æ²¡æœ‰æ”¶åˆ°æ­£ç¡®çš„å“åº”ï¼Œå®ƒå°†é‡æ–°å‘é€æ•°æ®åŒ…ã€‚å¦‚æœå¤šæ¬¡è¶…æ—¶ï¼Œè¿æ¥å°±ä¼šæ–­å¼€ã€‚</li>
<li>TCP å®è¡Œæµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶ã€‚è¿™äº›ç¡®ä¿æªæ–½ä¼šå¯¼è‡´å»¶è¿Ÿï¼Œè€Œä¸”é€šå¸¸å¯¼è‡´ä¼ è¾“æ•ˆç‡æ¯” UDP ä½ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><code>åŸºäºå­—èŠ‚æµçš„</code>
<ul>
<li>è™½ç„¶åº”ç”¨ç¨‹åºå’Œ TCP çš„äº¤äº’æ˜¯ä¸€æ¬¡ä¸€ä¸ªæ•°æ®å—ï¼ˆå¤§å°ä¸ç­‰ï¼‰ï¼Œä½† TCP æŠŠåº”ç”¨ç¨‹åºçœ‹æˆæ˜¯ä¸€è¿ä¸²çš„æ— ç»“æ„çš„å­—èŠ‚æµã€‚TCP æœ‰ä¸€ä¸ªç¼“å†²ï¼Œå½“åº”ç”¨ç¨‹åºä¼ é€çš„æ•°æ®å—å¤ªé•¿ï¼ŒTCP å°±å¯ä»¥æŠŠå®ƒåˆ’åˆ†çŸ­ä¸€äº›å†ä¼ é€ã€‚å¦‚æœåº”ç”¨ç¨‹åºä¸€æ¬¡åªå‘é€ä¸€ä¸ªå­—èŠ‚ï¼ŒTCP ä¹Ÿå¯ä»¥ç­‰å¾…ç§¯ç´¯æœ‰è¶³å¤Ÿå¤šçš„å­—èŠ‚åå†æ„æˆæŠ¥æ–‡æ®µå‘é€å‡ºå»ã€‚</li>
<li>åœ¨ TCP å»ºç«‹è¿æ¥å‰ä¸¤æ¬¡æ¡æ‰‹çš„ SYN æŠ¥æ–‡ä¸­é€‰é¡¹å­—æ®µçš„ MSS å€¼ï¼Œé€šä¿¡åŒæ–¹å•†å®šé€šä¿¡çš„æœ€å¤§æŠ¥æ–‡é•¿åº¦ã€‚å¦‚æœåº”ç”¨å±‚äº¤ä»˜ä¸‹æ¥çš„æ•°æ®è¿‡å¤§ï¼Œå°±ä¼šå¯¹æ•°æ®åˆ†æ®µï¼Œç„¶åå‘é€ï¼›å¦åˆ™é€šè¿‡æ»‘åŠ¨çª—å£æ¥æ§åˆ¶é€šä¿¡åŒå‘çš„æ•°æ®ã€‚</li>
</ul>
</li>
</ul>
<h3 id="43-tcp-ä¸‰æ¬¡æ¡æ‰‹"><a class="markdownIt-Anchor" href="#43-tcp-ä¸‰æ¬¡æ¡æ‰‹"></a> 4.3. TCP ä¸‰æ¬¡æ¡æ‰‹</h3>
<blockquote>
<p>â“ é—®é¢˜ï¼šä¸‰æ¬¡æ¡æ‰‹æœ‰ä»€ä¹ˆç”¨ï¼Ÿä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ</p>
</blockquote>
<p>ï¼ˆ1ï¼‰ä¸‰æ¬¡æ¡æ‰‹æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</p>
<ul>
<li>ä¸‰æ¬¡æ¡æ‰‹è´Ÿè´£å»ºç«‹ TCP åŒå‘è¿æ¥ã€‚</li>
</ul>
<p>ï¼ˆ2ï¼‰ä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ</p>
<div align="center"><img src="http://dunwu.test.upcdn.net/cs/network/transport/ä¸‰æ¬¡æ¡æ‰‹.gif!zp"/></div>
å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¸‰æ¬¡æ¡æ‰‹æµç¨‹å¦‚ä¸‹ï¼š
<ol>
<li>ç¬¬ä¸€æ¬¡æ¡æ‰‹ - å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€å¸¦æœ‰ SYN æ ‡å¿—çš„æ•°æ®åŒ…ã€‚</li>
<li>ç¬¬äºŒæ¬¡æ¡æ‰‹ - æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘é€å¸¦æœ‰ SYN/ACK æ ‡å¿—çš„æ•°æ®åŒ…ã€‚</li>
<li>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ - å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€å¸¦æœ‰å¸¦æœ‰ ACK æ ‡å¿—çš„æ•°æ®åŒ…ã€‚</li>
</ol>
<p>è‡³æ­¤ï¼ŒTCP ä¸‰æ¬¡æ¡æ‰‹å®Œæˆï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯å·²å»ºç«‹åŒå‘è¿æ¥ã€‚</p>
<blockquote>
<p>ğŸ’¡ è¯´æ˜ï¼šSYN ä¸º synchronize çš„ç¼©å†™ï¼ŒACK ä¸º acknowledgment çš„ç¼©å†™ã€‚</p>
</blockquote>
<p>ï¼ˆ3ï¼‰ä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ</p>
<p>ä¸ºäº†ä¾¿äºè¯´æ˜ï¼Œå‡è®¾å®¢æˆ·ç«¯ä¸º A, æœåŠ¡ç«¯ä¸º Bã€‚</p>
<ol>
<li>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼ŒA å‘ B å‘åŒæ­¥æ¶ˆæ¯ã€‚B æ”¶åˆ°æ¶ˆæ¯åï¼ŒB è®¤ä¸ºï¼šA å‘æ¶ˆæ¯æ²¡é—®é¢˜ï¼›B æ”¶æ¶ˆæ¯æ²¡é—®é¢˜ã€‚</li>
<li>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼ŒB å‘ A å‘åŒæ­¥æ¶ˆæ¯å’Œç¡®è®¤æ¶ˆæ¯ã€‚A æ”¶åˆ°æ¶ˆæ¯åï¼ŒA è®¤ä¸ºï¼šA å‘æ¶ˆæ¯ã€æ”¶æ¶ˆæ¯éƒ½æ²¡é—®é¢˜ï¼›B å‘æ¶ˆæ¯ã€æ”¶æ¶ˆæ¯éƒ½æ²¡é—®é¢˜ã€‚<strong>ä½†æ˜¯ï¼Œæ­¤æ—¶ B ä¸ç¡®å®šè‡ªå·±å‘æ¶ˆæ¯æ˜¯å¦æ²¡é—®é¢˜</strong>ï¼Œæ‰€ä»¥å°±éœ€è¦ç¬¬ä¸‰æ¬¡æ¡æ‰‹ã€‚</li>
<li>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼ŒA å‘ B å‘ç¡®è®¤æ¶ˆæ¯ã€‚B æ”¶åˆ°æ¶ˆæ¯åã€‚B è®¤ä¸ºï¼šB å‘æ¶ˆæ¯æ²¡é—®é¢˜ã€‚</li>
</ol>
<h3 id="44-tcp-å››æ¬¡æŒ¥æ‰‹"><a class="markdownIt-Anchor" href="#44-tcp-å››æ¬¡æŒ¥æ‰‹"></a> 4.4. TCP å››æ¬¡æŒ¥æ‰‹</h3>
<blockquote>
<p>â“ é—®é¢˜ï¼šå››æ¬¡æŒ¥æ‰‹æœ‰ä»€ä¹ˆç”¨ï¼Ÿä»€ä¹ˆæ˜¯å››æ¬¡æŒ¥æ‰‹ï¼Ÿä¸ºä»€ä¹ˆå»ºç«‹è¿æ¥æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­è¿æ¥ç¡®æ˜¯å››æ¬¡æŒ¥æ‰‹å‘¢ï¼Ÿ</p>
</blockquote>
<p>ï¼ˆ1ï¼‰å››æ¬¡æŒ¥æ‰‹æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</p>
<ul>
<li>å››æ¬¡æŒ¥æ‰‹è´Ÿè´£æ–­å¼€ TCP è¿æ¥ã€‚</li>
</ul>
<p>ï¼ˆ2ï¼‰ä»€ä¹ˆæ˜¯å››æ¬¡æŒ¥æ‰‹ï¼Ÿ</p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå››æ¬¡æŒ¥æ‰‹æµç¨‹å¦‚ä¸‹ï¼š</p>
<div align="center"><img src="http://dunwu.test.upcdn.net/cs/network/transport/å››æ¬¡æŒ¥æ‰‹.gif!zp"/></div>
1. ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ - å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€ä¸€ä¸ª FIN åŒ…ï¼Œç”¨æ¥å…³é—­å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯çš„æ•°æ®ä¼ é€ã€‚
2. ç¬¬äºŒæ¬¡æŒ¥æ‰‹ - æœåŠ¡ç«¯æ”¶åˆ°è¿™ä¸ª FIN åŒ…ï¼Œå‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ª ACK åŒ…ï¼Œç¡®è®¤åºå·ä¸ºæ”¶åˆ°çš„åºå·åŠ  1ã€‚å’Œ SYN ä¸€æ ·ï¼Œä¸€ä¸ª FIN å°†å ç”¨ä¸€ä¸ªåºå·ã€‚
3. ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ - æœåŠ¡ç«¯å…³é—­ä¸å®¢æˆ·ç«¯çš„è¿æ¥ï¼Œå‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ª FIN åŒ…ã€‚
4. ç¬¬å››æ¬¡æŒ¥æ‰‹ - å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€ ACK åŒ…ï¼Œå¹¶å°†ç¡®è®¤åºå·è®¾ç½®ä¸ºæ”¶åˆ°åºå·åŠ  1ã€‚
<p>ï¼ˆ3ï¼‰ä¸ºä»€ä¹ˆå»ºç«‹è¿æ¥æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­è¿æ¥ç¡®æ˜¯å››æ¬¡æŒ¥æ‰‹å‘¢ï¼Ÿ</p>
<ul>
<li>å»ºç«‹è¿æ¥çš„æ—¶å€™ï¼Œ æœåŠ¡å™¨åœ¨ LISTEN çŠ¶æ€ä¸‹ï¼Œæ”¶åˆ°å»ºç«‹è¿æ¥è¯·æ±‚çš„ SYN æŠ¥æ–‡åï¼ŒæŠŠ ACK å’Œ SYN æ”¾åœ¨ä¸€ä¸ªæŠ¥æ–‡é‡Œå‘é€ç»™å®¢æˆ·ç«¯ã€‚</li>
<li>è€Œå…³é—­è¿æ¥æ—¶ï¼ŒæœåŠ¡å™¨æ”¶åˆ°å¯¹æ–¹çš„ FIN æŠ¥æ–‡æ—¶ï¼Œä»…ä»…è¡¨ç¤ºå¯¹æ–¹ä¸å†å‘é€æ•°æ®äº†ä½†æ˜¯è¿˜èƒ½æ¥æ”¶æ•°æ®ï¼Œè€Œè‡ªå·±ä¹Ÿæœªå¿…å…¨éƒ¨æ•°æ®éƒ½å‘é€ç»™å¯¹æ–¹äº†ï¼Œæ‰€ä»¥å·±æ–¹å¯ä»¥ç«‹å³å…³é—­ï¼Œä¹Ÿå¯ä»¥å‘é€ä¸€äº›æ•°æ®ç»™å¯¹æ–¹åï¼Œå†å‘é€ FIN æŠ¥æ–‡ç»™å¯¹æ–¹æ¥è¡¨ç¤ºåŒæ„ç°åœ¨å…³é—­è¿æ¥ï¼Œå› æ­¤ï¼Œå·±æ–¹ ACK å’Œ FIN ä¸€èˆ¬éƒ½ä¼šåˆ†å¼€å‘é€ï¼Œä»è€Œå¯¼è‡´å¤šäº†ä¸€æ¬¡ã€‚</li>
</ul>
<h3 id="45-tcp-æ»‘åŠ¨çª—å£"><a class="markdownIt-Anchor" href="#45-tcp-æ»‘åŠ¨çª—å£"></a> 4.5. TCP æ»‘åŠ¨çª—å£</h3>
<blockquote>
<p>â“ é—®é¢˜ï¼šä»€ä¹ˆæ˜¯æ»‘åŠ¨çª—å£ï¼Ÿæ»‘åŠ¨çª—å£åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</p>
</blockquote>
<p>ä»€ä¹ˆæ˜¯æ»‘åŠ¨çª—å£ï¼Ÿ</p>
<p><strong>æ»‘åŠ¨çª—å£æ˜¯ TCP çš„ä¸€ç§æ§åˆ¶ç½‘ç»œæµé‡çš„æŠ€æœ¯ã€‚</strong></p>
<p><strong>TCP å¿…éœ€è¦è§£å†³çš„å¯é ä¼ è¾“ä»¥åŠåŒ…ä¹±åºï¼ˆreorderingï¼‰çš„é—®é¢˜</strong>ï¼Œæ‰€ä»¥ï¼ŒTCP å¿…éœ€è¦çŸ¥é“ç½‘ç»œå®é™…çš„æ•°æ®å¤„ç†å¸¦å®½æˆ–æ˜¯æ•°æ®å¤„ç†é€Ÿåº¦ï¼Œè¿™æ ·æ‰ä¸ä¼šå¼•èµ·ç½‘ç»œæ‹¥å¡ï¼Œå¯¼è‡´ä¸¢åŒ…ã€‚</p>
<p>TCP å¤´é‡Œæœ‰ä¸€ä¸ªå­—æ®µå« Windowï¼Œåˆå« Advertised-Windowï¼Œè¿™ä¸ªå­—æ®µæ˜¯æ¥æ”¶ç«¯å‘Šè¯‰å‘é€ç«¯è‡ªå·±è¿˜æœ‰å¤šå°‘ç¼“å†²åŒºå¯ä»¥æ¥æ”¶æ•°æ®ã€‚<strong>äºæ˜¯å‘é€ç«¯å°±å¯ä»¥æ ¹æ®è¿™ä¸ªæ¥æ”¶ç«¯çš„å¤„ç†èƒ½åŠ›æ¥å‘é€æ•°æ®ï¼Œè€Œä¸ä¼šå¯¼è‡´æ¥æ”¶ç«¯å¤„ç†ä¸è¿‡æ¥</strong>ã€‚</p>
<p>æ»‘åŠ¨çª—å£åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<div align="center"><img src="http://dunwu.test.upcdn.net/snap/1559265819762.png!zp"/></div>
1. å·²å‘é€å·²ç¡®è®¤ - æ•°æ®æµä¸­æœ€æ—©çš„å­—èŠ‚å·²ç»å‘é€å¹¶å¾—åˆ°ç¡®è®¤ã€‚è¿™äº›æ•°æ®æ˜¯ç«™åœ¨å‘é€ç«¯çš„è§’åº¦æ¥çœ‹çš„ã€‚ä¸Šå›¾ä¸­çš„ 31 ä¸ªå­—èŠ‚å·²ç»å‘é€å¹¶ç¡®è®¤ã€‚
2. å·²å‘é€ä½†å°šæœªç¡®è®¤ - å·²å‘é€ä½†å°šæœªå¾—åˆ°ç¡®è®¤çš„å­—èŠ‚ã€‚å‘é€æ–¹åœ¨ç¡®è®¤ä¹‹å‰ï¼Œä¸è®¤ä¸ºè¿™äº›æ•°æ®å·²ç»è¢«å¤„ç†ã€‚ä¸Šå›¾ä¸­çš„ 32 \~ 45 å­—èŠ‚ä¸ºç¬¬ 2 ç±»ã€‚
3. æœªå‘é€è€Œæ¥æ”¶æ–¹å·² Ready - è®¾å¤‡å°šæœªå°†æ•°æ®å‘å‡º ï¼Œä½†æ¥æ”¶æ–¹æ ¹æ®æœ€è¿‘ä¸€æ¬¡å…³äºå‘é€æ–¹ä¸€æ¬¡è¦å‘é€å¤šå°‘å­—èŠ‚ç¡®è®¤è‡ªå·±æœ‰è¶³å¤Ÿç©ºé—´ã€‚å‘é€æ–¹ä¼šç«‹å³å°è¯•å‘é€ã€‚ä¸Šå›¾ä¸­çš„ 46 \~ 51 å­—èŠ‚ä¸ºç¬¬ 3 ç±»ã€‚
4. æœªå‘é€è€Œæ¥æ”¶æ–¹ Not Ready - ç”±äºæ¥æ”¶æ–¹ not readyï¼Œè¿˜ä¸å…è®¸å°†è¿™éƒ¨åˆ†æ•°æ®å‘å‡ºã€‚ä¸Šå›¾ä¸­çš„ 52 ä»¥åçš„å­—èŠ‚ä¸ºç¬¬ 4 ç±»ã€‚
<div align="center"><img src="http://dunwu.test.upcdn.net/snap/1559265927658.png!zp"/></div>
è¿™å¼ å›¾ç‰‡ç›¸å¯¹äºä¸Šä¸€å¼ å›¾ç‰‡ï¼Œæ»‘åŠ¨çª—å£åç§»äº† 5 ä¸ªå­—èŠ‚ï¼Œæ„å‘³ç€æœ‰ 5 ä¸ªå·²å‘é€çš„å­—èŠ‚å¾—åˆ°äº†ç¡®è®¤ã€‚
<h3 id="46-tcp-é‡ä¼ æœºåˆ¶"><a class="markdownIt-Anchor" href="#46-tcp-é‡ä¼ æœºåˆ¶"></a> 4.6. TCP é‡ä¼ æœºåˆ¶</h3>
<blockquote>
<p>â“ é—®é¢˜ï¼šä¸ºä»€ä¹ˆéœ€è¦é‡ä¼ æœºåˆ¶ï¼ŸTCP æœ‰å“ªäº›é‡ä¼ æœºåˆ¶ï¼ŒåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</p>
</blockquote>
<p>TCP è¦ä¿è¯æ‰€æœ‰çš„æ•°æ®åŒ…éƒ½å¯ä»¥åˆ°è¾¾ï¼Œæ‰€ä»¥ï¼Œå¿…éœ€è¦æœ‰é‡ä¼ æœºåˆ¶ã€‚</p>
<p>TCP é‡ä¼ æœºåˆ¶ä¸»è¦æœ‰ä¸¤ç§ï¼š</p>
<ul>
<li>è¶…æ—¶é‡ä¼ æœºåˆ¶</li>
<li>å¿«é€Ÿé‡ä¼ æœºåˆ¶</li>
</ul>
<p>ï¼ˆ1ï¼‰è¶…æ—¶é‡ä¼ æœºåˆ¶</p>
<p>è¶…æ—¶é‡ä¼ æœºåˆ¶æ˜¯æŒ‡ï¼šå‘é€æ•°æ®åŒ…åœ¨ä¸€å®šçš„æ—¶é—´å‘¨æœŸå†…æ²¡æœ‰æ”¶åˆ°ç›¸åº”çš„ ACKï¼Œç­‰å¾…ä¸€å®šçš„æ—¶é—´ï¼Œè¶…æ—¶ä¹‹åå°±è®¤ä¸ºè¿™ä¸ªæ•°æ®åŒ…ä¸¢å¤±ï¼Œå°±ä¼šé‡æ–°å‘é€ã€‚è¿™ä¸ªç­‰å¾…æ—¶é—´è¢«ç§°ä¸º RTO(Retransmission TimeOut)ï¼Œå³é‡ä¼ è¶…æ—¶æ—¶é—´ã€‚</p>
<p>æ²¡æœ‰ç¡®è®¤çš„æ•°æ®åŒ…ä¸ä¼šä»çª—å£ä¸­ç§»èµ°ï¼Œå®šæ—¶å™¨åœ¨é‡ä¼ æ—¶é—´åˆ°æœŸå†…ï¼Œæ¯ä¸ªç‰‡æ®µçš„ä½ç½®ä¸å˜ã€‚</p>
<p>è¿™ç§æœºåˆ¶çš„é‡ç‚¹æ˜¯ RTO çš„è®¾ç½®ï¼š</p>
<ul>
<li>RTO è®¾é•¿äº†ï¼Œé‡å‘å°±æ…¢ï¼Œä¸¢äº†è€åŠå¤©æ‰é‡å‘ï¼Œæ²¡æœ‰æ•ˆç‡ï¼Œæ€§èƒ½å·®ï¼›</li>
<li>RTO è®¾çŸ­äº†ï¼Œä¼šå¯¼è‡´å¯èƒ½å¹¶æ²¡æœ‰ä¸¢å°±é‡å‘ã€‚äºæ˜¯é‡å‘çš„å°±å¿«ï¼Œä¼šå¢åŠ ç½‘ç»œæ‹¥å¡ï¼Œå¯¼è‡´æ›´å¤šçš„è¶…æ—¶ï¼Œæ›´å¤šçš„è¶…æ—¶å¯¼è‡´æ›´å¤šçš„é‡å‘</li>
</ul>
<p>ï¼ˆ2ï¼‰å¿«é€Ÿé‡ä¼ æœºåˆ¶</p>
<p>å¿«é€Ÿé‡ä¼ æœºåˆ¶ï¼Œå®ç°äº†å¦å¤–çš„ä¸€ç§ä¸¢åŒ…è¯„å®šæ ‡å‡†ï¼Œå³å¦‚æœè¿ç»­æ”¶åˆ° 3 æ¬¡é‡å¤ ACKï¼Œå‘é€æ–¹å°±è®¤ä¸ºè¿™ä¸ª seq çš„åŒ…ä¸¢å¤±äº†ï¼Œç«‹åˆ»è¿›è¡Œé‡ä¼ ã€‚</p>
<p>å½“æ¥æ”¶æ–¹æ”¶åˆ°ä¹±åºç‰‡æ®µæ—¶ï¼Œéœ€è¦é‡å¤å‘é€ ACKã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/blog/network/tcp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Zhang Peng">
      <meta itemprop="description" content="Dunwu's Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/network/tcp/" class="post-title-link" itemprop="url">ç½‘ç»œåè®®ä¹‹ TCP</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-05-31 11:51:00" itemprop="dateCreated datePublished" datetime="2019-05-31T11:51:00+08:00">2019-05-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-08-10 09:56:46" itemprop="dateModified" datetime="2020-08-10T09:56:46+08:00">2020-08-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index">
                    <span itemprop="name">ç½‘ç»œ</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/blog/network/tcp/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="network/tcp/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>3.1k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>3 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ç½‘ç»œåè®®ä¹‹-tcp"><a class="markdownIt-Anchor" href="#ç½‘ç»œåè®®ä¹‹-tcp"></a> ç½‘ç»œåè®®ä¹‹ TCP</h1>
<blockquote>
<p>ğŸ“¦ æœ¬æ–‡å·²å½’æ¡£åˆ°ï¼šã€Œ<a href="https://github.com/dunwu/blog" target="_blank" rel="noopener">blog</a>ã€</p>
</blockquote>
<!-- TOC depthFrom:2 depthTo:3 -->
<ul>
<li><a href="#%E7%AE%80%E4%BB%8B">ç®€ä»‹</a>
<ul>
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF-tcp">ä»€ä¹ˆæ˜¯ TCP</a></li>
<li><a href="#tcp-%E7%9A%84%E7%89%B9%E6%80%A7">TCP çš„ç‰¹æ€§</a></li>
<li><a href="#tcp-%E7%9A%84%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF">TCP çš„é€‚ç”¨åœºæ™¯</a></li>
<li><a href="#tcp-%E6%8A%A5%E6%96%87">TCP æŠ¥æ–‡</a></li>
</ul>
</li>
<li><a href="#tcp-%E9%80%9A%E4%BF%A1%E6%B5%81%E7%A8%8B">TCP é€šä¿¡æµç¨‹</a>
<ul>
<li><a href="#%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B">ä¸‰æ¬¡æ¡æ‰‹</a></li>
<li><a href="#%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B">å››æ¬¡æŒ¥æ‰‹</a></li>
</ul>
</li>
<li><a href="#%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3">æ»‘åŠ¨çª—å£</a></li>
<li><a href="#tcp-%E9%87%8D%E4%BC%A0%E6%9C%BA%E5%88%B6">TCP é‡ä¼ æœºåˆ¶</a>
<ul>
<li><a href="#%E8%B6%85%E6%97%B6%E9%87%8D%E4%BC%A0%E6%9C%BA%E5%88%B6">è¶…æ—¶é‡ä¼ æœºåˆ¶</a></li>
<li><a href="#%E5%BF%AB%E9%80%9F%E9%87%8D%E4%BC%A0%E6%9C%BA%E5%88%B6">å¿«é€Ÿé‡ä¼ æœºåˆ¶</a></li>
</ul>
</li>
<li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">å‚è€ƒèµ„æ–™</a></li>
</ul>
<!-- /TOC -->
<h2 id="ç®€ä»‹"><a class="markdownIt-Anchor" href="#ç®€ä»‹"></a> ç®€ä»‹</h2>
<h3 id="ä»€ä¹ˆæ˜¯-tcp"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯-tcp"></a> ä»€ä¹ˆæ˜¯ TCP</h3>
<p><strong>TCPï¼ˆTransmission Control Protocolï¼‰ï¼Œå³ä¼ è¾“æ§åˆ¶åè®®ï¼Œå®ƒæ˜¯ä¸€ç§<code>é¢å‘è¿æ¥çš„</code>ã€<code>å¯é çš„</code>ã€<code>åŸºäºå­—èŠ‚æµçš„</code>ä¼ è¾“å±‚é€šä¿¡åè®®</strong>ã€‚TCP ç”± RFC 793 å®šä¹‰ã€‚</p>
<div align="center"><img src="http://dunwu.test.upcdn.net/snap/1559263786555.png!zp"/></div>
<h3 id="tcp-çš„ç‰¹æ€§"><a class="markdownIt-Anchor" href="#tcp-çš„ç‰¹æ€§"></a> TCP çš„ç‰¹æ€§</h3>
<ul>
<li><code>é¢å‘è¿æ¥çš„</code> - é¢å‘è¿æ¥æ˜¯æŒ‡ TCP éœ€è¦é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹åŸåˆ™å»ºç«‹å’Œæ–­å¼€åŒå‘è¿æ¥ã€‚</li>
<li><code>å¯é çš„</code> - å¯é æ˜¯æŒ‡ TCP ä¼ è¾“çš„æ•°æ®åŒ…ä¿è¯ä»¥åŸå§‹é¡ºåºåˆ°è¾¾ç›®çš„åœ°ï¼Œä¸”æ•°æ®åŒ…ä¸è¢«æŸåã€‚ä¸ºäº†å®ç°è¿™ç‚¹ï¼ŒTCP é€šè¿‡ä»¥ä¸‹æŠ€æœ¯æ¥ä¿è¯ï¼š
<ul>
<li>æ•°æ®åŒ…çš„åºåˆ—å·å’Œæ ¡éªŒç </li>
<li>ç¡®è®¤åŒ…å’Œè‡ªåŠ¨é‡ä¼ 
<ul>
<li>å¦‚æœå‘é€è€…æ²¡æœ‰æ”¶åˆ°æ­£ç¡®çš„å“åº”ï¼Œå®ƒå°†é‡æ–°å‘é€æ•°æ®åŒ…ã€‚å¦‚æœå¤šæ¬¡è¶…æ—¶ï¼Œè¿æ¥å°±ä¼šæ–­å¼€ã€‚</li>
<li>TCP å®è¡Œæµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶ã€‚è¿™äº›ç¡®ä¿æªæ–½ä¼šå¯¼è‡´å»¶è¿Ÿï¼Œè€Œä¸”é€šå¸¸å¯¼è‡´ä¼ è¾“æ•ˆç‡æ¯” UDP ä½ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><code>åŸºäºå­—èŠ‚æµçš„</code>
<ul>
<li>è™½ç„¶åº”ç”¨ç¨‹åºå’Œ TCP çš„äº¤äº’æ˜¯ä¸€æ¬¡ä¸€ä¸ªæ•°æ®å—ï¼ˆå¤§å°ä¸ç­‰ï¼‰ï¼Œä½† TCP æŠŠåº”ç”¨ç¨‹åºçœ‹æˆæ˜¯ä¸€è¿ä¸²çš„æ— ç»“æ„çš„å­—èŠ‚æµã€‚TCP æœ‰ä¸€ä¸ªç¼“å†²ï¼Œå½“åº”ç”¨ç¨‹åºä¼ é€çš„æ•°æ®å—å¤ªé•¿ï¼ŒTCP å°±å¯ä»¥æŠŠå®ƒåˆ’åˆ†çŸ­ä¸€äº›å†ä¼ é€ã€‚å¦‚æœåº”ç”¨ç¨‹åºä¸€æ¬¡åªå‘é€ä¸€ä¸ªå­—èŠ‚ï¼ŒTCP ä¹Ÿå¯ä»¥ç­‰å¾…ç§¯ç´¯æœ‰è¶³å¤Ÿå¤šçš„å­—èŠ‚åå†æ„æˆæŠ¥æ–‡æ®µå‘é€å‡ºå»ã€‚</li>
<li>åœ¨ TCP å»ºç«‹è¿æ¥å‰ä¸¤æ¬¡æ¡æ‰‹çš„ SYN æŠ¥æ–‡ä¸­é€‰é¡¹å­—æ®µçš„ MSS å€¼ï¼Œé€šä¿¡åŒæ–¹å•†å®šé€šä¿¡çš„æœ€å¤§æŠ¥æ–‡é•¿åº¦ã€‚å¦‚æœåº”ç”¨å±‚äº¤ä»˜ä¸‹æ¥çš„æ•°æ®è¿‡å¤§ï¼Œå°±ä¼šå¯¹æ•°æ®åˆ†æ®µï¼Œç„¶åå‘é€ï¼›å¦åˆ™é€šè¿‡æ»‘åŠ¨çª—å£æ¥æ§åˆ¶é€šä¿¡åŒå‘çš„æ•°æ®ã€‚</li>
</ul>
</li>
</ul>
<h3 id="tcp-çš„é€‚ç”¨åœºæ™¯"><a class="markdownIt-Anchor" href="#tcp-çš„é€‚ç”¨åœºæ™¯"></a> TCP çš„é€‚ç”¨åœºæ™¯</h3>
<p>åŸºäºä»¥ä¸Šç‰¹æ€§ï¼Œä¸ºäº†ç¡®ä¿é«˜ååé‡ï¼ŒWeb æœåŠ¡å™¨å¯ä»¥ä¿æŒå¤§é‡çš„ TCP è¿æ¥ï¼Œä»è€Œå¯¼è‡´é«˜å†…å­˜ä½¿ç”¨ã€‚ä½†è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ Web æœåŠ¡å™¨çº¿ç¨‹é—´æ‹¥æœ‰å¤§é‡å¼€æ”¾è¿æ¥å¯èƒ½å¼€é”€å·¨å¤§ï¼Œæ¶ˆè€—èµ„æºè¿‡å¤šï¼Œè¿™æ—¶å¯ä»¥è€ƒè™‘åœ¨é€‚ç”¨æƒ…å†µä¸‹åˆ‡æ¢åˆ° UDPã€‚</p>
<p>TCP å¯¹äºéœ€è¦é«˜å¯é æ€§ä½†æ—¶é—´ç´§è¿«çš„åº”ç”¨ç¨‹åºå¾ˆæœ‰ç”¨ã€‚æ¯”å¦‚åŒ…æ‹¬ Web æœåŠ¡å™¨ï¼Œæ•°æ®åº“ä¿¡æ¯ï¼ŒSMTPï¼ŒFTP å’Œ SSHã€‚</p>
<p>ä»¥ä¸‹æƒ…å†µä½¿ç”¨ TCP ä»£æ›¿ UDPï¼š</p>
<ul>
<li>ä½ éœ€è¦æ•°æ®å®Œå¥½æ— æŸã€‚</li>
<li>ä½ æƒ³å¯¹ç½‘ç»œååé‡è‡ªåŠ¨è¿›è¡Œæœ€ä½³è¯„ä¼°ã€‚</li>
</ul>
<h3 id="tcp-æŠ¥æ–‡"><a class="markdownIt-Anchor" href="#tcp-æŠ¥æ–‡"></a> TCP æŠ¥æ–‡</h3>
<div align="center"><img src="http://dunwu.test.upcdn.net/snap/1559264511812.png!zp"/></div>
<p>æŠ¥æ–‡å­—æ®µä¸ä¸€ä¸€é˜è¿°ï¼Œé‡ç‚¹å…³æ³¨ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li>TCP çš„åŒ…æ˜¯æ²¡æœ‰ IP åœ°å€çš„ï¼Œé‚£æ˜¯ IP å±‚ä¸Šçš„äº‹ã€‚ä½†æ˜¯æœ‰æºç«¯å£å’Œç›®æ ‡ç«¯å£ã€‚</li>
<li>ä¸€ä¸ª TCP è¿æ¥éœ€è¦å››ä¸ªå…ƒç»„æ¥è¡¨ç¤ºæ˜¯åŒä¸€ä¸ªè¿æ¥ï¼ˆsrc_ip, src_port, dst_ip, dst_portï¼‰å‡†ç¡®è¯´æ˜¯äº”å…ƒç»„ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯åè®®ã€‚ä½†å› ä¸ºè¿™é‡Œåªæ˜¯è¯´ TCP åè®®ï¼Œæ‰€ä»¥ï¼Œè¿™é‡Œæˆ‘åªè¯´å››å…ƒç»„ã€‚</li>
<li>æ³¨æ„ä¸Šå›¾ä¸­çš„å››ä¸ªéå¸¸é‡è¦çš„ä¸œè¥¿ï¼š
<ul>
<li><strong>Sequence Number</strong>æ˜¯åŒ…çš„åºå·ï¼Œ<strong>ç”¨æ¥è§£å†³ç½‘ç»œåŒ…ä¹±åºï¼ˆreorderingï¼‰é—®é¢˜ã€‚</strong></li>
<li><strong>Acknowledgement Number</strong>å°±æ˜¯ ACKâ€”â€”ç”¨äºç¡®è®¤æ”¶åˆ°ï¼Œ<strong>ç”¨æ¥è§£å†³ä¸ä¸¢åŒ…çš„é—®é¢˜</strong>ã€‚</li>
<li><strong>Window åˆå« Advertised-Window</strong>ï¼Œä¹Ÿå°±æ˜¯è‘—åçš„æ»‘åŠ¨çª—å£ï¼ˆSliding Windowï¼‰ï¼Œ<strong>ç”¨äºè§£å†³æµæ§çš„</strong>ã€‚</li>
<li><strong>TCP Flag</strong>ï¼Œä¹Ÿå°±æ˜¯åŒ…çš„ç±»å‹ï¼Œ<strong>ä¸»è¦æ˜¯ç”¨äºæ“æ§ TCP çš„çŠ¶æ€æœºçš„</strong>ã€‚</li>
</ul>
</li>
</ul>
<div align="center"><img src="http://dunwu.test.upcdn.net/snap/1559264593860.png!zp"/></div>
<h2 id="tcp-é€šä¿¡æµç¨‹"><a class="markdownIt-Anchor" href="#tcp-é€šä¿¡æµç¨‹"></a> TCP é€šä¿¡æµç¨‹</h2>
<div align="center"><img src="http://dunwu.test.upcdn.net/snap/1559264679371.png!zp"/></div>
<p>TCP å®Œæ•´çš„é€šä¿¡åˆ†ä¸ºä¸‰å—ï¼š</p>
<ol>
<li>ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥</li>
<li>æ•°æ®ä¼ è¾“</li>
<li>å››æ¬¡æŒ¥æ‰‹ç«¯å£è¿æ¥</li>
</ol>
<h3 id="ä¸‰æ¬¡æ¡æ‰‹"><a class="markdownIt-Anchor" href="#ä¸‰æ¬¡æ¡æ‰‹"></a> ä¸‰æ¬¡æ¡æ‰‹</h3>
<p>ï¼ˆ1ï¼‰ä¸‰æ¬¡æ¡æ‰‹æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</p>
<ul>
<li>ä¸‰æ¬¡æ¡æ‰‹è´Ÿè´£å»ºç«‹ TCP åŒå‘è¿æ¥ã€‚</li>
</ul>
<p>ï¼ˆ2ï¼‰ä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ</p>
<div align="center"><img src="http://dunwu.test.upcdn.net/cs/network/transport/ä¸‰æ¬¡æ¡æ‰‹.gif!zp"/></div>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¸‰æ¬¡æ¡æ‰‹æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>ç¬¬ä¸€æ¬¡æ¡æ‰‹ - å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€å¸¦æœ‰ SYN æ ‡å¿—çš„æ•°æ®åŒ…ã€‚</li>
<li>ç¬¬äºŒæ¬¡æ¡æ‰‹ - æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘é€å¸¦æœ‰ SYN/ACK æ ‡å¿—çš„æ•°æ®åŒ…ã€‚</li>
<li>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ - å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€å¸¦æœ‰å¸¦æœ‰ ACK æ ‡å¿—çš„æ•°æ®åŒ…ã€‚</li>
</ol>
<p>è‡³æ­¤ï¼ŒTCP ä¸‰æ¬¡æ¡æ‰‹å®Œæˆï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯å·²å»ºç«‹åŒå‘è¿æ¥ã€‚</p>
<blockquote>
<p>ğŸ’¡ è¯´æ˜ï¼šSYN ä¸º synchronize çš„ç¼©å†™ï¼ŒACK ä¸º acknowledgment çš„ç¼©å†™ã€‚</p>
</blockquote>
<p>ï¼ˆ3ï¼‰ä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ</p>
<p>ä¸ºäº†ä¾¿äºè¯´æ˜ï¼Œå‡è®¾å®¢æˆ·ç«¯ä¸º A, æœåŠ¡ç«¯ä¸º Bã€‚</p>
<ol>
<li>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼ŒA å‘ B å‘åŒæ­¥æ¶ˆæ¯ã€‚B æ”¶åˆ°æ¶ˆæ¯åï¼ŒB è®¤ä¸ºï¼šA å‘æ¶ˆæ¯æ²¡é—®é¢˜ï¼›B æ”¶æ¶ˆæ¯æ²¡é—®é¢˜ã€‚</li>
<li>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼ŒB å‘ A å‘åŒæ­¥æ¶ˆæ¯å’Œç¡®è®¤æ¶ˆæ¯ã€‚A æ”¶åˆ°æ¶ˆæ¯åï¼ŒA è®¤ä¸ºï¼šA å‘æ¶ˆæ¯ã€æ”¶æ¶ˆæ¯éƒ½æ²¡é—®é¢˜ï¼›B å‘æ¶ˆæ¯ã€æ”¶æ¶ˆæ¯éƒ½æ²¡é—®é¢˜ã€‚<strong>ä½†æ˜¯ï¼Œæ­¤æ—¶ B ä¸ç¡®å®šè‡ªå·±å‘æ¶ˆæ¯æ˜¯å¦æ²¡é—®é¢˜</strong>ï¼Œæ‰€ä»¥å°±éœ€è¦ç¬¬ä¸‰æ¬¡æ¡æ‰‹ã€‚</li>
<li>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼ŒA å‘ B å‘ç¡®è®¤æ¶ˆæ¯ã€‚B æ”¶åˆ°æ¶ˆæ¯åã€‚B è®¤ä¸ºï¼šB å‘æ¶ˆæ¯æ²¡é—®é¢˜ã€‚</li>
</ol>
<h3 id="å››æ¬¡æŒ¥æ‰‹"><a class="markdownIt-Anchor" href="#å››æ¬¡æŒ¥æ‰‹"></a> å››æ¬¡æŒ¥æ‰‹</h3>
<p>ï¼ˆ1ï¼‰å››æ¬¡æŒ¥æ‰‹æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</p>
<ul>
<li>å››æ¬¡æŒ¥æ‰‹è´Ÿè´£æ–­å¼€ TCP è¿æ¥ã€‚</li>
</ul>
<p>ï¼ˆ2ï¼‰ä»€ä¹ˆæ˜¯å››æ¬¡æŒ¥æ‰‹ï¼Ÿ</p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå››æ¬¡æŒ¥æ‰‹æµç¨‹å¦‚ä¸‹ï¼š</p>
<div align="center"><img src="http://dunwu.test.upcdn.net/cs/network/transport/å››æ¬¡æŒ¥æ‰‹.gif!zp"/></div>
<ol>
<li>ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ - å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€ä¸€ä¸ª FIN åŒ…ï¼Œç”¨æ¥å…³é—­å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯çš„æ•°æ®ä¼ é€ã€‚</li>
<li>ç¬¬äºŒæ¬¡æŒ¥æ‰‹ - æœåŠ¡ç«¯æ”¶åˆ°è¿™ä¸ª FIN åŒ…ï¼Œå‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ª ACK åŒ…ï¼Œç¡®è®¤åºå·ä¸ºæ”¶åˆ°çš„åºå·åŠ  1ã€‚å’Œ SYN ä¸€æ ·ï¼Œä¸€ä¸ª FIN å°†å ç”¨ä¸€ä¸ªåºå·ã€‚</li>
<li>ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ - æœåŠ¡ç«¯å…³é—­ä¸å®¢æˆ·ç«¯çš„è¿æ¥ï¼Œå‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ª FIN åŒ…ã€‚</li>
<li>ç¬¬å››æ¬¡æŒ¥æ‰‹ - å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€ ACK åŒ…ï¼Œå¹¶å°†ç¡®è®¤åºå·è®¾ç½®ä¸ºæ”¶åˆ°åºå·åŠ  1ã€‚</li>
</ol>
<p>ï¼ˆ3ï¼‰ä¸ºä»€ä¹ˆå»ºç«‹è¿æ¥æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­è¿æ¥ç¡®æ˜¯å››æ¬¡æŒ¥æ‰‹å‘¢ï¼Ÿ</p>
<ul>
<li>å»ºç«‹è¿æ¥çš„æ—¶å€™ï¼Œ æœåŠ¡å™¨åœ¨ LISTEN çŠ¶æ€ä¸‹ï¼Œæ”¶åˆ°å»ºç«‹è¿æ¥è¯·æ±‚çš„ SYN æŠ¥æ–‡åï¼ŒæŠŠ ACK å’Œ SYN æ”¾åœ¨ä¸€ä¸ªæŠ¥æ–‡é‡Œå‘é€ç»™å®¢æˆ·ç«¯ã€‚</li>
<li>è€Œå…³é—­è¿æ¥æ—¶ï¼ŒæœåŠ¡å™¨æ”¶åˆ°å¯¹æ–¹çš„ FIN æŠ¥æ–‡æ—¶ï¼Œä»…ä»…è¡¨ç¤ºå¯¹æ–¹ä¸å†å‘é€æ•°æ®äº†ä½†æ˜¯è¿˜èƒ½æ¥æ”¶æ•°æ®ï¼Œè€Œè‡ªå·±ä¹Ÿæœªå¿…å…¨éƒ¨æ•°æ®éƒ½å‘é€ç»™å¯¹æ–¹äº†ï¼Œæ‰€ä»¥å·±æ–¹å¯ä»¥ç«‹å³å…³é—­ï¼Œä¹Ÿå¯ä»¥å‘é€ä¸€äº›æ•°æ®ç»™å¯¹æ–¹åï¼Œå†å‘é€ FIN æŠ¥æ–‡ç»™å¯¹æ–¹æ¥è¡¨ç¤ºåŒæ„ç°åœ¨å…³é—­è¿æ¥ï¼Œå› æ­¤ï¼Œå·±æ–¹ ACK å’Œ FIN ä¸€èˆ¬éƒ½ä¼šåˆ†å¼€å‘é€ï¼Œä»è€Œå¯¼è‡´å¤šäº†ä¸€æ¬¡ã€‚</li>
</ul>
<h2 id="æ»‘åŠ¨çª—å£"><a class="markdownIt-Anchor" href="#æ»‘åŠ¨çª—å£"></a> æ»‘åŠ¨çª—å£</h2>
<p>ä»€ä¹ˆæ˜¯æ»‘åŠ¨çª—å£ï¼Ÿ</p>
<p><strong>æ»‘åŠ¨çª—å£æ˜¯ TCP çš„ä¸€ç§æ§åˆ¶ç½‘ç»œæµé‡çš„æŠ€æœ¯ã€‚</strong></p>
<p><strong>TCP å¿…éœ€è¦è§£å†³çš„å¯é ä¼ è¾“ä»¥åŠåŒ…ä¹±åºï¼ˆreorderingï¼‰çš„é—®é¢˜</strong>ï¼Œæ‰€ä»¥ï¼ŒTCP å¿…éœ€è¦çŸ¥é“ç½‘ç»œå®é™…çš„æ•°æ®å¤„ç†å¸¦å®½æˆ–æ˜¯æ•°æ®å¤„ç†é€Ÿåº¦ï¼Œè¿™æ ·æ‰ä¸ä¼šå¼•èµ·ç½‘ç»œæ‹¥å¡ï¼Œå¯¼è‡´ä¸¢åŒ…ã€‚</p>
<p>TCP å¤´é‡Œæœ‰ä¸€ä¸ªå­—æ®µå« Windowï¼Œåˆå« Advertised-Windowï¼Œè¿™ä¸ªå­—æ®µæ˜¯æ¥æ”¶ç«¯å‘Šè¯‰å‘é€ç«¯è‡ªå·±è¿˜æœ‰å¤šå°‘ç¼“å†²åŒºå¯ä»¥æ¥æ”¶æ•°æ®ã€‚<strong>äºæ˜¯å‘é€ç«¯å°±å¯ä»¥æ ¹æ®è¿™ä¸ªæ¥æ”¶ç«¯çš„å¤„ç†èƒ½åŠ›æ¥å‘é€æ•°æ®ï¼Œè€Œä¸ä¼šå¯¼è‡´æ¥æ”¶ç«¯å¤„ç†ä¸è¿‡æ¥</strong>ã€‚</p>
<p>æ»‘åŠ¨çª—å£åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<div align="center"><img src="http://dunwu.test.upcdn.net/snap/1559265819762.png!zp"/></div>
<ol>
<li>å·²å‘é€å·²ç¡®è®¤ - æ•°æ®æµä¸­æœ€æ—©çš„å­—èŠ‚å·²ç»å‘é€å¹¶å¾—åˆ°ç¡®è®¤ã€‚è¿™äº›æ•°æ®æ˜¯ç«™åœ¨å‘é€ç«¯çš„è§’åº¦æ¥çœ‹çš„ã€‚ä¸Šå›¾ä¸­çš„ 31 ä¸ªå­—èŠ‚å·²ç»å‘é€å¹¶ç¡®è®¤ã€‚</li>
<li>å·²å‘é€ä½†å°šæœªç¡®è®¤ - å·²å‘é€ä½†å°šæœªå¾—åˆ°ç¡®è®¤çš„å­—èŠ‚ã€‚å‘é€æ–¹åœ¨ç¡®è®¤ä¹‹å‰ï¼Œä¸è®¤ä¸ºè¿™äº›æ•°æ®å·²ç»è¢«å¤„ç†ã€‚ä¸Šå›¾ä¸­çš„ 32 ~ 45 å­—èŠ‚ä¸ºç¬¬ 2 ç±»ã€‚</li>
<li>æœªå‘é€è€Œæ¥æ”¶æ–¹å·² Ready - è®¾å¤‡å°šæœªå°†æ•°æ®å‘å‡º ï¼Œä½†æ¥æ”¶æ–¹æ ¹æ®æœ€è¿‘ä¸€æ¬¡å…³äºå‘é€æ–¹ä¸€æ¬¡è¦å‘é€å¤šå°‘å­—èŠ‚ç¡®è®¤è‡ªå·±æœ‰è¶³å¤Ÿç©ºé—´ã€‚å‘é€æ–¹ä¼šç«‹å³å°è¯•å‘é€ã€‚ä¸Šå›¾ä¸­çš„ 46 ~ 51 å­—èŠ‚ä¸ºç¬¬ 3 ç±»ã€‚</li>
<li>æœªå‘é€è€Œæ¥æ”¶æ–¹ Not Ready - ç”±äºæ¥æ”¶æ–¹ not readyï¼Œè¿˜ä¸å…è®¸å°†è¿™éƒ¨åˆ†æ•°æ®å‘å‡ºã€‚ä¸Šå›¾ä¸­çš„ 52 ä»¥åçš„å­—èŠ‚ä¸ºç¬¬ 4 ç±»ã€‚</li>
</ol>
<div align="center"><img src="http://dunwu.test.upcdn.net/snap/1559265927658.png!zp"/></div>
<p>è¿™å¼ å›¾ç‰‡ç›¸å¯¹äºä¸Šä¸€å¼ å›¾ç‰‡ï¼Œæ»‘åŠ¨çª—å£åç§»äº† 5 ä¸ªå­—èŠ‚ï¼Œæ„å‘³ç€æœ‰ 5 ä¸ªå·²å‘é€çš„å­—èŠ‚å¾—åˆ°äº†ç¡®è®¤ã€‚</p>
<h2 id="tcp-é‡ä¼ æœºåˆ¶"><a class="markdownIt-Anchor" href="#tcp-é‡ä¼ æœºåˆ¶"></a> TCP é‡ä¼ æœºåˆ¶</h2>
<p>TCP è¦ä¿è¯æ‰€æœ‰çš„æ•°æ®åŒ…éƒ½å¯ä»¥åˆ°è¾¾ï¼Œæ‰€ä»¥ï¼Œå¿…éœ€è¦æœ‰é‡ä¼ æœºåˆ¶ã€‚</p>
<p>TCP é‡ä¼ æœºåˆ¶ä¸»è¦æœ‰ä¸¤ç§ï¼š</p>
<ul>
<li>è¶…æ—¶é‡ä¼ æœºåˆ¶</li>
<li>å¿«é€Ÿé‡ä¼ æœºåˆ¶</li>
</ul>
<h3 id="è¶…æ—¶é‡ä¼ æœºåˆ¶"><a class="markdownIt-Anchor" href="#è¶…æ—¶é‡ä¼ æœºåˆ¶"></a> è¶…æ—¶é‡ä¼ æœºåˆ¶</h3>
<p>è¶…æ—¶é‡ä¼ æœºåˆ¶æ˜¯æŒ‡ï¼šå‘é€æ•°æ®åŒ…åœ¨ä¸€å®šçš„æ—¶é—´å‘¨æœŸå†…æ²¡æœ‰æ”¶åˆ°ç›¸åº”çš„ ACKï¼Œç­‰å¾…ä¸€å®šçš„æ—¶é—´ï¼Œè¶…æ—¶ä¹‹åå°±è®¤ä¸ºè¿™ä¸ªæ•°æ®åŒ…ä¸¢å¤±ï¼Œå°±ä¼šé‡æ–°å‘é€ã€‚è¿™ä¸ªç­‰å¾…æ—¶é—´è¢«ç§°ä¸º RTO(Retransmission TimeOut)ï¼Œå³é‡ä¼ è¶…æ—¶æ—¶é—´ã€‚</p>
<p>æ²¡æœ‰ç¡®è®¤çš„æ•°æ®åŒ…ä¸ä¼šä»çª—å£ä¸­ç§»èµ°ï¼Œå®šæ—¶å™¨åœ¨é‡ä¼ æ—¶é—´åˆ°æœŸå†…ï¼Œæ¯ä¸ªç‰‡æ®µçš„ä½ç½®ä¸å˜ã€‚</p>
<p>è¿™ç§æœºåˆ¶çš„é‡ç‚¹æ˜¯ RTO çš„è®¾ç½®ï¼š</p>
<ul>
<li>RTO è®¾é•¿äº†ï¼Œé‡å‘å°±æ…¢ï¼Œä¸¢äº†è€åŠå¤©æ‰é‡å‘ï¼Œæ²¡æœ‰æ•ˆç‡ï¼Œæ€§èƒ½å·®ï¼›</li>
<li>RTO è®¾çŸ­äº†ï¼Œä¼šå¯¼è‡´å¯èƒ½å¹¶æ²¡æœ‰ä¸¢å°±é‡å‘ã€‚äºæ˜¯é‡å‘çš„å°±å¿«ï¼Œä¼šå¢åŠ ç½‘ç»œæ‹¥å¡ï¼Œå¯¼è‡´æ›´å¤šçš„è¶…æ—¶ï¼Œæ›´å¤šçš„è¶…æ—¶å¯¼è‡´æ›´å¤šçš„é‡å‘</li>
</ul>
<h3 id="å¿«é€Ÿé‡ä¼ æœºåˆ¶"><a class="markdownIt-Anchor" href="#å¿«é€Ÿé‡ä¼ æœºåˆ¶"></a> å¿«é€Ÿé‡ä¼ æœºåˆ¶</h3>
<p>å¿«é€Ÿé‡ä¼ æœºåˆ¶ï¼Œå®ç°äº†å¦å¤–çš„ä¸€ç§ä¸¢åŒ…è¯„å®šæ ‡å‡†ï¼Œå³å¦‚æœè¿ç»­æ”¶åˆ° 3 æ¬¡é‡å¤ ACKï¼Œå‘é€æ–¹å°±è®¤ä¸ºè¿™ä¸ª seq çš„åŒ…ä¸¢å¤±äº†ï¼Œç«‹åˆ»è¿›è¡Œé‡ä¼ ã€‚</p>
<p>å½“æ¥æ”¶æ–¹æ”¶åˆ°ä¹±åºç‰‡æ®µæ—¶ï¼Œéœ€è¦é‡å¤å‘é€ ACKã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™"><a class="markdownIt-Anchor" href="#å‚è€ƒèµ„æ–™"></a> å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://coolshell.cn/articles/11564.html" target="_blank" rel="noopener">TCP çš„é‚£äº›äº‹å„¿ï¼ˆä¸Šï¼‰</a></li>
<li><a href="https://coolshell.cn/articles/11609.html" target="_blank" rel="noopener">TCP çš„é‚£äº›äº‹å„¿ï¼ˆä¸‹ï¼‰</a></li>
<li><a href="https://juejin.im/post/5a7835a46fb9a063606eb801" target="_blank" rel="noopener">å›¾è§£ TCP ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡åˆ†æ‰‹</a></li>
<li><a href="https://blog.csdn.net/qzcsu/article/details/72861891" target="_blank" rel="noopener">TCP çš„ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹ï¼ˆè¯¦è§£+åŠ¨å›¾ï¼‰</a></li>
<li><a href="https://blog.csdn.net/sinat_36629696/article/details/80740678" target="_blank" rel="noopener">TCP è¯¦è§£</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/blog/network/udp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Zhang Peng">
      <meta itemprop="description" content="Dunwu's Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/network/udp/" class="post-title-link" itemprop="url">ç½‘ç»œåè®®ä¹‹ UDP</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-05-31 11:51:00" itemprop="dateCreated datePublished" datetime="2019-05-31T11:51:00+08:00">2019-05-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-08-10 09:56:46" itemprop="dateModified" datetime="2020-08-10T09:56:46+08:00">2020-08-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index">
                    <span itemprop="name">ç½‘ç»œ</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/blog/network/udp/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="network/udp/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>762</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ç½‘ç»œåè®®ä¹‹-udp"><a class="markdownIt-Anchor" href="#ç½‘ç»œåè®®ä¹‹-udp"></a> ç½‘ç»œåè®®ä¹‹ UDP</h1>
<blockquote>
<p>ğŸ“¦ æœ¬æ–‡å·²å½’æ¡£åˆ°ï¼šã€Œ<a href="https://github.com/dunwu/blog" target="_blank" rel="noopener">blog</a>ã€</p>
</blockquote>
<!-- TOC depthFrom:2 depthTo:3 -->
<ul>
<li><a href="#%E7%AE%80%E4%BB%8B">ç®€ä»‹</a>
<ul>
<li><a href="#udp-%E7%89%B9%E7%82%B9">UDP ç‰¹ç‚¹</a></li>
<li><a href="#udp-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">UDP åº”ç”¨åœºæ™¯</a></li>
</ul>
</li>
<li><a href="#udp-%E6%8A%A5%E6%96%87">UDP æŠ¥æ–‡</a></li>
</ul>
<!-- /TOC -->
<h2 id="ç®€ä»‹"><a class="markdownIt-Anchor" href="#ç®€ä»‹"></a> ç®€ä»‹</h2>
<div align="center"><img src="http://dunwu.test.upcdn.net/snap/1559263939493.png!zp"/></div>
<p>UDP æ˜¯æ— è¿æ¥çš„ã€‚æ•°æ®æŠ¥ï¼ˆç±»ä¼¼äºæ•°æ®åŒ…ï¼‰åªåœ¨æ•°æ®æŠ¥çº§åˆ«æœ‰ä¿è¯ã€‚æ•°æ®æŠ¥å¯èƒ½ä¼šæ— åºçš„åˆ°è¾¾ç›®çš„åœ°ï¼Œä¹Ÿæœ‰å¯èƒ½ä¼šé—å¤±ã€‚UDP ä¸æ”¯æŒæ‹¥å¡æ§åˆ¶ã€‚è™½ç„¶ä¸å¦‚ TCP é‚£æ ·æœ‰ä¿è¯ï¼Œä½† UDP é€šå¸¸æ•ˆç‡æ›´é«˜ã€‚</p>
<p>UDP å¯ä»¥é€šè¿‡å¹¿æ’­å°†æ•°æ®æŠ¥å‘é€è‡³å­ç½‘å†…çš„æ‰€æœ‰è®¾å¤‡ã€‚è¿™å¯¹ <a href="https://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol" target="_blank" rel="noopener">DHCP</a> å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå­ç½‘å†…çš„è®¾å¤‡è¿˜æ²¡æœ‰åˆ†é… IP åœ°å€ï¼Œè€Œ IP å¯¹äº TCP æ˜¯å¿…é¡»çš„ã€‚</p>
<p>UDP å¯é æ€§æ›´ä½ä½†é€‚åˆç”¨åœ¨ç½‘ç»œç”µè¯ã€è§†é¢‘èŠå¤©ï¼Œæµåª’ä½“å’Œå®æ—¶å¤šäººæ¸¸æˆä¸Šã€‚</p>
<p>ä»¥ä¸‹æƒ…å†µä½¿ç”¨ UDP ä»£æ›¿ TCPï¼š</p>
<ul>
<li>ä½ éœ€è¦ä½å»¶è¿Ÿ</li>
<li>ç›¸å¯¹äºæ•°æ®ä¸¢å¤±æ›´ç³Ÿçš„æ˜¯æ•°æ®å»¶è¿Ÿ</li>
<li>ä½ æƒ³å®ç°è‡ªå·±çš„é”™è¯¯æ ¡æ­£æ–¹æ³•</li>
</ul>
<h3 id="udp-ç‰¹ç‚¹"><a class="markdownIt-Anchor" href="#udp-ç‰¹ç‚¹"></a> UDP ç‰¹ç‚¹</h3>
<ol>
<li><strong>æ— è¿æ¥çš„</strong>ï¼Œå³å‘é€æ•°æ®ä¹‹å‰ä¸éœ€è¦å»ºç«‹è¿æ¥ï¼Œå› æ­¤å‡å°‘äº†å¼€é”€å’Œå‘é€æ•°æ®ä¹‹å‰çš„æ—¶å»¶ã€‚</li>
<li><strong>ä¸ä¿è¯å¯é äº¤ä»˜</strong>ï¼Œå› æ­¤ä¸»æœºä¸éœ€è¦ä¸ºæ­¤å¤æ‚çš„è¿æ¥çŠ¶æ€è¡¨</li>
<li><strong>é¢å‘æŠ¥æ–‡çš„</strong>ï¼Œæ„æ€æ˜¯ UDP å¯¹åº”ç”¨å±‚äº¤ä¸‹æ¥çš„æŠ¥æ–‡ï¼Œæ—¢ä¸åˆå¹¶ï¼Œä¹Ÿä¸æ‹†åˆ†ï¼Œè€Œæ˜¯ä¿ç•™è¿™äº›æŠ¥æ–‡çš„è¾¹ç•Œï¼Œåœ¨æ·»åŠ é¦–éƒ¨åå‘ä¸‹äº¤ç»™ IP å±‚ã€‚</li>
<li><strong>æ²¡æœ‰é˜»å¡æ§åˆ¶</strong>ï¼Œå› æ­¤ç½‘ç»œå‡ºç°çš„æ‹¥å¡ä¸ä¼šä½¿å‘é€æ–¹çš„å‘é€é€Ÿç‡é™ä½ã€‚</li>
<li><strong>æ”¯æŒä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€å’Œå¤šå¯¹å¤šçš„äº¤äº’é€šä¿¡</strong>ï¼Œä¹Ÿå³æ˜¯æä¾›å¹¿æ’­å’Œå¤šæ’­çš„åŠŸèƒ½ã€‚</li>
<li><strong>é¦–éƒ¨å¼€é”€å°</strong>ï¼Œé¦–éƒ¨åªæœ‰ 8 ä¸ªå­—èŠ‚ï¼Œåˆ†ä¸ºå››éƒ¨åˆ†ã€‚</li>
</ol>
<h3 id="udp-åº”ç”¨åœºæ™¯"><a class="markdownIt-Anchor" href="#udp-åº”ç”¨åœºæ™¯"></a> UDP åº”ç”¨åœºæ™¯</h3>
<ol>
<li>åå­—è½¬æ¢ï¼ˆDNSï¼‰</li>
<li>æ–‡ä»¶ä¼ é€ï¼ˆTFTPï¼‰</li>
<li>è·¯ç”±é€‰æ‹©åè®®ï¼ˆRIPï¼‰</li>
<li>IP åœ°å€é…ç½®ï¼ˆBOOTPï¼ŒDHTPï¼‰</li>
<li>ç½‘ç»œç®¡ç†ï¼ˆSNMPï¼‰</li>
<li>è¿œç¨‹æ–‡ä»¶æœåŠ¡ï¼ˆNFSï¼‰</li>
<li>IP ç”µè¯</li>
<li>æµå¼å¤šåª’ä½“é€šä¿¡</li>
</ol>
<h2 id="udp-æŠ¥æ–‡"><a class="markdownIt-Anchor" href="#udp-æŠ¥æ–‡"></a> UDP æŠ¥æ–‡</h2>
<p>UDP æ•°æ®æŠ¥åˆ†ä¸ºæ•°æ®å­—æ®µå’Œé¦–éƒ¨å­—æ®µã€‚<br />
é¦–éƒ¨å­—æ®µåªæœ‰ 8 ä¸ªå­—èŠ‚ï¼Œç”±å››ä¸ªå­—æ®µç»„æˆï¼Œæ¯ä¸ªå­—æ®µçš„é•¿åº¦æ˜¯ 2 ä¸ªå­—èŠ‚ã€‚</p>
<p><strong>é¦–éƒ¨å„å­—æ®µæ„ä¹‰</strong>ï¼š</p>
<ol>
<li><strong>æºç«¯å£</strong>ï¼šæºç«¯å£å·ï¼Œåœ¨éœ€è¦å¯¹æ–¹å›ä¿¡æ—¶é€‰ç”¨ï¼Œä¸éœ€è¦æ—¶å¯å…¨ 0.</li>
<li><strong>ç›®çš„ç«¯å£</strong>ï¼šç›®çš„ç«¯å£å·ï¼Œåœ¨ç»ˆç‚¹äº¤ä»˜æŠ¥æ–‡æ—¶å¿…é¡»è¦ä½¿ç”¨åˆ°ã€‚</li>
<li><strong>é•¿åº¦</strong>ï¼šUDP ç”¨æˆ·æ•°æ®æŠ¥çš„é•¿åº¦ï¼Œåœ¨åªæœ‰é¦–éƒ¨çš„æƒ…å†µï¼Œå…¶æœ€å°å€¼æ˜¯ 8 ã€‚</li>
<li><strong>æ£€éªŒå’Œ</strong>ï¼šæ£€æµ‹ UDP ç”¨æˆ·æ•°æ®æŠ¥åœ¨ä¼ è¾“ä¸­æ˜¯å¦æœ‰é”™ï¼Œæœ‰é”™å°±ä¸¢å¼ƒã€‚</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/blog/network/websocket/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Zhang Peng">
      <meta itemprop="description" content="Dunwu's Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/network/websocket/" class="post-title-link" itemprop="url">ç½‘ç»œåè®®ä¹‹ Websocket</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-05-31 11:51:00" itemprop="dateCreated datePublished" datetime="2019-05-31T11:51:00+08:00">2019-05-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-08-10 09:56:46" itemprop="dateModified" datetime="2020-08-10T09:56:46+08:00">2020-08-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index">
                    <span itemprop="name">ç½‘ç»œ</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/blog/network/websocket/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="network/websocket/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>8.3k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>8 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="socket-å’Œ-websocket"><a class="markdownIt-Anchor" href="#socket-å’Œ-websocket"></a> Socket å’Œ WebSocket</h1>
<blockquote>
<p>ğŸ“¦ æœ¬æ–‡å·²å½’æ¡£åˆ°ï¼šã€Œ<a href="https://github.com/dunwu/blog" target="_blank" rel="noopener">blog</a>ã€</p>
</blockquote>
<!-- TOC depthFrom:2 depthTo:3 -->
<ul>
<li><a href="#socket">Socket</a>
<ul>
<li><a href="#socket-%E7%94%A8%E6%B3%95">Socket ç”¨æ³•</a></li>
<li><a href="#socket-%E9%95%BF%E8%BF%9E%E6%8E%A5">Socket é•¿è¿æ¥</a></li>
</ul>
</li>
<li><a href="#websocket">WebSocket</a>
<ul>
<li><a href="#websocket-%E7%AE%80%E4%BB%8B">WebSocket ç®€ä»‹</a></li>
<li><a href="#websocket-%E4%BD%BF%E7%94%A8">WebSocket ä½¿ç”¨</a></li>
</ul>
</li>
<li><a href="#faq">FAQ</a>
<ul>
<li><a href="#http-vs-socket">Http vs. Socket</a></li>
<li><a href="#http-%E5%92%8C-websocket-%E6%9C%89%E4%BB%80%E4%B9%88%E5%85%B3%E7%B3%BB">HTTP å’Œ WebSocket æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</a></li>
<li><a href="#html-%E5%92%8C-http-%E6%9C%89%E4%BB%80%E4%B9%88%E5%85%B3%E7%B3%BB">Html å’Œ HTTP æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</a></li>
</ul>
</li>
<li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">å‚è€ƒèµ„æ–™</a></li>
</ul>
<!-- /TOC -->
<h2 id="socket"><a class="markdownIt-Anchor" href="#socket"></a> Socket</h2>
<p>Socket ä½œä¸ºä¸€ç§æŠ½è±¡å±‚ï¼Œåº”ç”¨ç¨‹åºé€šè¿‡å®ƒæ¥å‘é€å’Œæ¥æ”¶æ•°æ®ï¼Œä½¿ç”¨ Socket å¯ä»¥å°†åº”ç”¨ç¨‹åºä¸å¤„äºåŒä¸€ç½‘ç»œä¸­çš„å…¶ä»–åº”ç”¨ç¨‹åºè¿›è¡Œé€šä¿¡äº¤äº’ã€‚ç®€è€Œè¨€ä¹‹ï¼ŒSocket æä¾›äº†åº”ç”¨ç¨‹åºå†…éƒ¨ä¸å¤–ç•Œé€šä¿¡çš„ç«¯å£ä»¥åŠä¸ºé€šä¿¡åŒæ–¹æä¾›äº†æ•°æ®ä¼ è¾“çš„é€šé“ã€‚</p>
<h3 id="socket-ç”¨æ³•"><a class="markdownIt-Anchor" href="#socket-ç”¨æ³•"></a> Socket ç”¨æ³•</h3>
<p>å¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½æ”¯æŒ Socketã€‚è¿™é‡Œä»¥ Java çš„ Socket ç”¨æ³•ä¸ºä¾‹ã€‚</p>
<p>åœ¨ Java çš„ SDK ä¸­ï¼Œsocket çš„å…±æœ‰ä¸¤ä¸ªæ¥å£ï¼šç”¨äºç›‘å¬å®¢æˆ·è¿æ¥çš„ <code>ServerSocket</code> å’Œç”¨äºé€šä¿¡çš„ <code>Socket</code>ã€‚ä½¿ç”¨ socket çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ul>
<li>åˆ›å»º <code>ServerSocket</code> å¹¶ç›‘å¬å®¢æˆ·è¿æ¥</li>
<li>ä½¿ç”¨ <code>Socket</code> è¿æ¥æœåŠ¡ç«¯</li>
<li>é€šè¿‡ <code>Socket</code> è·å–è¾“å…¥è¾“å‡ºæµè¿›è¡Œé€šä¿¡</li>
</ul>
<h3 id="socket-é•¿è¿æ¥"><a class="markdownIt-Anchor" href="#socket-é•¿è¿æ¥"></a> Socket é•¿è¿æ¥</h3>
<p>Socket é•¿è¿æ¥ï¼ŒæŒ‡çš„æ˜¯åœ¨å®¢æˆ·å’ŒæœåŠ¡ç«¯ä¹‹é—´ä¿æŒä¸€ä¸ª socket è¿æ¥é•¿æ—¶é—´ä¸æ–­å¼€ã€‚</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">socket.set<span class="constructor">KeepAlive(<span class="params">true</span>)</span>;</span><br></pre></td></tr></table></figure>
<h2 id="websocket"><a class="markdownIt-Anchor" href="#websocket"></a> WebSocket</h2>
<h3 id="websocket-ç®€ä»‹"><a class="markdownIt-Anchor" href="#websocket-ç®€ä»‹"></a> WebSocket ç®€ä»‹</h3>
<h4 id="websocket-æ˜¯ä»€ä¹ˆ"><a class="markdownIt-Anchor" href="#websocket-æ˜¯ä»€ä¹ˆ"></a> WebSocket æ˜¯ä»€ä¹ˆ</h4>
<p><a href="http://websocket.org/" target="_blank" rel="noopener">WebSocket</a> æ˜¯ä¸€ç§ç½‘ç»œé€šä¿¡åè®®ã€‚<a href="https://tools.ietf.org/html/rfc6455" target="_blank" rel="noopener">RFC6455</a> å®šä¹‰äº†å®ƒçš„é€šä¿¡æ ‡å‡†ã€‚</p>
<p>WebSocket æ˜¯ HTML5 å¼€å§‹æä¾›çš„ä¸€ç§åœ¨å•ä¸ª TCP è¿æ¥ä¸Šè¿›è¡Œå…¨åŒå·¥é€šè®¯çš„åè®®ã€‚</p>
<h4 id="ä¸ºä»€ä¹ˆéœ€è¦-websocket"><a class="markdownIt-Anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦-websocket"></a> ä¸ºä»€ä¹ˆéœ€è¦ WebSocket</h4>
<p>äº†è§£è®¡ç®—æœºç½‘ç»œåè®®çš„äººï¼Œåº”è¯¥éƒ½çŸ¥é“ï¼šHTTP åè®®æ˜¯ä¸€ç§æ— çŠ¶æ€çš„ã€æ— è¿æ¥çš„ã€å•å‘çš„åº”ç”¨å±‚åè®®ã€‚å®ƒé‡‡ç”¨äº†è¯·æ±‚/å“åº”æ¨¡å‹ã€‚é€šä¿¡è¯·æ±‚åªèƒ½ç”±å®¢æˆ·ç«¯å‘èµ·ï¼ŒæœåŠ¡ç«¯å¯¹è¯·æ±‚åšå‡ºåº”ç­”å¤„ç†ã€‚</p>
<p>è¿™ç§é€šä¿¡æ¨¡å‹æœ‰ä¸€ä¸ªå¼Šç«¯ï¼šHTTP åè®®æ— æ³•å®ç°æœåŠ¡å™¨ä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘èµ·æ¶ˆæ¯ã€‚</p>
<p>è¿™ç§å•å‘è¯·æ±‚çš„ç‰¹ç‚¹ï¼Œæ³¨å®šäº†å¦‚æœæœåŠ¡å™¨æœ‰è¿ç»­çš„çŠ¶æ€å˜åŒ–ï¼Œå®¢æˆ·ç«¯è¦è·çŸ¥å°±éå¸¸éº»çƒ¦ã€‚å¤§å¤šæ•° Web åº”ç”¨ç¨‹åºå°†é€šè¿‡é¢‘ç¹çš„å¼‚æ­¥ JavaScript å’Œ XMLï¼ˆAJAXï¼‰è¯·æ±‚å®ç°é•¿è½®è¯¢ã€‚è½®è¯¢çš„æ•ˆç‡ä½ï¼Œéå¸¸æµªè´¹èµ„æºï¼ˆå› ä¸ºå¿…é¡»ä¸åœè¿æ¥ï¼Œæˆ–è€… HTTP è¿æ¥å§‹ç»ˆæ‰“å¼€ï¼‰ã€‚</p>
<div align="center"><img src="http://dunwu.test.upcdn.net/cs/java/spring/web/ajax-long-polling.png!zp"/></div>
å› æ­¤ï¼Œå·¥ç¨‹å¸ˆä»¬ä¸€ç›´åœ¨æ€è€ƒï¼Œæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ³•ã€‚WebSocket å°±æ˜¯è¿™æ ·å‘æ˜çš„ã€‚WebSocket è¿æ¥å…è®¸å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´è¿›è¡Œå…¨åŒå·¥é€šä¿¡ï¼Œä»¥ä¾¿ä»»ä¸€æ–¹éƒ½å¯ä»¥é€šè¿‡å»ºç«‹çš„è¿æ¥å°†æ•°æ®æ¨é€åˆ°å¦ä¸€ç«¯ã€‚WebSocket åªéœ€è¦å»ºç«‹ä¸€æ¬¡è¿æ¥ï¼Œå°±å¯ä»¥ä¸€ç›´ä¿æŒè¿æ¥çŠ¶æ€ã€‚è¿™ç›¸æ¯”äºè½®è¯¢æ–¹å¼çš„ä¸åœå»ºç«‹è¿æ¥æ˜¾ç„¶æ•ˆç‡è¦å¤§å¤§æé«˜ã€‚
<div align="center"><img src="http://dunwu.test.upcdn.net/cs/java/spring/web/websockets-flow.png!zp"/></div>
#### WebSocket å¦‚ä½•å·¥ä½œ
<p>Web æµè§ˆå™¨å’ŒæœåŠ¡å™¨éƒ½å¿…é¡»å®ç° WebSockets åè®®æ¥å»ºç«‹å’Œç»´æŠ¤è¿æ¥ã€‚ç”±äº WebSockets è¿æ¥é•¿æœŸå­˜åœ¨ï¼Œä¸å…¸å‹çš„ HTTP è¿æ¥ä¸åŒï¼Œå¯¹æœåŠ¡å™¨æœ‰é‡è¦çš„å½±å“ã€‚</p>
<p>åŸºäºå¤šçº¿ç¨‹æˆ–å¤šè¿›ç¨‹çš„æœåŠ¡å™¨æ— æ³•é€‚ç”¨äº WebSocketsï¼Œå› ä¸ºå®ƒæ—¨åœ¨æ‰“å¼€è¿æ¥ï¼Œå°½å¯èƒ½å¿«åœ°å¤„ç†è¯·æ±‚ï¼Œç„¶åå…³é—­è¿æ¥ã€‚ä»»ä½•å®é™…çš„ WebSockets æœåŠ¡å™¨ç«¯å®ç°éƒ½éœ€è¦ä¸€ä¸ªå¼‚æ­¥æœåŠ¡å™¨ã€‚</p>
<h3 id="websocket-ä½¿ç”¨"><a class="markdownIt-Anchor" href="#websocket-ä½¿ç”¨"></a> WebSocket ä½¿ç”¨</h3>
<h4 id="websocket-å®¢æˆ·ç«¯"><a class="markdownIt-Anchor" href="#websocket-å®¢æˆ·ç«¯"></a> WebSocket å®¢æˆ·ç«¯</h4>
<p>åœ¨å®¢æˆ·ç«¯ï¼Œæ²¡æœ‰å¿…è¦ä¸º WebSockets ä½¿ç”¨ JavaScript åº“ã€‚å®ç° WebSockets çš„ Web æµè§ˆå™¨å°†é€šè¿‡ WebSockets å¯¹è±¡å…¬å¼€æ‰€æœ‰å¿…éœ€çš„å®¢æˆ·ç«¯åŠŸèƒ½ï¼ˆä¸»è¦æŒ‡æ”¯æŒ Html5 çš„æµè§ˆå™¨ï¼‰ã€‚</p>
<p>ä»¥ä¸‹ API ç”¨äºåˆ›å»º WebSocket å¯¹è±¡ã€‚</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">var Socket = <span class="keyword">new</span> <span class="constructor">WebSocket(<span class="params">url</span>, [<span class="params">protocol</span>] )</span>;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šä»£ç ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•° url, æŒ‡å®šè¿æ¥çš„ URLã€‚ç¬¬äºŒä¸ªå‚æ•° protocol æ˜¯å¯é€‰çš„ï¼ŒæŒ‡å®šäº†å¯æ¥å—çš„å­åè®®ã€‚</p>
<h5 id="websocket-å±æ€§"><a class="markdownIt-Anchor" href="#websocket-å±æ€§"></a> WebSocket å±æ€§</h5>
<p>ä»¥ä¸‹æ˜¯ WebSocket å¯¹è±¡çš„å±æ€§ã€‚å‡å®šæˆ‘ä»¬ä½¿ç”¨äº†ä»¥ä¸Šä»£ç åˆ›å»ºäº† Socket å¯¹è±¡ï¼š</p>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>Socket.readyState</td>
<td>åªè¯»å±æ€§ <strong>readyState</strong> è¡¨ç¤ºè¿æ¥çŠ¶æ€ï¼Œå¯ä»¥æ˜¯ä»¥ä¸‹å€¼ï¼š0 - è¡¨ç¤ºè¿æ¥å°šæœªå»ºç«‹ã€‚1 - è¡¨ç¤ºè¿æ¥å·²å»ºç«‹ï¼Œå¯ä»¥è¿›è¡Œé€šä¿¡ã€‚2 - è¡¨ç¤ºè¿æ¥æ­£åœ¨è¿›è¡Œå…³é—­ã€‚3 - è¡¨ç¤ºè¿æ¥å·²ç»å…³é—­æˆ–è€…è¿æ¥ä¸èƒ½æ‰“å¼€ã€‚</td>
</tr>
<tr>
<td>Socket.bufferedAmount</td>
<td>åªè¯»å±æ€§ <strong>bufferedAmount</strong> å·²è¢« send() æ”¾å…¥æ­£åœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…ä¼ è¾“ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å‘å‡ºçš„ UTF-8 æ–‡æœ¬å­—èŠ‚æ•°ã€‚</td>
</tr>
</tbody>
</table>
<h5 id="websocket-äº‹ä»¶"><a class="markdownIt-Anchor" href="#websocket-äº‹ä»¶"></a> WebSocket äº‹ä»¶</h5>
<p>ä»¥ä¸‹æ˜¯ WebSocket å¯¹è±¡çš„ç›¸å…³äº‹ä»¶ã€‚å‡å®šæˆ‘ä»¬ä½¿ç”¨äº†ä»¥ä¸Šä»£ç åˆ›å»ºäº† Socket å¯¹è±¡ï¼š</p>
<table>
<thead>
<tr>
<th>äº‹ä»¶</th>
<th>äº‹ä»¶å¤„ç†ç¨‹åº</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>open</td>
<td>Socket.onopen</td>
<td>è¿æ¥å»ºç«‹æ—¶è§¦å‘</td>
</tr>
<tr>
<td>message</td>
<td>Socket.onmessage</td>
<td>å®¢æˆ·ç«¯æ¥æ”¶æœåŠ¡ç«¯æ•°æ®æ—¶è§¦å‘</td>
</tr>
<tr>
<td>error</td>
<td>Socket.onerror</td>
<td>é€šä¿¡å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘</td>
</tr>
<tr>
<td>close</td>
<td>Socket.onclose</td>
<td>è¿æ¥å…³é—­æ—¶è§¦å‘</td>
</tr>
</tbody>
</table>
<h5 id="websocket-æ–¹æ³•"><a class="markdownIt-Anchor" href="#websocket-æ–¹æ³•"></a> WebSocket æ–¹æ³•</h5>
<p>ä»¥ä¸‹æ˜¯ WebSocket å¯¹è±¡çš„ç›¸å…³æ–¹æ³•ã€‚å‡å®šæˆ‘ä»¬ä½¿ç”¨äº†ä»¥ä¸Šä»£ç åˆ›å»ºäº† Socket å¯¹è±¡ï¼š</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>Socket.send()</td>
<td>ä½¿ç”¨è¿æ¥å‘é€æ•°æ®</td>
</tr>
<tr>
<td>Socket.close()</td>
<td>å…³é—­è¿æ¥</td>
</tr>
</tbody>
</table>
<p>WebSocket å®¢æˆ·ç«¯ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–ä¸€ä¸ª WebSocket å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> ws = <span class="keyword">new</span> WebSocket(<span class="string">'ws://localhost:9998/echo'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å»ºç«‹ web socket è¿æ¥æˆåŠŸè§¦å‘äº‹ä»¶</span></span><br><span class="line">ws.onopen = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ä½¿ç”¨ send() æ–¹æ³•å‘é€æ•°æ®</span></span><br><span class="line">  ws.send(<span class="string">'å‘é€æ•°æ®'</span>)</span><br><span class="line">  alert(<span class="string">'æ•°æ®å‘é€ä¸­...'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¥æ”¶æœåŠ¡ç«¯æ•°æ®æ—¶è§¦å‘äº‹ä»¶</span></span><br><span class="line">ws.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> received_msg = evt.data</span><br><span class="line">  alert(<span class="string">'æ•°æ®å·²æ¥æ”¶...'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–­å¼€ web socket è¿æ¥æˆåŠŸè§¦å‘äº‹ä»¶</span></span><br><span class="line">ws.onclose = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="string">'è¿æ¥å·²å…³é—­...'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="websocket-æœåŠ¡ç«¯"><a class="markdownIt-Anchor" href="#websocket-æœåŠ¡ç«¯"></a> WebSocket æœåŠ¡ç«¯</h4>
<p>WebSocket åœ¨æœåŠ¡ç«¯çš„å®ç°éå¸¸ä¸°å¯Œã€‚Node.jsã€Javaã€C++ã€Python ç­‰å¤šç§è¯­è¨€éƒ½æœ‰è‡ªå·±çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>ä»¥ä¸‹ï¼Œä»‹ç»æˆ‘åœ¨å­¦ä¹  WebSocket è¿‡ç¨‹ä¸­æ¥è§¦è¿‡çš„ WebSocket æœåŠ¡ç«¯è§£å†³æ–¹æ¡ˆã€‚</p>
<h5 id="nodejs"><a class="markdownIt-Anchor" href="#nodejs"></a> Node.js</h5>
<p>å¸¸ç”¨çš„ Node å®ç°æœ‰ä»¥ä¸‹ä¸‰ç§ã€‚</p>
<ul>
<li><a href="https://github.com/uWebSockets/uWebSockets" target="_blank" rel="noopener">ÂµWebSockets</a></li>
<li><a href="http://socket.io/" target="_blank" rel="noopener">Socket.IO</a></li>
<li><a href="https://github.com/theturtle32/WebSocket-Node" target="_blank" rel="noopener">WebSocket-Node</a></li>
</ul>
<h5 id="java"><a class="markdownIt-Anchor" href="#java"></a> Java</h5>
<p>Java çš„ web ä¸€èˆ¬éƒ½ä¾æ‰˜äº servlet å®¹å™¨ã€‚</p>
<p>æˆ‘ä½¿ç”¨è¿‡çš„ servlet å®¹å™¨æœ‰ï¼šTomcatã€Jettyã€Resinã€‚å…¶ä¸­ Tomcat7ã€Jetty7 åŠä»¥ä¸Šç‰ˆæœ¬å‡å¼€å§‹æ”¯æŒ WebSocketï¼ˆæ¨èè¾ƒæ–°çš„ç‰ˆæœ¬ï¼Œå› ä¸ºéšç€ç‰ˆæœ¬çš„æ›´è¿­ï¼Œå¯¹ WebSocket çš„æ”¯æŒå¯èƒ½æœ‰å˜æ›´ï¼‰ã€‚</p>
<p>æ­¤å¤–ï¼ŒSpring æ¡†æ¶å¯¹ WebSocket ä¹Ÿæä¾›äº†æ”¯æŒã€‚</p>
<p>è™½ç„¶ï¼Œä»¥ä¸Šåº”ç”¨å¯¹äº WebSocket éƒ½æœ‰å„è‡ªçš„å®ç°ã€‚ä½†æ˜¯ï¼Œå®ƒä»¬éƒ½éµå¾ª<a href="https://tools.ietf.org/html/rfc6455" target="_blank" rel="noopener">RFC6455</a> çš„é€šä¿¡æ ‡å‡†ï¼Œå¹¶ä¸” Java API ç»Ÿä¸€éµå¾ª <a href="http://www.jcp.org/en/jsr/detail?id=356" target="_blank" rel="noopener">JSR 356 - JavaTM API for WebSocket </a> è§„èŒƒã€‚æ‰€ä»¥ï¼Œåœ¨å®é™…ç¼–ç ä¸­ï¼ŒAPI å·®å¼‚ä¸å¤§ã€‚</p>
<h5 id="spring"><a class="markdownIt-Anchor" href="#spring"></a> Spring</h5>
<p>Spring å¯¹äº WebSocket çš„æ”¯æŒåŸºäºä¸‹é¢çš„ jar åŒ…ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-websocket<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ Spring å®ç° WebSocket æœåŠ¡å™¨å¤§æ¦‚åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š</p>
<p><strong>åˆ›å»º WebSocket å¤„ç†å™¨</strong></p>
<p>æ‰©å±• <code>TextWebSocketHandler</code> æˆ– <code>BinaryWebSocketHandler</code> ï¼Œä½ å¯ä»¥è¦†å†™æŒ‡å®šçš„æ–¹æ³•ã€‚Spring åœ¨æ”¶åˆ° WebSocket äº‹ä»¶æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨äº‹ä»¶å¯¹åº”çš„æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.web.socket.WebSocketHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.socket.WebSocketSession;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.socket.TextMessage;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyHandler</span> <span class="keyword">extends</span> <span class="title">TextWebSocketHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleTextMessage</span><span class="params">(WebSocketSession session, TextMessage message)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>WebSocketHandler</code> æºç å¦‚ä¸‹ï¼Œè¿™æ„å‘³ç€ä½ çš„å¤„ç†å™¨å¤§æ¦‚å¯ä»¥å¤„ç†å“ªäº› WebSocket äº‹ä»¶ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">WebSocketHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * å»ºç«‹è¿æ¥åè§¦å‘çš„å›è°ƒ</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">afterConnectionEstablished</span><span class="params">(WebSocketSession session)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * æ”¶åˆ°æ¶ˆæ¯æ—¶è§¦å‘çš„å›è°ƒ</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(WebSocketSession session, WebSocketMessage&lt;?&gt; message)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * ä¼ è¾“æ¶ˆæ¯å‡ºé”™æ—¶è§¦å‘çš„å›è°ƒ</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">handleTransportError</span><span class="params">(WebSocketSession session, Throwable exception)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * æ–­å¼€è¿æ¥åè§¦å‘çš„å›è°ƒ</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">afterConnectionClosed</span><span class="params">(WebSocketSession session, CloseStatus closeStatus)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * æ˜¯å¦å¤„ç†åˆ†ç‰‡æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">boolean</span> <span class="title">supportsPartialMessages</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>é…ç½® WebSocket</strong></p>
<p>é…ç½®æœ‰ä¸¤ç§æ–¹å¼ï¼šæ³¨è§£å’Œ xml ã€‚å…¶ä½œç”¨å°±æ˜¯å°† WebSocket å¤„ç†å™¨æ·»åŠ åˆ°æ³¨å†Œä¸­å¿ƒã€‚</p>
<ol>
<li>å®ç° <code>WebSocketConfigurer</code></li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.web.socket.config.annotation.EnableWebSocket;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.socket.config.annotation.WebSocketConfigurer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.socket.config.annotation.WebSocketHandlerRegistry;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebSocket</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebSocketConfig</span> <span class="keyword">implements</span> <span class="title">WebSocketConfigurer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerWebSocketHandlers</span><span class="params">(WebSocketHandlerRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addHandler(myHandler(), <span class="string">"/myHandler"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> WebSocketHandler <span class="title">myHandler</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MyHandler();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>xml æ–¹å¼</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:websocket</span>=<span class="string">"http://www.springframework.org/schema/websocket"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/websocket</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/websocket/spring-websocket.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">websocket:handlers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">websocket:mapping</span> <span class="attr">path</span>=<span class="string">"/myHandler"</span> <span class="attr">handler</span>=<span class="string">"myHandler"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">websocket:handlers</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"myHandler"</span> <span class="attr">class</span>=<span class="string">"org.springframework.samples.MyHandler"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ›´å¤šé…ç½®ç»†èŠ‚å¯ä»¥å‚è€ƒï¼š<a href="https://docs.spring.io/spring/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#websocket" target="_blank" rel="noopener">Spring WebSocket æ–‡æ¡£</a></p>
</blockquote>
<p>javax.websocket</p>
<p>å¦‚æœä¸æƒ³ä½¿ç”¨ Spring æ¡†æ¶çš„ WebSocket APIï¼Œä½ ä¹Ÿå¯ä»¥é€‰æ‹©åŸºæœ¬çš„ javax.websocketã€‚</p>
<p>é¦–å…ˆï¼Œéœ€è¦å¼•å…¥ API jar åŒ…ã€‚</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- To write basic javax.websocket against --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.websocket<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.websocket-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½¿ç”¨åµŒå…¥å¼ jettyï¼Œä½ è¿˜éœ€è¦å¼•å…¥å®ƒçš„å®ç°åŒ…ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- To run javax.websocket in embedded server --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.eclipse.jetty.websocket<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax-websocket-server-impl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;jetty-version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- To run javax.websocket client --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.eclipse.jetty.websocket<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax-websocket-client-impl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;jetty-version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>@ServerEndpoint</strong></p>
<p>è¿™ä¸ªæ³¨è§£ç”¨æ¥æ ‡è®°ä¸€ä¸ªç±»æ˜¯ WebSocket çš„å¤„ç†å™¨ã€‚</p>
<p>ç„¶åï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ªç±»ä¸­ä½¿ç”¨ä¸‹é¢çš„æ³¨è§£æ¥è¡¨æ˜æ‰€ä¿®é¥°çš„æ–¹æ³•æ˜¯è§¦å‘äº‹ä»¶çš„å›è°ƒ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ”¶åˆ°æ¶ˆæ¯è§¦å‘äº‹ä»¶</span></span><br><span class="line"><span class="meta">@OnMessage</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onMessage</span><span class="params">(String message, Session session)</span> <span class="keyword">throws</span> IOException, InterruptedException </span>&#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å¼€è¿æ¥è§¦å‘äº‹ä»¶</span></span><br><span class="line"><span class="meta">@OnOpen</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onOpen</span><span class="params">(Session session, EndpointConfig config, @PathParam(<span class="string">"id"</span>)</span> String id) </span>&#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…³é—­è¿æ¥è§¦å‘äº‹ä»¶</span></span><br><span class="line"><span class="meta">@OnClose</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClose</span><span class="params">(Session session, CloseReason closeReason)</span> </span>&#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼ è¾“æ¶ˆæ¯é”™è¯¯è§¦å‘äº‹ä»¶</span></span><br><span class="line"><span class="meta">@OnError</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable error)</span> </span>&#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ServerEndpointConfig.Configurator</strong></p>
<p>ç¼–å†™å®Œå¤„ç†å™¨ï¼Œä½ éœ€è¦æ‰©å±• ServerEndpointConfig.Configurator ç±»å®Œæˆé…ç½®ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebSocketServerConfigurator</span> <span class="keyword">extends</span> <span class="title">ServerEndpointConfig</span>.<span class="title">Configurator</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">modifyHandshake</span><span class="params">(ServerEndpointConfig sec, HandshakeRequest request, HandshakeResponse response)</span> </span>&#123;</span><br><span class="line">        HttpSession httpSession = (HttpSession) request.getHttpSession();</span><br><span class="line">        sec.getUserProperties().put(HttpSession<span class="class">.<span class="keyword">class</span>.<span class="title">getName</span>(), <span class="title">httpSession</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åå°±æ²¡æœ‰ç„¶åäº†ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ã€‚</p>
<h4 id="websocket-ä»£ç†"><a class="markdownIt-Anchor" href="#websocket-ä»£ç†"></a> WebSocket ä»£ç†</h4>
<p>å¦‚æœæŠŠ WebSocket çš„é€šä¿¡çœ‹æˆæ˜¯ç”µè¯è¿æ¥ï¼ŒNginx çš„è§’è‰²åˆ™åƒæ˜¯ç”µè¯æ¥çº¿å‘˜ï¼Œè´Ÿè´£å°†å‘èµ·ç”µè¯è¿æ¥çš„ç”µè¯è½¬æ¥åˆ°æŒ‡å®šçš„å®¢æœã€‚</p>
<p>Nginx ä» <a href="http://nginx.com/blog/websocket-nginx/" target="_blank" rel="noopener">1.3 ç‰ˆ</a>å¼€å§‹æ­£å¼æ”¯æŒ WebSocket ä»£ç†ã€‚å¦‚æœä½ çš„ web åº”ç”¨ä½¿ç”¨äº†ä»£ç†æœåŠ¡å™¨ Nginxï¼Œé‚£ä¹ˆä½ è¿˜éœ€è¦ä¸º Nginx åšä¸€äº›é…ç½®ï¼Œä½¿å¾—å®ƒå¼€å¯ WebSocket ä»£ç†åŠŸèƒ½ã€‚</p>
<p>ä»¥ä¸‹ä¸ºå‚è€ƒé…ç½®ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">  <span class="comment"># this section is specific to the WebSockets proxying</span></span><br><span class="line">  <span class="attribute">location</span> /socket.io &#123;</span><br><span class="line">    <span class="attribute">proxy_pass</span> http://app_server_wsgiapp/socket.io;</span><br><span class="line">    <span class="attribute">proxy_redirect</span> <span class="literal">off</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> Connection <span class="string">"upgrade"</span>;</span><br><span class="line">    <span class="attribute">proxy_read_timeout</span> <span class="number">600</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ›´å¤šé…ç½®ç»†èŠ‚å¯ä»¥å‚è€ƒï¼š<a href="http://nginx.org/en/docs/http/websocket.html" target="_blank" rel="noopener">Nginx å®˜æ–¹çš„ websocket æ–‡æ¡£</a></p>
</blockquote>
<h4 id="websocket-åº”ç”¨ç¤ºä¾‹"><a class="markdownIt-Anchor" href="#websocket-åº”ç”¨ç¤ºä¾‹"></a> WebSocket åº”ç”¨ç¤ºä¾‹</h4>
<p>å¦‚æœéœ€è¦å®Œæ•´ç¤ºä¾‹ä»£ç ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„ Github ä»£ç ï¼š</p>
<ul>
<li><a href="https://github.com/dunwu/spring-notes/tree/master/codes/web/websocket" target="_blank" rel="noopener">Spring å¯¹ WebSocket æ”¯æŒçš„ç¤ºä¾‹</a></li>
<li><a href="https://github.com/dunwu/javaee-notes/tree/master/codes/websocket" target="_blank" rel="noopener">åµŒå…¥å¼ Jetty æœåŠ¡å™¨çš„ WebSocket ç¤ºä¾‹</a></li>
</ul>
<p>spring-websocket å’Œ jetty 9.3 ç‰ˆæœ¬ä¼¼ä¹å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼ŒTomcat åˆ™æœ¨æœ‰é—®é¢˜ã€‚</p>
<p>æˆ‘å°è¯•äº†å¥½å‡ æ¬¡ï¼Œæ²¡æœ‰æ‰¾åˆ°è§£å†³æ–¹æ¡ˆï¼Œåªå¥½ä½¿ç”¨ Jetty å®˜æ–¹çš„åµŒå…¥å¼ç¤ºä¾‹åœ¨ Jetty ä¸­ä½¿ç”¨ WebSocket ã€‚</p>
<h2 id="faq"><a class="markdownIt-Anchor" href="#faq"></a> FAQ</h2>
<h3 id="http-vs-socket"><a class="markdownIt-Anchor" href="#http-vs-socket"></a> Http vs. Socket</h3>
<p>Http é€šä¿¡ä¸ Socket é€šä¿¡æ–¹å¼æœ‰ä½•å·®å¼‚ï¼Ÿ</p>
<ul>
<li>Http
<ul>
<li>åŸºäºè¯·æ±‚/å“åº”æ¨¡å¼ï¼Œé‡‡å–ä¸€é—®ä¸€ç­”æ–¹å¼ï¼ˆå®¢æˆ·ç«¯è¯·æ±‚ï¼ŒæœåŠ¡ç«¯æ‰ä¼šå“åº”ï¼‰</li>
</ul>
</li>
<li>Socket
<ul>
<li>å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å»ºç«‹åŒå‘è¿æ¥ã€‚è¿æ¥æˆåŠŸåï¼Œä»»æ„ä¸€æ–¹éƒ½å¯ä¸»åŠ¨å‘é€æ¶ˆæ¯ã€‚</li>
<li>æ•°æ®ä¸¢å¤±ç‡ä½ï¼Œä½¿ç”¨ç®€å•ï¼Œæ˜“äºç§»æ¤ã€‚</li>
</ul>
</li>
</ul>
<h3 id="http-å’Œ-websocket-æœ‰ä»€ä¹ˆå…³ç³»"><a class="markdownIt-Anchor" href="#http-å’Œ-websocket-æœ‰ä»€ä¹ˆå…³ç³»"></a> HTTP å’Œ WebSocket æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</h3>
<p>Websocket å…¶å®æ˜¯ä¸€ä¸ªæ–°åè®®ï¼Œè·Ÿ HTTP åè®®åŸºæœ¬æ²¡æœ‰å…³ç³»ï¼Œåªæ˜¯ä¸ºäº†å…¼å®¹ç°æœ‰æµè§ˆå™¨çš„æ¡æ‰‹è§„èŒƒè€Œå·²ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒæ˜¯ HTTP åè®®ä¸Šçš„ä¸€ç§è¡¥å……ã€‚</p>
<h3 id="html-å’Œ-http-æœ‰ä»€ä¹ˆå…³ç³»"><a class="markdownIt-Anchor" href="#html-å’Œ-http-æœ‰ä»€ä¹ˆå…³ç³»"></a> Html å’Œ HTTP æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</h3>
<p>Html æ˜¯è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼Œæ˜¯ä¸€ç§ç”¨äºåˆ›å»ºç½‘é¡µçš„æ ‡å‡†æ ‡è®°è¯­è¨€ã€‚å®ƒæ˜¯ä¸€ç§æŠ€æœ¯æ ‡å‡†ã€‚Html5 æ˜¯å®ƒçš„æœ€æ–°ç‰ˆæœ¬ã€‚</p>
<p>Http æ˜¯ä¸€ç§ç½‘ç»œé€šä¿¡åè®®ã€‚å…¶æœ¬èº«å’Œ Html æ²¡æœ‰ç›´æ¥å…³ç³»ã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™"><a class="markdownIt-Anchor" href="#å‚è€ƒèµ„æ–™"></a> å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://www.zhihu.com/question/20215561" target="_blank" rel="noopener">çŸ¥ä¹é«˜ç¥¨ç­”æ¡ˆâ€”â€”WebSocket æ˜¯ä»€ä¹ˆåŸç†</a> - å¯¹ WebSocket åŸç†çš„é˜è¿°ç®€å•æ˜“æ‡‚ã€‚</li>
<li><a href="http://www.ruanyifeng.com/blog/2017/05/websocket.html" target="_blank" rel="noopener">WebSocket æ•™ç¨‹</a> - é˜®ä¸€å³°å¤§ç¥çš„ç§‘æ™®ä¸€å¦‚æ—¢å¾€çš„æµ…æ˜¾æ˜“æ‡‚ã€‚</li>
<li><a href="https://www.fullstackpython.com/websockets.html" target="_blank" rel="noopener">WebSockets</a> - by <em>fullstackpython</em></li>
<li><a href="http://nginx.org/en/docs/http/websocket.html" target="_blank" rel="noopener">Nginx å®˜æ–¹çš„ websocket æ–‡æ¡£</a></li>
<li><a href="https://docs.spring.io/spring/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#websocket" target="_blank" rel="noopener">Spring WebSocket æ–‡æ¡£</a></li>
<li><a href="http://tomcat.apache.org/tomcat-7.0-doc/web-socket-howto.html" target="_blank" rel="noopener">Tomcat7 WebSocket æ–‡æ¡£</a></li>
<li><a href="https://www.eclipse.org/jetty/documentation/9.4.7.v20170914/websocket-intro.html" target="_blank" rel="noopener">Jetty WebSocket æ–‡æ¡£</a></li>
<li><a href="https://juejin.im/post/57f885370bd1d00058b37d74" target="_blank" rel="noopener">Socketï¼Œä½ éœ€è¦çŸ¥é“çš„äº‹å„¿</a></li>
<li><a href="https://juejin.im/post/5b3649d751882552f052703b" target="_blank" rel="noopener">æ‰‹æŠŠæ‰‹æ•™ä½ å†™ Socket é•¿è¿æ¥</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/blog/network/cdn/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Zhang Peng">
      <meta itemprop="description" content="Dunwu's Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/network/cdn/" class="post-title-link" itemprop="url">ç½‘ç»œé€šä¿¡ä¹‹ CDN</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-05-29 23:19:00" itemprop="dateCreated datePublished" datetime="2019-05-29T23:19:00+08:00">2019-05-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-08-10 09:56:46" itemprop="dateModified" datetime="2020-08-10T09:56:46+08:00">2020-08-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index">
                    <span itemprop="name">ç½‘ç»œ</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/blog/network/cdn/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="network/cdn/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>2.8k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>3 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ç½‘ç»œé€šä¿¡ä¹‹-cdn"><a class="markdownIt-Anchor" href="#ç½‘ç»œé€šä¿¡ä¹‹-cdn"></a> ç½‘ç»œé€šä¿¡ä¹‹ CDN</h1>
<blockquote>
<p>ğŸ“¦ æœ¬æ–‡å·²å½’æ¡£åˆ°ï¼šã€Œ<a href="https://github.com/dunwu/blog" target="_blank" rel="noopener">blog</a>ã€</p>
</blockquote>
<!-- TOC depthFrom:2 depthTo:3 -->
<ul>
<li><a href="#%E7%AE%80%E4%BB%8B">ç®€ä»‹</a>
<ul>
<li><a href="#cdn-%E6%98%AF%E4%BB%80%E4%B9%88">CDN æ˜¯ä»€ä¹ˆ</a></li>
<li><a href="#cdn-%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9">CDN çš„ä¼˜ç¼ºç‚¹</a></li>
</ul>
</li>
<li><a href="#cdn-%E5%8E%9F%E7%90%86">CDN åŸç†</a>
<ul>
<li><a href="#%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8">åˆ†å¸ƒå¼å­˜å‚¨</a></li>
<li><a href="#%E5%86%85%E5%AE%B9%E7%AE%A1%E7%90%86">å†…å®¹ç®¡ç†</a></li>
<li><a href="#%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1">è´Ÿè½½å‡è¡¡</a></li>
<li><a href="#%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E7%9A%84%E9%87%8D%E5%AE%9A%E5%90%91">ç½‘ç»œè¯·æ±‚çš„é‡å®šå‘</a></li>
</ul>
</li>
<li><a href="#cdn-%E8%AE%BF%E9%97%AE%E6%B5%81%E7%A8%8B">CDN è®¿é—®æµç¨‹</a></li>
<li><a href="#%E6%8E%A8%E9%80%81%E5%92%8C%E6%8B%89%E5%8F%96">æ¨é€å’Œæ‹‰å–</a>
<ul>
<li><a href="#cdn-%E6%8E%A8%E9%80%81">CDN æ¨é€</a></li>
<li><a href="#cdn-%E6%8B%89%E5%8F%96">CDN æ‹‰å–</a></li>
</ul>
</li>
<li><a href="#%E8%B5%84%E6%BA%90">èµ„æº</a></li>
</ul>
<!-- /TOC -->
<div align="center"><img src="http://dunwu.test.upcdn.net/snap/1559138689425.png!zp"/></div>
<h2 id="ç®€ä»‹"><a class="markdownIt-Anchor" href="#ç®€ä»‹"></a> ç®€ä»‹</h2>
<h3 id="cdn-æ˜¯ä»€ä¹ˆ"><a class="markdownIt-Anchor" href="#cdn-æ˜¯ä»€ä¹ˆ"></a> CDN æ˜¯ä»€ä¹ˆ</h3>
<p>CDN(<strong>Content Delivery Network</strong>)ï¼Œå³<strong>å†…å®¹åˆ†å‘ç½‘ç»œ</strong>ã€‚</p>
<p>CDN æ˜¯ä¸€ä¸ªå…¨çƒæ€§çš„ä»£ç†æœåŠ¡å™¨åˆ†å¸ƒå¼ç½‘ç»œï¼Œä¾é éƒ¨ç½²åœ¨å„åœ°çš„è¾¹ç¼˜æœåŠ¡å™¨ï¼Œé€šè¿‡ä¸­å¿ƒå¹³å°çš„è´Ÿè½½å‡è¡¡ã€å†…å®¹åˆ†å‘ã€è°ƒåº¦ç­‰åŠŸèƒ½æ¨¡å—ï¼Œä½¿ç”¨æˆ·å°±è¿‘è·å–æ‰€éœ€å†…å®¹ï¼Œé™ä½ç½‘ç»œæ‹¥å¡ï¼Œæé«˜ç”¨æˆ·è®¿é—®å“åº”é€Ÿåº¦å’Œå‘½ä¸­ç‡ã€‚å®ƒä»é è¿‘ç”¨æˆ·çš„ä½ç½®æä¾›å†…å®¹ã€‚é€šå¸¸ï¼ŒHTML/CSS/JSï¼Œå›¾ç‰‡å’Œè§†é¢‘ç­‰é™æ€å†…å®¹ç”± CDN æä¾›ã€‚CDN çš„ DNS è§£æä¼šå‘ŠçŸ¥å®¢æˆ·ç«¯è¿æ¥å“ªå°æœåŠ¡å™¨ã€‚CDN çš„å…³é”®æŠ€æœ¯ä¸»è¦æœ‰å†…å®¹å­˜å‚¨å’Œåˆ†å‘æŠ€æœ¯ã€‚</p>
<h3 id="cdn-çš„ä¼˜ç¼ºç‚¹"><a class="markdownIt-Anchor" href="#cdn-çš„ä¼˜ç¼ºç‚¹"></a> CDN çš„ä¼˜ç¼ºç‚¹</h3>
<ul>
<li>ä¼˜ç‚¹
<ul>
<li><strong>è®¿é—®åŠ é€Ÿ</strong> - ç”±äº CDN å°±è¿‘æœåŠ¡ï¼Œå¤§å¤§é™ä½äº†ç½‘ç»œä¼ æ’­æ—¶å»¶ï¼Œæ‰€ä»¥è‡ªç„¶æé«˜äº†è®¿é—®é€Ÿåº¦ã€‚</li>
<li><strong>é™ä½è´Ÿè½½</strong> - å¦‚æœ CDN å·²ç»èƒ½è·å–æ•°æ®ï¼Œé‚£ä¹ˆå°±ä¸å¿…è¯·æ±‚æºç«™ï¼Œè¿™è‡ªç„¶é™ä½äº†æºç«™ï¼ˆæœåŠ¡å™¨ï¼‰çš„è´Ÿè½½ã€‚</li>
</ul>
</li>
<li>ç¼ºç‚¹
<ul>
<li>CDN æˆæœ¬å¯èƒ½å› æµé‡è€Œå¼‚ï¼Œå¯èƒ½åœ¨æƒè¡¡ä¹‹åä½ å°†ä¸ä¼šä½¿ç”¨ CDNã€‚</li>
<li>å¦‚æœåœ¨ TTL è¿‡æœŸä¹‹å‰æ›´æ–°å†…å®¹ï¼ŒCDN ç¼“å­˜å†…å®¹å¯èƒ½ä¼šè¿‡æ—¶ã€‚</li>
<li>CDN éœ€è¦æ›´æ”¹é™æ€å†…å®¹çš„ URL åœ°å€ä»¥æŒ‡å‘ CDNã€‚</li>
</ul>
</li>
</ul>
<h2 id="cdn-åŸç†"><a class="markdownIt-Anchor" href="#cdn-åŸç†"></a> CDN åŸç†</h2>
<p>CDN çš„åŸºæœ¬åŸç†æ˜¯ï¼š</p>
<ul>
<li>å¹¿æ³›é‡‡ç”¨å„ç§ç¼“å­˜æœåŠ¡å™¨ï¼Œå°†è¿™äº›ç¼“å­˜æœåŠ¡å™¨åˆ†å¸ƒåˆ°ç”¨æˆ·è®¿é—®ç›¸å¯¹é›†ä¸­çš„åœ°åŒºæˆ–ç½‘ç»œä¸­ï¼›</li>
<li>åœ¨ç”¨æˆ·è®¿é—®ç½‘ç«™æ—¶ï¼Œå®æ—¶åœ°æ ¹æ®ç½‘ç»œæµé‡å’Œå„èŠ‚ç‚¹çš„è¿æ¥ã€è´Ÿè½½çŠ¶å†µä»¥åŠåˆ°ç”¨æˆ·çš„è·ç¦»å’Œå“åº”æ—¶é—´ç­‰ç»¼åˆä¿¡æ¯æ¥é€‰æ‹©æœ€ä½³ç¼“å­˜æœåŠ¡å™¨ï¼›</li>
<li>ç„¶åï¼Œå°†ç”¨æˆ·çš„è¯·æ±‚é‡æ–°å¯¼å‘æœ€ä½³çš„ç¼“å­˜æœåŠ¡å™¨ä¸Šï¼Œç”±ç¼“å­˜æœåŠ¡å™¨ç›´æ¥å“åº”ç”¨æˆ·è¯·æ±‚ã€‚</li>
</ul>
<p>CDN ç½‘ç»œæ¶æ„ä¸»è¦ç”±ä¸¤å¤§éƒ¨åˆ†ï¼Œåˆ†ä¸º<strong>ä¸­å¿ƒ</strong>å’Œ<strong>è¾¹ç¼˜</strong>ä¸¤éƒ¨åˆ†ï¼š</p>
<ul>
<li>ä¸­å¿ƒæŒ‡ CDN ç½‘ç®¡ä¸­å¿ƒå’Œ DNS é‡å®šå‘è§£æä¸­å¿ƒï¼Œè´Ÿè´£å…¨å±€è´Ÿè½½å‡è¡¡ï¼Œè®¾å¤‡ç³»ç»Ÿå®‰è£…åœ¨ç®¡ç†ä¸­å¿ƒæœºæˆ¿ï¼›</li>
<li>è¾¹ç¼˜ä¸»è¦æŒ‡å¼‚åœ°èŠ‚ç‚¹ï¼ŒCDN åˆ†å‘çš„è½½ä½“ï¼Œä¸»è¦ç”± Cache å’Œè´Ÿè½½å‡è¡¡å™¨ç­‰ç»„æˆã€‚</li>
</ul>
<p>CDN æ˜¯ä¸€ä¸ªç­–ç•¥æ€§éƒ¨ç½²çš„æ•´ä½“ç³»ç»Ÿï¼ŒåŒ…æ‹¬<strong>åˆ†å¸ƒå¼å­˜å‚¨</strong>ã€<strong>è´Ÿè½½å‡è¡¡</strong>ã€<strong>å†…å®¹ç®¡ç†</strong>å’Œ<strong>ç½‘ç»œè¯·æ±‚çš„é‡å®šå‘</strong>ï¼”ä¸ªè¦ä»¶ã€‚</p>
<h3 id="åˆ†å¸ƒå¼å­˜å‚¨"><a class="markdownIt-Anchor" href="#åˆ†å¸ƒå¼å­˜å‚¨"></a> åˆ†å¸ƒå¼å­˜å‚¨</h3>
<p>CDN ç½‘ç»œå°†å­˜å‚¨èµ„æºåˆ†å¸ƒåˆ°å„ä¸ªåœ°ç†ä½ç½®ã€å„ä¸ªç½‘æ®µã€‚å­˜å‚¨ç³»ç»Ÿä½œä¸º CDN ç³»ç»Ÿå¯†ä¸å¯åˆ†çš„ä¸€éƒ¨åˆ†ï¼Œå°† CDN åˆ†å‘çš„æ–‡ä»¶å’Œæ•°æ®åº“è¡¨è®°å½•å†…å®¹å­˜å‚¨èµ·æ¥ï¼Œæä¾›æŒç»­æœåŠ¡ã€‚å­˜å‚¨ç³»ç»Ÿé‡‡ç”¨ä¸‰çº§å­˜å‚¨æ¶æ„ï¼ŒåŒ…æ‹¬æ ¸å¿ƒå­˜å‚¨ã€CDN æœåŠ¡èŠ‚ç‚¹åˆ†å¸ƒå¼ç¼“å­˜å’Œç»ˆç«¯æœ¬åœ°ç¼“å­˜ã€‚ä»»æ„ä¸€ä¸ªç‚¹çš„å­˜å‚¨å´©æºƒæˆ–å¤±æ•ˆï¼Œå¹¶ä¸å½±å“ç³»ç»ŸæœåŠ¡çš„å¯ç”¨æ€§ã€‚</p>
<div align="center"><img src="http://dunwu.test.upcdn.net/snap/1559140068433.png!zp"/></div>
<p>å¦‚ CDN ç³»ç»Ÿåœ¨ 5 å¤§è¿è¥å•†ï¼ˆä¸­å›½ç”µä¿¡ã€ä¸­å›½ç½‘é€šã€ä¸­å›½é“é€šã€ä¸­å›½ç§»åŠ¨ã€ä¸­å›½è”é€šï¼‰ä»¥åŠ 2 å¤§ä¸“æœ‰ç½‘ç»œï¼ˆä¸­å›½æ•™è‚²å’Œç§‘ç ”è®¡ç®—æœºç½‘ã€ä¸­å›½ç§‘æŠ€ç½‘ï¼‰éƒ½å¸ƒæœ‰ CDN èŠ‚ç‚¹ã€‚<strong>è¿™æ ·å°±æ¶ˆé™¤äº†ä¸åŒè¿è¥å•†ä¹‹é—´äº’è”çš„ç“¶é¢ˆé€ æˆçš„å½±å“ï¼Œå®ç°äº†è·¨è¿è¥å•†çš„ç½‘ç»œåŠ é€Ÿï¼Œä¿è¯ä¸åŒç½‘ç»œä¸­çš„ç”¨æˆ·éƒ½èƒ½å¾—åˆ°è‰¯å¥½çš„è®¿é—®è´¨é‡ã€‚</strong></p>
<h3 id="å†…å®¹ç®¡ç†"><a class="markdownIt-Anchor" href="#å†…å®¹ç®¡ç†"></a> å†…å®¹ç®¡ç†</h3>
<p>å†…å®¹ç®¡ç†å’Œå…¨å±€çš„ç½‘ç»œæµé‡ç®¡ç†(Traffic Management)æ˜¯ CDN çš„æ ¸å¿ƒæ‰€åœ¨ã€‚<strong>é€šè¿‡ç”¨æˆ·å°±è¿‘æ€§å’ŒæœåŠ¡å™¨è´Ÿè½½çš„åˆ¤æ–­ï¼ŒCDN ç¡®ä¿å†…å®¹ä»¥ä¸€ç§æä¸ºé«˜æ•ˆçš„æ–¹å¼ä¸ºç”¨æˆ·çš„è¯·æ±‚æä¾›æœåŠ¡</strong>ã€‚æ€»çš„æ¥è¯´ï¼Œå†…å®¹æœåŠ¡åŸºäº<strong>ç¼“å­˜æœåŠ¡å™¨</strong>ï¼Œä¹Ÿç§°ä½œ<strong>ä»£ç†ç¼“å­˜(Surrogate)</strong>ï¼Œå®ƒä½äºç½‘ç»œçš„è¾¹ç¼˜ï¼Œè·ç”¨æˆ·ä»…æœ‰&quot;ä¸€è·³&quot;(Single Hop)ä¹‹é¥ã€‚åŒæ—¶ï¼Œä»£ç†ç¼“å­˜æ˜¯å†…å®¹æä¾›å•†æºæœåŠ¡å™¨ï¼ˆé€šå¸¸ä½äº CDN æœåŠ¡æä¾›å•†çš„æ•°æ®ä¸­å¿ƒï¼‰çš„ä¸€ä¸ªé€æ˜é•œåƒã€‚è¿™æ ·çš„æ¶æ„ä½¿å¾— CDN æœåŠ¡æä¾›å•†èƒ½å¤Ÿä»£è¡¨ä»–ä»¬å®¢æˆ·ï¼Œå³å†…å®¹ä¾›åº”å•†ï¼Œå‘æœ€ç»ˆç”¨æˆ·æä¾›å°½å¯èƒ½å¥½çš„ä½“éªŒï¼Œè€Œè¿™äº›ç”¨æˆ·æ˜¯ä¸èƒ½å®¹å¿è¯·æ±‚å“åº”æ—¶é—´æœ‰ä»»ä½•å»¶è¿Ÿçš„ã€‚æ®ç»Ÿè®¡ï¼Œé‡‡ç”¨ CDN æŠ€æœ¯ï¼Œèƒ½å¤„ç†æ•´ä¸ªç½‘ç«™é¡µé¢çš„ 70%ï½ 95ï¼…çš„å†…å®¹è®¿é—®é‡ï¼Œå‡è½»æœåŠ¡å™¨çš„å‹åŠ›ï¼Œæå‡äº†ç½‘ç«™çš„æ€§èƒ½å’Œå¯æ‰©å±•æ€§ã€‚</p>
<h3 id="è´Ÿè½½å‡è¡¡"><a class="markdownIt-Anchor" href="#è´Ÿè½½å‡è¡¡"></a> è´Ÿè½½å‡è¡¡</h3>
<p>CDN è´Ÿè½½å‡è¡¡ç³»ç»Ÿå®ç° CDN çš„<strong>å†…å®¹è·¯ç”±åŠŸèƒ½</strong>ã€‚å®ƒçš„ä½œç”¨æ˜¯å°†ç”¨æˆ·çš„è¯·æ±‚å¯¼å‘æ•´ä¸ª CDN ç½‘ç»œä¸­çš„æœ€ä½³èŠ‚ç‚¹ã€‚æœ€ä½³èŠ‚ç‚¹çš„é€‰å®šå¯ä»¥æ ¹æ®å¤šç§ç­–ç•¥ï¼Œä¾‹å¦‚<strong>è·ç¦»æœ€è¿‘</strong>ã€<strong>èŠ‚ç‚¹è´Ÿè½½æœ€è½»</strong>ç­‰ã€‚è´Ÿè½½å‡è¡¡ç³»ç»Ÿæ˜¯æ•´ä¸ª CDN çš„æ ¸å¿ƒï¼Œè´Ÿè½½å‡è¡¡çš„å‡†ç¡®æ€§å’Œæ•ˆç‡ç›´æ¥å†³å®šäº†æ•´ä¸ª CDN çš„æ•ˆç‡å’Œæ€§èƒ½ã€‚é€šå¸¸è´Ÿè½½å‡è¡¡å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªå±‚æ¬¡ï¼š<strong>å…¨å±€è´Ÿè½½å‡è¡¡ï¼ˆGSLBï¼‰<strong>å’Œ</strong>æœ¬åœ°è´Ÿè½½å‡è¡¡ï¼ˆSLBï¼‰</strong>ã€‚</p>
<h3 id="ç½‘ç»œè¯·æ±‚çš„é‡å®šå‘"><a class="markdownIt-Anchor" href="#ç½‘ç»œè¯·æ±‚çš„é‡å®šå‘"></a> ç½‘ç»œè¯·æ±‚çš„é‡å®šå‘</h3>
<p>å½“ç”¨æˆ·è®¿é—®äº†ä½¿ç”¨ CDN æœåŠ¡çš„èµ„æºæ—¶ï¼ŒDNS åŸŸåæœåŠ¡å™¨é€šè¿‡ CNAME æ–¹å¼å°†æœ€ç»ˆåŸŸåè¯·æ±‚é‡å®šå‘åˆ° CDN ç³»ç»Ÿä¸­çš„æ™ºèƒ½ DNS è´Ÿè½½å‡è¡¡ç³»ç»Ÿã€‚<strong>æ™ºèƒ½ DNS è´Ÿè½½å‡è¡¡ç³»ç»Ÿé€šè¿‡ä¸€ç»„é¢„å…ˆå®šä¹‰å¥½çš„ç­–ç•¥ï¼ˆå¦‚å†…å®¹ç±»å‹ã€åœ°ç†åŒºåŸŸã€ç½‘ç»œè´Ÿè½½çŠ¶å†µç­‰ï¼‰ï¼Œå°†å½“æ—¶èƒ½å¤Ÿæœ€å¿«å“åº”ç”¨æˆ·çš„èŠ‚ç‚¹åœ°å€æä¾›ç»™ç”¨æˆ·ï¼Œä½¿ç”¨æˆ·å¯ä»¥å¾—åˆ°å¿«é€Ÿçš„æœåŠ¡</strong>ã€‚</p>
<p>åŒæ—¶ï¼Œå®ƒè¿˜ä¸åˆ†å¸ƒåœ¨ä¸åŒåœ°ç‚¹çš„æ‰€æœ‰ CDN èŠ‚ç‚¹ä¿æŒé€šä¿¡ï¼Œæœé›†å„èŠ‚ç‚¹çš„å¥åº·çŠ¶æ€ï¼Œç¡®ä¿ä¸å°†ç”¨æˆ·çš„è¯·æ±‚åˆ†é…åˆ°ä»»ä½•ä¸€ä¸ªå·²ç»ä¸å¯ç”¨çš„èŠ‚ç‚¹ä¸Šã€‚</p>
<blockquote>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a href="https://www.cnblogs.com/skynet/archive/2012/12/18/2824141.html" target="_blank" rel="noopener">CDN-å†…å®¹æ¨é€ç½‘ç»œ</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/39028766" target="_blank" rel="noopener">é—²è¯ CDN</a></li>
</ul>
</blockquote>
<h2 id="cdn-è®¿é—®æµç¨‹"><a class="markdownIt-Anchor" href="#cdn-è®¿é—®æµç¨‹"></a> CDN è®¿é—®æµç¨‹</h2>
<div align="center"><img src="http://dunwu.test.upcdn.net/snap/1559126750010.png!zp"/></div>
<ol>
<li>ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­è®¿é—®åŸŸåï¼ŒåŸŸåè§£æçš„è¯·æ±‚è¢«å‘å¾€ç½‘ç«™çš„ DNS åŸŸåè§£ææœåŠ¡å™¨ï¼›</li>
<li>ç”±äºç½‘ç«™çš„ DNS åŸŸåè§£ææœåŠ¡å™¨å¯¹æ­¤åŸŸåçš„è§£æè®¾ç½®äº† CNAMEï¼Œè¯·æ±‚è¢«æŒ‡å‘ CDN ç½‘ç»œä¸­çš„æ™ºèƒ½ DNS è´Ÿè½½å‡è¡¡ç³»ç»Ÿï¼›</li>
<li>æ™ºèƒ½ DNS è´Ÿè½½å‡è¡¡ç³»ç»Ÿå¯¹åŸŸåè¿›è¡Œæ™ºèƒ½è§£æï¼Œå°†å“åº”é€Ÿåº¦æœ€å¿«çš„èŠ‚ç‚¹ IP è¿”å›ç»™ç”¨æˆ·ï¼›æµè§ˆå™¨åœ¨å¾—åˆ°é€Ÿåº¦æœ€å¿«èŠ‚ç‚¹çš„ IP åœ°å€ä»¥åï¼Œå‘ CDN èŠ‚ç‚¹å‘å‡ºè®¿é—®è¯·æ±‚ï¼›</li>
<li>ç”±äºæ˜¯ç¬¬ä¸€æ¬¡è®¿é—®ï¼ŒCDN èŠ‚ç‚¹å°†å›åˆ°æºç«™å–ç”¨æˆ·è¯·æ±‚çš„æ•°æ®å¹¶å‘ç»™ç”¨æˆ·ï¼›</li>
<li>å½“æœ‰å…¶ä»–ç”¨æˆ·å†æ¬¡è®¿é—®åŒæ ·å†…å®¹æ—¶ï¼ŒCDN å°†ç›´æ¥å°†æ•°æ®è¿”å›ç»™å®¢æˆ·ï¼Œå®Œæˆè¯·æ±‚/æœåŠ¡è¿‡ç¨‹ã€‚</li>
</ol>
<p>åŒæ—¶ï¼Œå®ƒè¿˜ä¸åˆ†å¸ƒåœ¨ä¸åŒåœ°ç‚¹çš„æ‰€æœ‰ CDN èŠ‚ç‚¹ä¿æŒé€šä¿¡ï¼Œæœé›†å„èŠ‚ç‚¹çš„å¥åº·çŠ¶æ€ï¼Œç¡®ä¿ä¸å°†ç”¨æˆ·çš„è¯·æ±‚åˆ†é…åˆ°ä»»ä½•ä¸€ä¸ªå·²ç»ä¸å¯ç”¨çš„èŠ‚ç‚¹ä¸Šã€‚</p>
<blockquote>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a href="https://www.cnblogs.com/skynet/archive/2012/12/18/2824141.html" target="_blank" rel="noopener">CDN-å†…å®¹æ¨é€ç½‘ç»œ</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/39028766" target="_blank" rel="noopener">é—²è¯ CDN</a></li>
</ul>
</blockquote>
<h2 id="æ¨é€å’Œæ‹‰å–"><a class="markdownIt-Anchor" href="#æ¨é€å’Œæ‹‰å–"></a> æ¨é€å’Œæ‹‰å–</h2>
<p>CDN æœåŠ¡æœ‰æ¨é€å’Œæ‹‰å–ä¸¤ç§æ–¹å¼ï¼š</p>
<h3 id="cdn-æ¨é€"><a class="markdownIt-Anchor" href="#cdn-æ¨é€"></a> CDN æ¨é€</h3>
<p>å½“ä½ æœåŠ¡å™¨ä¸Šå†…å®¹å‘ç”Ÿå˜åŠ¨æ—¶ï¼Œæ¨é€ CDN æ¥å—æ–°å†…å®¹ã€‚ç›´æ¥æ¨é€ç»™ CDN å¹¶é‡å†™ URL åœ°å€ä»¥æŒ‡å‘ä½ çš„å†…å®¹çš„ CDN åœ°å€ã€‚ä½ å¯ä»¥é…ç½®å†…å®¹åˆ°æœŸæ—¶é—´åŠä½•æ—¶æ›´æ–°ã€‚å†…å®¹åªæœ‰åœ¨æ›´æ”¹æˆ–æ–°å¢æ˜¯æ‰æ¨é€ï¼Œæµé‡æœ€å°åŒ–ï¼Œä½†å‚¨å­˜æœ€å¤§åŒ–ã€‚</p>
<p>ä¼˜ç‚¹åœ¨äºèŠ‚çœæºç«™å¸¦å®½ï¼Œæå‰å°†è¦åˆ†å‘çš„å†…å®¹æ”¾åˆ° CDN èŠ‚ç‚¹ä¸Šäº†ï¼Œå½“æŸä¸ªæµé‡é«˜å³°æ¥ä¸´æ—¶ï¼Œä¸ä¼šæŠŠä½ çš„æºç«™å¸¦å®½å æ»¡ï¼ˆæºç«™è¿˜è¦ç•™ç‚¹å¸¦å®½æä¾›åŠ¨æ€ HTML å•Šï¼‰ã€‚</p>
<p>ç¼ºç‚¹æ˜¯éœ€è¦é’ˆå¯¹ CDN åšæ¥å£å¼€å‘ï¼Œåœ¨è¢«åˆ†å‘å†…å®¹ç”Ÿæˆæ—¶ä¸»åŠ¨ä¸Šä¼ ç»™ CDNã€‚</p>
<h3 id="cdn-æ‹‰å–"><a class="markdownIt-Anchor" href="#cdn-æ‹‰å–"></a> CDN æ‹‰å–</h3>
<p>CDN æ‹‰å–æ˜¯å½“ç¬¬ä¸€ä¸ªç”¨æˆ·è¯·æ±‚è¯¥èµ„æºæ—¶ï¼Œä»æœåŠ¡å™¨ä¸Šæ‹‰å–èµ„æºã€‚ä½ å°†å†…å®¹ç•™åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šå¹¶é‡å†™ URL æŒ‡å‘ CDN åœ°å€ã€‚ç›´åˆ°å†…å®¹è¢«ç¼“å­˜åœ¨ CDN ä¸Šä¸ºæ­¢ï¼Œè¿™æ ·è¯·æ±‚åªä¼šæ›´æ…¢ï¼Œ</p>
<p><a href="https://en.wikipedia.org/wiki/Time_to_live" target="_blank" rel="noopener">å­˜æ´»æ—¶é—´ï¼ˆTTLï¼‰</a>å†³å®šç¼“å­˜å¤šä¹…æ—¶é—´ã€‚CDN æ‹‰å–æ–¹å¼æœ€å°åŒ– CDN ä¸Šçš„å‚¨å­˜ç©ºé—´ï¼Œä½†å¦‚æœè¿‡æœŸæ–‡ä»¶å¹¶åœ¨å®é™…æ›´æ”¹ä¹‹å‰è¢«æ‹‰å–ï¼Œåˆ™ä¼šå¯¼è‡´å†—ä½™çš„æµé‡ã€‚</p>
<p>é«˜æµé‡ç«™ç‚¹ä½¿ç”¨ CDN æ‹‰å–æ•ˆæœä¸é”™ï¼Œå› ä¸ºåªæœ‰æœ€è¿‘è¯·æ±‚çš„å†…å®¹ä¿å­˜åœ¨ CDN ä¸­ï¼Œæµé‡æ‰èƒ½æ›´å¹³è¡¡åœ°åˆ†æ•£ã€‚</p>
<p>ä¼˜ç‚¹åœ¨äºå®ç°ç®€å•ã€‚</p>
<blockquote>
<p>å‚è€ƒï¼š<a href="https://segmentfault.com/q/1010000000119794" target="_blank" rel="noopener">æ¨é€å¼ä¸æ‹‰å–å¼ CDN æœåŠ¡çš„ä¼˜åŠ£é—®é¢˜</a></p>
</blockquote>
<h2 id="èµ„æº"><a class="markdownIt-Anchor" href="#èµ„æº"></a> èµ„æº</h2>
<ul>
<li>æ–‡ç« 
<ul>
<li><a href="https://en.wikipedia.org/wiki/Content_delivery_network" target="_blank" rel="noopener">Wikipedia - CDN</a></li>
<li><a href="https://www.cnblogs.com/skynet/archive/2012/12/18/2824141.html" target="_blank" rel="noopener">CDN-å†…å®¹æ¨é€ç½‘ç»œ</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/39028766" target="_blank" rel="noopener">é—²è¯ CDN</a></li>
<li><a href="https://www.cnblogs.com/losbyday/p/5843960.html" target="_blank" rel="noopener">CDN æŠ€æœ¯è¯¦è§£</a></li>
<li><a href="https://segmentfault.com/q/1010000000119794" target="_blank" rel="noopener">æ¨é€å¼ä¸æ‹‰å–å¼ CDN æœåŠ¡çš„ä¼˜åŠ£é—®é¢˜</a></li>
</ul>
</li>
<li>CDN èµ„æº
<ul>
<li><a href="https://staticfile.org/" target="_blank" rel="noopener">https://staticfile.org/</a></li>
<li><a href="https://unpkg.com/" target="_blank" rel="noopener">https://unpkg.com/</a></li>
<li><a href="https://cdnjs.com/" target="_blank" rel="noopener">https://cdnjs.com/</a></li>
<li><a href="https://github.com/ossrs/srs" target="_blank" rel="noopener">https://github.com/ossrs/srs</a></li>
<li><a href="https://github.com/jsdelivr/jsdelivr" target="_blank" rel="noopener">https://github.com/jsdelivr/jsdelivr</a></li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/blog/os/mac/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Zhang Peng">
      <meta itemprop="description" content="Dunwu's Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/os/mac/" class="post-title-link" itemprop="url">Mac å¸¸ç”¨æŠ€å·§æ€»ç»“</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-05-07 20:35:00" itemprop="dateCreated datePublished" datetime="2019-05-07T20:35:00+08:00">2019-05-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-08-10 09:56:46" itemprop="dateModified" datetime="2020-08-10T09:56:46+08:00">2020-08-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index">
                    <span itemprop="name">æ“ä½œç³»ç»Ÿ</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/blog/os/mac/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="os/mac/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>4.3k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>4 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="åŸºæœ¬æ“ä½œ"><a class="markdownIt-Anchor" href="#åŸºæœ¬æ“ä½œ"></a> åŸºæœ¬æ“ä½œ</h2>
<h3 id="è½¯ä»¶ç®¡ç†"><a class="markdownIt-Anchor" href="#è½¯ä»¶ç®¡ç†"></a> è½¯ä»¶ç®¡ç†</h3>
<p>dmg æ ¼å¼ï¼šåŒå‡»å®‰è£…åŒ…ï¼Œç„¶åæ‹–åˆ° applications æ–‡ä»¶å¤¹ä¸‹å³å¯ã€‚</p>
<h3 id="æµè§ˆå™¨"><a class="markdownIt-Anchor" href="#æµè§ˆå™¨"></a> æµè§ˆå™¨</h3>
<h4 id="æ›´æ”¹é»˜è®¤æœç´¢å¼•æ“"><a class="markdownIt-Anchor" href="#æ›´æ”¹é»˜è®¤æœç´¢å¼•æ“"></a> æ›´æ”¹é»˜è®¤æœç´¢å¼•æ“</h4>
<p>é€‰æ‹©ã€Œåå¥½è®¾ç½®â€“&gt;æœç´¢â€“&gt;æœç´¢å¼•æ“â€“&gt;Googleã€ã€‚</p>
<h4 id="å¯¼å…¥-chrome-æµè§ˆå™¨çš„ä¹¦ç­¾"><a class="markdownIt-Anchor" href="#å¯¼å…¥-chrome-æµè§ˆå™¨çš„ä¹¦ç­¾"></a> å¯¼å…¥ chrome æµè§ˆå™¨çš„ä¹¦ç­¾</h4>
<p>é€‰æ‹©ã€Œæ–‡ä»¶â€“&gt;å¯¼å…¥è‡ªâ€“&gt; Google Chromeã€ï¼Œç„¶åé€‰æ‹©è¦å¯¼å…¥çš„é¡¹ç›®ã€‚</p>
<h4 id="å¿«æ·é”®"><a class="markdownIt-Anchor" href="#å¿«æ·é”®"></a> å¿«æ·é”®</h4>
<p>Command + R åˆ·æ–°</p>
<h4 id="ä¸Šæ–¹æ˜¾ç¤ºä¹¦ç­¾æ æ”¶è—æ "><a class="markdownIt-Anchor" href="#ä¸Šæ–¹æ˜¾ç¤ºä¹¦ç­¾æ æ”¶è—æ "></a> ä¸Šæ–¹æ˜¾ç¤ºä¹¦ç­¾æ ï¼æ”¶è—æ </h4>
<p>é€‰æ‹©ã€Œæ˜¾ç¤ºâ€“&gt; æ˜¾ç¤ºä¸ªäººæ”¶è—æ ã€ã€‚</p>
<h4 id="å…³é—­è½¯ä»¶çš„å³ä¸Šè§’é€šçŸ¥"><a class="markdownIt-Anchor" href="#å…³é—­è½¯ä»¶çš„å³ä¸Šè§’é€šçŸ¥"></a> å…³é—­è½¯ä»¶çš„å³ä¸Šè§’é€šçŸ¥</h4>
<p>åœ¨ Mac ç³»ç»Ÿä¸­æœ‰å¯¹é€šçŸ¥çš„è®¾ç½®ï¼Œæ‰“å¼€ç³»ç»Ÿåå¥½è®¾ç½® â€” é€šçŸ¥ æ‰¾åˆ° QQï¼Œç„¶åå°† QQ æç¤ºæ ·å¼è®¾ç½®æˆæ— å³å¯ã€‚</p>
<h4 id="å¤åˆ¶æ–‡ä»¶æ–‡ä»¶å¤¹è·¯å¾„"><a class="markdownIt-Anchor" href="#å¤åˆ¶æ–‡ä»¶æ–‡ä»¶å¤¹è·¯å¾„"></a> å¤åˆ¶æ–‡ä»¶/æ–‡ä»¶å¤¹è·¯å¾„</h4>
<ul>
<li>OS X 10.11 ç³»ç»Ÿï¼Œé€‰ä¸­æ–‡ä»¶å¤¹ï¼Œã€Œcmd +Option +cã€ å¤åˆ¶æ–‡ä»¶å¤¹è·¯å¾„ï¼Œcmd+v ç²˜è´´ã€‚<br />
ä¹‹å‰çš„ç³»ç»Ÿï¼Œåˆ©ç”¨ Administrator åˆ›å»ºä¸€ä¸ªåˆ°å³é”®èœå•ï¼Œç„¶ååˆ°è®¾ç½®é‡Œé¢è®¾ç½®å¿«æ·é”®ã€‚å…·ä½“æ“ä½œè¯·ç™¾åº¦ã€‚</li>
</ul>
<h4 id="æ‰“å¼€æ¥è‡ªèº«ä»½ä¸æ˜çš„å¼€å‘è€…çš„åº”ç”¨ç¨‹åº"><a class="markdownIt-Anchor" href="#æ‰“å¼€æ¥è‡ªèº«ä»½ä¸æ˜çš„å¼€å‘è€…çš„åº”ç”¨ç¨‹åº"></a> æ‰“å¼€æ¥è‡ªèº«ä»½ä¸æ˜çš„å¼€å‘è€…çš„åº”ç”¨ç¨‹åº</h4>
<p>åœ¨åº”ç”¨ç¨‹åºæ–‡ä»¶å¤¹ï¼ŒæŒ‰ä½ control é”®çš„åŒæ—¶æ‰“å¼€åº”ç”¨ç¨‹åºã€‚</p>
<h4 id="å¤åˆ¶æ–‡ä»¶è·¯å¾„"><a class="markdownIt-Anchor" href="#å¤åˆ¶æ–‡ä»¶è·¯å¾„"></a> å¤åˆ¶æ–‡ä»¶è·¯å¾„</h4>
<ul>
<li>
<p>é€‰æ‹©æ–‡ä»¶ï¼æ–‡ä»¶å¤¹æŒ‰ Command+C å¤åˆ¶ï¼Œåœ¨ç»ˆç«¯ä¸­ Command+V ç²˜è´´å³å¯ã€‚</p>
</li>
<li>
<p>å¦‚æœåªæ˜¯æƒ³åœ¨ Finder ä¸­çœ‹åˆ°æ–‡ä»¶çš„è·¯å¾„, å¹¶æ–¹ä¾¿åˆ‡æ¢å±‚çº§, Finder å†…ç½®äº†ã€Œæ˜¾ç¤ºè·¯å¾„æ ã€çš„åŠŸèƒ½, å¹¶é…ç½®äº†å¿«æ·é”®(Option+Cmd+P). å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
</li>
</ul>
<p>20161124-184148.png</p>
<p>å‚è€ƒé“¾æ¥ï¼š</p>
<ul>
<li>[<a href="https://www.zhihu.com/question/22883229" target="_blank" rel="noopener">https://www.zhihu.com/question/22883229</a>]</li>
</ul>
<h3 id="éšè—å’Œå–æ¶ˆéšè—-mac-app-store-ä¸­çš„å·²è´­é¡¹ç›®"><a class="markdownIt-Anchor" href="#éšè—å’Œå–æ¶ˆéšè—-mac-app-store-ä¸­çš„å·²è´­é¡¹ç›®"></a> éšè—å’Œå–æ¶ˆéšè— Mac App Store ä¸­çš„å·²è´­é¡¹ç›®</h3>
<h3 id="mac-åŒæ—¶ç™»é™†ä¸¤ä¸ª-qq"><a class="markdownIt-Anchor" href="#mac-åŒæ—¶ç™»é™†ä¸¤ä¸ª-qq"></a> Mac åŒæ—¶ç™»é™†ä¸¤ä¸ª QQ</h3>
<p>åœ¨å·²ç»æ‰“å¼€çš„ QQ ä¸­ï¼ŒæŒ‰ä½ã€Œcommand + Nã€å³å¯ã€‚</p>
<h2 id="ç³»ç»Ÿä¾¿å¥½è®¾ç½®"><a class="markdownIt-Anchor" href="#ç³»ç»Ÿä¾¿å¥½è®¾ç½®"></a> ç³»ç»Ÿä¾¿å¥½è®¾ç½®</h2>
<h3 id="è¯­éŸ³æ’­æŠ¥"><a class="markdownIt-Anchor" href="#è¯­éŸ³æ’­æŠ¥"></a> è¯­éŸ³æ’­æŠ¥</h3>
<p>æ‰“å¼€ã€Œç³»ç»Ÿä¾¿å¥½è®¾ç½®â€“&gt;è¾…åŠ©åŠŸèƒ½â€“&gt;è¯­éŸ³ã€ï¼Œå³å¯è®¾ç½®ä¸åŒå›½å®¶çš„è¯­è¨€ã€‚</p>
<p>å‹¾é€‰ä¸Šå›¾ä¸­çš„çº¢æ¡†éƒ¨åˆ†ï¼Œå¯ä»¥è®¾ç½®å…¨å±€å¿«æ·é”®ã€‚è¿™æ ·çš„è¯ï¼Œåœ¨ä»»ä½•ä¸€ä¸ªè½¯ä»¶å½“ä¸­ï¼ŒæŒ‰ä¸‹ã€Œ option+escã€æ—¶ï¼Œå°±ä¼šæœ—è¯»é€‰ä¸­çš„æ–‡æœ¬ã€‚</p>
<h3 id="è°ƒæ•´å­—ä½“å¤§å°"><a class="markdownIt-Anchor" href="#è°ƒæ•´å­—ä½“å¤§å°"></a> è°ƒæ•´å­—ä½“å¤§å°</h3>
<p>Mac è°ƒæ•´å­—ä½“å¤§å°ï¼šã€Œç³»ç»Ÿåå¥½è®¾ç½® -&gt; æ˜¾ç¤ºå™¨ -&gt; ç¼©æ”¾ã€ã€‚å¦‚ä¸‹å›¾ï¼š</p>
<h3 id="å¦‚ä½•åˆ†åˆ«è®¾ç½®-mac-çš„é¼ æ ‡å’Œè§¦æ§æ¿çš„æ»šåŠ¨æ–¹å‘"><a class="markdownIt-Anchor" href="#å¦‚ä½•åˆ†åˆ«è®¾ç½®-mac-çš„é¼ æ ‡å’Œè§¦æ§æ¿çš„æ»šåŠ¨æ–¹å‘"></a> å¦‚ä½•åˆ†åˆ«è®¾ç½® Mac çš„é¼ æ ‡å’Œè§¦æ§æ¿çš„æ»šåŠ¨æ–¹å‘</h3>
<p>å¾ˆå¤šäººä¹ æƒ¯é¼ æ ‡ä½¿ç”¨ç›¸åçš„æ»šåŠ¨æ–¹å‘ï¼Œè€Œè§¦æ§æ¿ç±»ä¼¼ iPad é‚£æ ·çš„è‡ªç„¶æ»šåŠ¨ï¼Œé—®å¦‚ä½•è®¾ç½®ï¼Œå½“æ—¶æˆ‘çš„å›ç­”æ˜¯ä¸çŸ¥é“ï¼Œå› ä¸ºç›®å‰ OS X çš„ç³»ç»Ÿè®¾ç½®é‡Œï¼Œé¼ æ ‡å’Œè§¦æ§æ¿çš„è®¾ç½®æ˜¯ç»Ÿä¸€<br />
çš„ã€‚ä»Šå¤©å‘ç°äº†ä¸€ä¸ªå…è´¹çš„è½¯ä»¶ Scroll Reverserï¼Œå¯ä»¥å®ç°é¼ æ ‡å’Œè§¦æ§æ¿çš„åˆ†åˆ«è®¾ç½®ã€‚ä¸‹è½½åœ°å€ï¼š<a href="https://pilotmoon.com/scrollreverser/" target="_blank" rel="noopener">https://pilotmoon.com/scrollreverser/</a><br />
å¯åŠ¨åç¨‹åºæ˜¾ç¤ºåœ¨é¡¶éƒ¨èœå•æ ï¼Œè®¾ç½®ç®€å•æ˜äº†ï¼Œæœ‰éœ€è¦çš„ç”¨æˆ·ä½“éªŒä¸€ä¸‹å§ã€‚</p>
<h3 id="touch-bar-è‡ªå®šä¹‰"><a class="markdownIt-Anchor" href="#touch-bar-è‡ªå®šä¹‰"></a> Touch Bar è‡ªå®šä¹‰</h3>
<p>æ‰“å¼€ã€Œç³»ç»Ÿåå¥½è®¾ç½®-é”®ç›˜ã€ï¼Œä¸‹é¢æœ‰ä¸ªè‡ªå®šä¹‰æ§åˆ¶æ¡ã€‚</p>
<h3 id="è‰²æ¸©è°ƒèŠ‚å¤œé—´æ¨¡å¼"><a class="markdownIt-Anchor" href="#è‰²æ¸©è°ƒèŠ‚å¤œé—´æ¨¡å¼"></a> è‰²æ¸©è°ƒèŠ‚ï¼šå¤œé—´æ¨¡å¼</h3>
<p>iOS9.3 çš„æœ€æ˜æ˜¾å˜åŒ–ï¼Œè«è¿‡äºè‹¹æœåœ¨å‘å¸ƒä¼šä¸Šç‰¹æ„æåˆ°çš„ Night Shift å¤œé—´æŠ¤çœ¼æ¨¡å¼ã€‚</p>
<h3 id="icloud-é‚®ç®±"><a class="markdownIt-Anchor" href="#icloud-é‚®ç®±"></a> iCloud é‚®ç®±</h3>
<p>å¦‚æœæ‚¨ç”¨äºè®¾ç½® iCloud çš„ Apple ID ä¸ä»¥â€œ@icloud.comâ€ã€â€œ@me.comâ€æˆ–â€œ@mac.comâ€ç»“å°¾ï¼Œæ‚¨å¿…é¡»å…ˆè®¾ç½®ä¸€ä¸ªâ€œ@icloud.comâ€ç”µå­é‚®ä»¶åœ°å€ï¼Œç„¶åæ‰èƒ½ä½¿ç”¨ iCloudâ€œé‚®ä»¶â€ã€‚</p>
<p>å¦‚æœæ‚¨æ‹¥æœ‰ä»¥â€œ@mac.comâ€æˆ–â€œ@me.comâ€ç»“å°¾çš„ç”µå­é‚®ä»¶åœ°å€ï¼Œåˆ™æ‚¨å·²ç»æ‹¥æœ‰äº†åç§°ç›¸åŒä½†ä»¥â€œ@icloud.comâ€ç»“å°¾çš„ç­‰æ•ˆåœ°å€ã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„ç”µå­é‚®ä»¶åˆ«åä»¥â€œ@mac.comâ€æˆ–â€œ@me.comâ€ç»“å°¾ï¼Œæ‚¨ä¹Ÿå°†æ‹¥æœ‰ä»¥â€œ@icloud.comâ€ç»“å°¾çš„ç­‰æ•ˆåœ°å€ã€‚</p>
<p><strong>æ“ä½œå¦‚ä¸‹ï¼š</strong></p>
<ul>
<li>
<p>åœ¨ iOS è®¾å¤‡ä¸Šï¼Œå‰å¾€â€œè®¾ç½®â€&gt;â€œiCloudâ€ï¼Œå¼€å¯â€œé‚®ä»¶â€ï¼Œç„¶åæŒ‰ç…§å±å¹•ä¸Šçš„è¯´æ˜æ“ä½œã€‚</p>
</li>
<li>
<p>åœ¨ Mac ä¸Šï¼Œé€‰å– Apple èœå• &gt;â€œç³»ç»Ÿåå¥½è®¾ç½®â€ï¼Œç‚¹æŒ‰â€œiCloudâ€ï¼Œå†é€‰æ‹©â€œé‚®ä»¶â€ï¼Œç„¶åæŒ‰ç…§å±å¹•ä¸Šçš„è¯´æ˜æ“ä½œã€‚</p>
</li>
</ul>
<p>PSï¼šåˆ›å»º iCloud ç”µå­é‚®ä»¶åœ°å€åï¼Œæ‚¨æ— æ³•å¯¹å…¶è¿›è¡Œæ›´æ”¹ã€‚</p>
<p>è®¾ç½® @icloud.com ç”µå­é‚®ä»¶åœ°å€åå³å¯ç”¨å…¶ç™»å½• iCloudã€‚æ‚¨ä¹Ÿå¯ä»¥ç”¨åˆ›å»º iCloud å¸æˆ·æ—¶æ‰€ç”¨çš„ Apple ID ç™»å½•ã€‚</p>
<p>æ‚¨å¯ä»¥ä»ä»¥ä¸‹ä»»æ„åœ°å€å‘é€ iCloud ç”µå­é‚®ä»¶ï¼š</p>
<p>æ‚¨çš„ iCloud ç”µå­é‚®ä»¶åœ°å€ï¼ˆæ‚¨çš„å¸å·åç§°@icloud.comï¼‰</p>
<p>åˆ«å</p>
<p>å‚è€ƒé“¾æ¥ï¼š</p>
<p><strong>ç›´æ¥æ³¨å†Œä»¥@icloud.com ç»“å°¾çš„ Apple IDï¼š</strong></p>
<p>å‚è€ƒé“¾æ¥ï¼š</p>
<h2 id="podcast"><a class="markdownIt-Anchor" href="#podcast"></a> PodCast</h2>
<p>PodCast ä¸­æ–‡ç¿»è¯‘ä¸ºæ’­å®¢ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„éŸ³é¢‘ or è§†é¢‘èŠ‚ç›®ã€‚PodCast è¿™ä¸ªå•è¯æ˜¯ç”± iPod+Broadcast è¿™ä¸¤ä¸ªå•è¯ç»„æˆçš„ã€‚</p>
<p>PodCast å¯ä»¥åœ¨ iTunes ä¸­æ”¶å¬ã€‚</p>
<h2 id="others"><a class="markdownIt-Anchor" href="#others"></a> others</h2>
<h3 id="è¯å…¸"><a class="markdownIt-Anchor" href="#è¯å…¸"></a> è¯å…¸</h3>
<p>ç³»ç»Ÿæœ‰ä¸€ä¸ªè‡ªå¸¦åº”ç”¨ã€Œè¯å…¸ã€ï¼Œå¯ä»¥è¿›è¡Œå•è¯çš„æŸ¥è¯¢ã€‚</p>
<h3 id="å¦‚ä½•è§£å†³-mac-è½¯ä»¶dmgakpappå‡ºç°ç¨‹åºå·²æŸåçš„æç¤º"><a class="markdownIt-Anchor" href="#å¦‚ä½•è§£å†³-mac-è½¯ä»¶dmgakpappå‡ºç°ç¨‹åºå·²æŸåçš„æç¤º"></a> å¦‚ä½•è§£å†³ MAC è½¯ä»¶ï¼ˆdmgï¼Œakpï¼Œappï¼‰å‡ºç°ç¨‹åºå·²æŸåçš„æç¤º</h3>
<p>ã€Œxxx.app å·²æŸå,æ‰“ä¸å¼€.ä½ åº”è¯¥å°†å®ƒç§»åˆ°åºŸçº¸ç¯“ã€ï¼Œå¹¶éä½ å®‰è£…çš„è½¯ä»¶å·²æŸåï¼Œè€Œæ˜¯ Mac ç³»ç»Ÿçš„å®‰å…¨è®¾ç½®é—®é¢˜ï¼Œå› ä¸ºè¿™äº›åº”ç”¨éƒ½æ˜¯ç ´è§£æˆ–è€…æ±‰åŒ–çš„,é‚£ä¹ˆè§£å†³æ–¹æ³•å°±æ˜¯ä¸´æ—¶æ”¹å˜ Mac ç³»ç»Ÿå®‰å…¨è®¾ç½®ã€‚</p>
<p>å‡ºç°è¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ³•ï¼šä¿®æ”¹ç³»ç»Ÿé…ç½®ï¼šç³»ç»Ÿåå¥½è®¾ç½®â€¦ -&gt; å®‰å…¨æ€§ä¸éšç§ã€‚ä¿®æ”¹ä¸ºä»»ä½•æ¥æºã€‚</p>
<p>å¦‚æœæ²¡æœ‰è¿™ä¸ªé€‰é¡¹çš„è¯ï¼ˆmacOS Sierra 10.12ï¼‰,æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo spctl --master-disable</span><br></pre></td></tr></table></figure>
<p>å³å¯ã€‚</p>
<p>å‚è€ƒé“¾æ¥ï¼š</p>
<ul>
<li>
<p><a href="http://www.jianshu.com/p/379b49b88df9" target="_blank" rel="noopener">Max OS-[xxx.app å·²æŸå,æ‰“ä¸å¼€.ä½ åº”è¯¥å°†å®ƒç§»åˆ°åºŸçº¸ç¯“]</a></p>
</li>
<li>
<p><a href="http://www.yunrui.co/25693.html" target="_blank" rel="noopener">å¦‚ä½•è§£å†³ MAC è½¯ä»¶ï¼ˆdmgï¼Œakpï¼Œappï¼‰å‡ºç°ç¨‹åºå·²æŸåçš„æç¤º</a></p>
</li>
</ul>
<p>å¤‡æ³¨ï¼šè¿™ä¸ªé“¾æ¥é‡Œçš„å„ç§èµ„æºéƒ½å¾ˆä¸é”™å•Šã€‚</p>
<h4 id="ç»ˆç«¯"><a class="markdownIt-Anchor" href="#ç»ˆç«¯"></a> ç»ˆç«¯</h4>
<h4 id="åœ¨-finder-çš„å½“å‰ç›®å½•æ‰“å¼€ç»ˆç«¯"><a class="markdownIt-Anchor" href="#åœ¨-finder-çš„å½“å‰ç›®å½•æ‰“å¼€ç»ˆç«¯"></a> åœ¨ Finder çš„å½“å‰ç›®å½•æ‰“å¼€ç»ˆç«¯</h4>
<p>åœ¨ Finder æ‰“å¼€ terminal ç»ˆç«¯è¿™ä¸ªåŠŸèƒ½å…¶å®æ˜¯æœ‰çš„ï¼Œä½†æ˜¯ç³»ç»Ÿé»˜è®¤æ²¡æœ‰æ‰“å¼€ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹æ³•å°†å…¶æ‰“å¼€ï¼š</p>
<p>è¿›å…¥ç³»ç»Ÿåå¥½è®¾ç½®-&gt;é”®ç›˜-&gt;å¿«æ·é”®-&gt;æœåŠ¡ã€‚</p>
<p>åœ¨å³è¾¹æ–°å»ºä½äºæ–‡ä»¶å¤¹ä½ç½®çš„ç»ˆç«¯çª—å£ä¸Šæ‰“å‹¾ã€‚</p>
<p>å¦‚æ­¤è®¾ç½®åï¼Œåœ¨ Finder ä¸­å³å‡»æŸæ–‡ä»¶ï¼Œåœ¨å‡ºç°çš„èœå•ä¸­æ‰¾åˆ°æœåŠ¡ï¼Œç„¶åç‚¹å‡»æ–°å»ºä½äºæ–‡ä»¶å¤¹ä½ç½®çš„ç»ˆç«¯çª—å£å³å¯ï¼</p>
<h2 id="mac-å¸¸ç”¨å¿«æ·é”®"><a class="markdownIt-Anchor" href="#mac-å¸¸ç”¨å¿«æ·é”®"></a> Mac å¸¸ç”¨å¿«æ·é”®</h2>
<h3 id="finder"><a class="markdownIt-Anchor" href="#finder"></a> Finder</h3>
<table>
<thead>
<tr>
<th style="text-align:left">å¿«æ·é”®</th>
<th style="text-align:left">ä½œç”¨</th>
<th style="text-align:left">å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Shift + Command + G</td>
<td style="text-align:left">å‰å¾€æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶å¤¹</td>
<td style="text-align:left">åŒ…æ‹¬éšè—æ–‡ä»¶å¤¹</td>
</tr>
<tr>
<td style="text-align:left">Shift + Command + .</td>
<td style="text-align:left">æ˜¾ç¤ºéšè—æ–‡ä»¶ã€æ–‡ä»¶å¤¹</td>
<td style="text-align:left">å†æŒ‰ä¸€æ¬¡ï¼Œæ¢å¤éšè—</td>
</tr>
<tr>
<td style="text-align:left">Command + â†‘</td>
<td style="text-align:left">è¿”å›ä¸Šä¸€å±‚</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">Command + â†“</td>
<td style="text-align:left">è¿›å…¥å½“å‰æ–‡ä»¶å¤¹</td>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<h3 id="ç¼–è¾‘"><a class="markdownIt-Anchor" href="#ç¼–è¾‘"></a> ç¼–è¾‘</h3>
<p><strong>åˆ é™¤æ–‡å­—</strong>ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:left">å¿«æ·é”®</th>
<th style="text-align:left">ä½œç”¨</th>
<th style="text-align:left">å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">delete</td>
<td style="text-align:left">åˆ é™¤å…‰æ ‡çš„å‰ä¸€ä¸ªå­—ç¬¦</td>
<td style="text-align:left">ç›¸å½“äº Windows é”®ç›˜ä¸Šçš„é€€æ ¼é”®</td>
</tr>
<tr>
<td style="text-align:left">fn + delete</td>
<td style="text-align:left">åˆ é™¤å…‰æ ‡çš„åä¸€ä¸ªå­—ç¬¦</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">option + delete</td>
<td style="text-align:left">åˆ é™¤å…‰æ ‡ä¹‹å‰çš„ä¸€ä¸ªå•è¯</td>
<td style="text-align:left">è‹±æ–‡æœ‰æ•ˆ</td>
</tr>
<tr>
<td style="text-align:left"><strong>command + delete</strong></td>
<td style="text-align:left">åˆ é™¤å…‰æ ‡ä¹‹å‰çš„æ•´è¡Œå†…å®¹</td>
<td style="text-align:left">ã€èã€‘</td>
</tr>
<tr>
<td style="text-align:left">command + delete</td>
<td style="text-align:left">åœ¨ finder ä¸­åˆ æ‰è¯¥æ–‡ä»¶</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">shift + command + delete</td>
<td style="text-align:left">æ¸…ç©ºå›æ”¶ç«™</td>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p><strong>å‰ªåˆ‡æ–‡ä»¶</strong>ï¼š</p>
<p>é¦–å…ˆé€‰ä¸­æ–‡ä»¶ï¼ŒæŒ‰ Command+C å¤åˆ¶æ–‡ä»¶ï¼›ç„¶åæŒ‰ã€ŒCommand ï¼‹ Option ï¼‹ Vã€å‰ªåˆ‡æ–‡ä»¶ã€‚</p>
<p>å¤‡æ³¨ï¼šCommand+X åªèƒ½å‰ªåˆ‡æ–‡å­—æ–‡æœ¬ï¼Œä¸è¦æ··æ·†äº†ã€‚</p>
<h2 id="mac-ç”¨æˆ·å¿…é¡»çŸ¥é“çš„-15-ç»„å¿«æ·é”®"><a class="markdownIt-Anchor" href="#mac-ç”¨æˆ·å¿…é¡»çŸ¥é“çš„-15-ç»„å¿«æ·é”®"></a> Mac ç”¨æˆ·å¿…é¡»çŸ¥é“çš„ 15 ç»„å¿«æ·é”®</h2>
<blockquote>
<p>å‚è€ƒé“¾æ¥ï¼š<a href="http://v.youku.com/v_show/id_XNDE4MzM0NDgw.html" target="_blank" rel="noopener">ã€Šè½»æ¾ç© Macã€‹ç¬¬ 6 æœŸï¼šMac ç”¨æˆ·å¿…é¡»çŸ¥é“çš„ 15 ç»„å¿«æ·é”®</a></p>
</blockquote>
<h3 id="spaceé”®å¿«é€Ÿé¢„è§ˆ"><a class="markdownIt-Anchor" href="#spaceé”®å¿«é€Ÿé¢„è§ˆ"></a> ã€Œspaceã€é”®ï¼šå¿«é€Ÿé¢„è§ˆ</h3>
<p>é€‰ä¸­æ–‡ä»¶åï¼Œ ä¸éœ€è¦å¯åŠ¨ä»»ä½•åº”ç”¨ç¨‹åºï¼Œä½¿ç”¨ã€Œspaceã€ç©ºæ ¼é”®å¯è¿›è¡Œå¿«é€Ÿé¢„è§ˆï¼Œå†æ¬¡æŒ‰ä¸‹ã€Œspaceã€ç©ºæ ¼é”®å–æ¶ˆé¢„è§ˆã€‚</p>
<p>å¯ä»¥é¢„è§ˆ mp3ã€è§†é¢‘ã€pdf ç­‰æ–‡ä»¶ã€‚</p>
<p>æˆ‘ä»¬è¿˜å¯ä»¥<strong>é€‰ä¸­å¤šå¼ å›¾ç‰‡</strong>ï¼Œ ç„¶åæŒ‰ã€Œspaceã€é”®ï¼Œå°±å¯ä»¥åŒæ—¶å¯¹æ¯”é¢„è§ˆå¤šå¼ å›¾ç‰‡ã€‚è¿™ä¸€ç‚¹ï¼Œå¾ˆèµã€‚</p>
<h3 id="æ”¹å"><a class="markdownIt-Anchor" href="#æ”¹å"></a> æ”¹å</h3>
<p>é€‰ä¸­æ–‡ä»¶/æ–‡ä»¶å¤¹åï¼ŒæŒ‰ enter é”®ï¼Œå°±å¯ä»¥æ”¹åäº†ã€‚</p>
<h3 id="command-ié”®æŸ¥çœ‹æ–‡ä»¶å±æ€§"><a class="markdownIt-Anchor" href="#command-ié”®æŸ¥çœ‹æ–‡ä»¶å±æ€§"></a> ã€Œcommand + Iã€é”®ï¼šæŸ¥çœ‹æ–‡ä»¶å±æ€§</h3>
<ul>
<li>
<p>é€‰ä¸­æ–‡ä»¶åï¼ŒæŒ‰ã€Œcommand + Iã€é”®ï¼Œå¯ä»¥æŸ¥çœ‹æ–‡ä»¶çš„å„ç§å±æ€§ã€‚</p>
</li>
<li>
<p>é€‰ä¸­<strong>æ–‡ä»¶å¤¹</strong>åï¼ŒæŒ‰ã€Œcommand + Iã€é”®ï¼Œå¯ä»¥æŸ¥çœ‹æ–‡ä»¶å¤¹çš„å¤§å°ã€‚ã€èã€‘</p>
</li>
</ul>
<h3 id="åˆ‡æ¢è¾“å…¥æ³•"><a class="markdownIt-Anchor" href="#åˆ‡æ¢è¾“å…¥æ³•"></a> åˆ‡æ¢è¾“å…¥æ³•</h3>
<p>ã€Œcontrol + spaceã€</p>
<h3 id="æ‰“å¼€-spotlight-æœç´¢æ¡†"><a class="markdownIt-Anchor" href="#æ‰“å¼€-spotlight-æœç´¢æ¡†"></a> æ‰“å¼€ spotlight æœç´¢æ¡†</h3>
<p>spotlight æ˜¯ç³»ç»Ÿè‡ªå¸¦çš„è½¯ä»¶ï¼Œæœç´¢åŠŸèƒ½ä¸æ˜¯å¾ˆå¼ºå¤§ã€‚æˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šç”¨ç¬¬ä¸‰æ–¹çš„ Alfred è½¯ä»¶ã€‚</p>
<h3 id="ç¼–è¾‘ç›¸å…³"><a class="markdownIt-Anchor" href="#ç¼–è¾‘ç›¸å…³"></a> ç¼–è¾‘ç›¸å…³</h3>
<p>Cmd+Cã€Cmd+Vã€Cmd+Xã€Cmd+Aã€Cmd+Zã€‚</p>
<h3 id="ç¿»é¡µå’Œå…‰æ ‡"><a class="markdownIt-Anchor" href="#ç¿»é¡µå’Œå…‰æ ‡"></a> ç¿»é¡µå’Œå…‰æ ‡</h3>
<ul>
<li>
<p>ã€Œcontrol + â†‘ã€ï¼šå°†å…‰æ ‡å®šä½åˆ°æ–‡ç« çš„æœ€å¼€å¤´ï¼ˆç¿»é¡µåˆ°æ–‡æ¡£çš„æœ€ä¸Šæ–¹ï¼‰</p>
</li>
<li>
<p>ã€Œcontrol + â†“ã€ï¼šå°†å…‰æ ‡å®šä½åˆ°æ–‡ç« çš„æœ€æœ«å°¾ï¼ˆç¿»é¡µåˆ°æ–‡æ¡£çš„æœ€ä¸‹æ–¹ï¼‰</p>
</li>
<li>
<p>ã€Œcontrol + â†ã€ï¼šå°†å…‰æ ‡å®šä½åˆ°å½“å‰è¡Œçš„æœ€å·¦ä¾§</p>
</li>
<li>
<p>ã€Œcontrol + â†’ã€ï¼šå°†å…‰æ ‡å®šä½åˆ°å½“å‰è¡Œçš„æœ€å³ä¾§</p>
</li>
</ul>
<h3 id="command-shift-yå°†æ–‡å­—å¿«é€Ÿä¿å­˜åˆ°ä¾¿ç¬º"><a class="markdownIt-Anchor" href="#command-shift-yå°†æ–‡å­—å¿«é€Ÿä¿å­˜åˆ°ä¾¿ç¬º"></a> ã€Œcommand + shift + Yã€ï¼šå°†æ–‡å­—å¿«é€Ÿä¿å­˜åˆ°ä¾¿ç¬º</h3>
<p>é€‰ä¸­ä½ æƒ³è¦çš„å†…å®¹ï¼ˆä¾‹å¦‚æ–‡å­—ã€é“¾æ¥ç­‰ï¼‰ï¼Œç„¶åæŒ‰ä¸‹ command + shift + Yã€ï¼Œé‚£ä¹ˆä½ é€‰ä¸­çš„å†…å®¹å°±ä¼šå¿«é€Ÿä¿å­˜åˆ°ç³»ç»Ÿè‡ªå¸¦çš„ã€Œä¾¿ç¬ºã€è½¯ä»¶ä¸­ã€‚</p>
<p>å¦‚æœä½ æƒ³ä¸´æ—¶æ€§çš„ä¿å­˜ä¸€æ®µå†…å®¹ï¼Œè¿™ä¸ªæ“ä½œå¾ˆå®ç”¨ã€‚</p>
<h3 id="ç¨‹åºç›¸å…³"><a class="markdownIt-Anchor" href="#ç¨‹åºç›¸å…³"></a> ç¨‹åºç›¸å…³</h3>
<ul>
<li>
<p>ã€Œcommand + Qã€ï¼šå¿«é€Ÿé€€å‡ºç¨‹åº</p>
</li>
<li>
<p>ã€Œcommand + tabã€ï¼šåˆ‡æ¢ç¨‹åº</p>
</li>
<li>
<p>ã€Œcommand + Hã€ï¼šéšè—å½“å‰åº”ç”¨ç¨‹åºã€‚è¿™æ˜¯ä¸€ä¸ªæœ‰è¶£çš„å¿«æ·é”®ã€‚</p>
</li>
<li>
<p>ã€Œcommand + ï¼Œã€ï¼šæ‰“å¼€å½“å‰åº”ç”¨ç¨‹åºçš„ã€Œåå¥½è®¾ç½®ã€ã€‚</p>
</li>
</ul>
<h3 id="çª—å£ç›¸å…³"><a class="markdownIt-Anchor" href="#çª—å£ç›¸å…³"></a> çª—å£ç›¸å…³</h3>
<ul>
<li>
<p>ã€Œcommand + Nã€ï¼šæ–°å»ºä¸€ä¸ªå½“å‰åº”ç”¨ç¨‹åºçš„çª—å£</p>
</li>
<li>
<p>ã€Œcommand + `ã€ï¼šåœ¨å½“å‰åº”ç”¨ç¨‹åºçš„ä¸åŒçª—å£ä¹‹é—´åˆ‡æ¢ã€å¾ˆå®ç”¨ã€‘</p>
</li>
</ul>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œã€Œcommand + tabã€æ˜¯åœ¨ä¸åŒçš„è½¯ä»¶ä¹‹é—´åˆ‡æ¢ã€‚ä½†ä½ ä¸çŸ¥é“çš„æ˜¯ï¼Œã€Œcommand + `ã€æ˜¯åœ¨åŒä¸€ä¸ªè½¯ä»¶çš„ä¸åŒçª—å£ä¹‹é—´åˆ‡æ¢ã€‚</p>
<ul>
<li>
<p>ã€Œcommand + Mã€ï¼šå°†å½“å‰çª—å£æœ€å°åŒ–</p>
</li>
<li>
<p>ã€Œcommand + Wã€ï¼šå…³é—­å½“å‰çª—å£</p>
</li>
</ul>
<h3 id="æµè§ˆå™¨ç›¸å…³"><a class="markdownIt-Anchor" href="#æµè§ˆå™¨ç›¸å…³"></a> æµè§ˆå™¨ç›¸å…³</h3>
<ul>
<li>
<p>ã€Œcommand + Tã€ï¼šæµè§ˆå™¨ä¸­ï¼Œæ–°å»ºä¸€ä¸ªæ ‡ç­¾</p>
</li>
<li>
<p>ã€Œcommand + Wã€ï¼šå…³é—­å½“å‰æ ‡ç­¾</p>
</li>
</ul>
<ul>
<li>ã€Œcommand + Rã€ï¼šå¼ºåˆ¶åˆ·æ–°ã€‚</li>
</ul>
<ul>
<li>ã€Œcommand + Lã€ï¼šå®šä½åˆ°åœ°å€æ ã€‚ã€é‡è¦ã€‘</li>
</ul>
<h3 id="æˆªå›¾ç›¸å…³"><a class="markdownIt-Anchor" href="#æˆªå›¾ç›¸å…³"></a> æˆªå›¾ç›¸å…³</h3>
<ul>
<li>ã€Œcommand + shift + 3ã€ï¼šæˆªå…¨å±ï¼ˆå¯¹æ•´ä¸ªå±å¹•æˆªå›¾ï¼‰ã€‚</li>
</ul>
<h3 id="å£°éŸ³ç›¸å…³"><a class="markdownIt-Anchor" href="#å£°éŸ³ç›¸å…³"></a> å£°éŸ³ç›¸å…³</h3>
<p>é€‰ä¸­æ–‡å­—åï¼ŒæŒ‰ä½ã€Œctrl + escã€é”®ï¼Œä¼šå°†æ–‡å­—è¿›è¡Œæœ—è¯»ã€‚ï¼ˆæˆ‘å‘ç°ï¼Œåœ¨è§¦æ§æ¡ç‰ˆçš„ mac ä¸Šï¼Œå¹¶æ²¡æœ‰ç”Ÿæ•ˆï¼‰</p>
<h3 id="dock-æ ç›¸å…³"><a class="markdownIt-Anchor" href="#dock-æ ç›¸å…³"></a> Dock æ ç›¸å…³</h3>
<ul>
<li>ã€Œoption + command + Dã€ï¼šéšè— dock æ </li>
</ul>
<h3 id="å¼ºåˆ¶æ¨å‡º"><a class="markdownIt-Anchor" href="#å¼ºåˆ¶æ¨å‡º"></a> å¼ºåˆ¶æ¨å‡º</h3>
<blockquote>
<p>å¼ºåˆ¶é€€å‡ºçš„å¿«æ·é”®éå¸¸é‡è¦</p>
</blockquote>
<ul>
<li>ã€Œoption + command + escã€ï¼šæ‰“å¼€å¼ºåˆ¶é€€å‡ºçš„çª—å£</li>
</ul>
<h3 id="option-ç›¸å…³"><a class="markdownIt-Anchor" href="#option-ç›¸å…³"></a> option ç›¸å…³</h3>
<blockquote>
<p>å¼ºçƒˆæ¨è</p>
</blockquote>
<ul>
<li>
<p>ã€Œoption + command + Hã€ï¼šéšè—é™¤å½“å‰åº”ç”¨ç¨‹åºä¹‹å¤–çš„å…¶ä»–åº”ç”¨ç¨‹åº</p>
</li>
<li>
<p>åœ¨æ–‡æœ¬ä¸­ï¼ŒæŒ‰ä½ã€Œoptionã€é”®ï¼Œé…åˆé¼ æ ‡çš„é€‰ä¸­ï¼Œå¯ä»¥è¿›è¡Œå—çŠ¶æ–‡å­—é€‰å–ã€‚</p>
</li>
<li>
<p>ã€Œoption + command + Wã€ï¼šå¿«é€Ÿå…³é—­å½“å‰åº”ç”¨ç¨‹åºçš„æ‰€æœ‰çª—å£ã€‚ã€å¾ˆå®ç”¨ã€‘</p>
</li>
</ul>
<p>æ¯”å¦‚è¯´ï¼Œä½ ä¸€æ¬¡æ€§æ‰“å¼€äº†å¾ˆå¤šæ–‡ä»¶çš„è¯¦æƒ…ï¼Œç„¶åå°±å¯ä»¥é€šè¿‡æ­¤å¿«æ·é”®ï¼Œå°†è¿™äº›çª—å£ä¸€æ¬¡æ€§å…³é—­ã€‚</p>
<ul>
<li>ã€Œoption + command + Iã€ï¼šæŸ¥çœ‹å¤šä¸ªæ–‡ä»¶çš„æ€»çš„å±æ€§ã€‚</li>
</ul>
<ul>
<li>
<p>æ‰“å¼€ launchpadï¼ŒæŒ‰ä½ã€Œoptionã€é”®ï¼Œå¯ä»¥å¿«é€Ÿå¸è½½åº”ç”¨ç¨‹åºã€‚</p>
</li>
<li>
<p>åœ¨ dock æ ï¼Œå³é”®ç‚¹å‡»è½¯ä»¶å›¾æ ‡ï¼ŒåŒæ—¶æŒ‰ä½ã€Œoptionã€é”®ï¼Œå°±å¯ä»¥<strong>å¼ºåˆ¶é€€å‡º</strong>è¯¥è½¯ä»¶ã€‚ã€é‡è¦ã€‘</p>
</li>
</ul>
<ul>
<li>åœ¨ Safari æµè§ˆå™¨ä¸­ï¼ŒæŒ‰ä½ã€Œoption + command + Qã€é€€å‡º Safariã€‚ç­‰ä¸‹æ¬¡è¿›å…¥ Safari çš„æ—¶å€™ï¼Œä¸Šæ¬¡é€€å‡ºæ—¶çš„ç½‘å€ä¼šè‡ªåŠ¨è¢«æ‰“å¼€ã€‚ã€å®ç”¨ã€‘</li>
</ul>
<h3 id="æ¨èä¸€ä¸ªè½¯ä»¶cheatsheet"><a class="markdownIt-Anchor" href="#æ¨èä¸€ä¸ªè½¯ä»¶cheatsheet"></a> æ¨èä¸€ä¸ªè½¯ä»¶ï¼šCheatSheet</h3>
<p>æ‰“å¼€ CheatSheet åï¼Œé•¿æŒ‰ command é”®ï¼Œä¼šå¼¹å‡ºå½“å‰åº”ç”¨ç¨‹åºçš„æ‰€æœ‰å¿«æ·é”®ã€‚æˆ‘ä»¬è¿˜å¯ä»¥å¯¹è¿™äº›å¿«æ·é”®è¿›è¡Œä¿å­˜ã€‚</p>
<h2 id="å­¦ä¹ èµ„æº"><a class="markdownIt-Anchor" href="#å­¦ä¹ èµ„æº"></a> ğŸ“š å­¦ä¹ èµ„æº</h2>
<ul>
<li><a href="https://github.com/jaywcjlove/awesome-mac" target="_blank" rel="noopener">Awesome Mac</a></li>
<li><a href="https://github.com/herrbischoff/awesome-macos-command-line" target="_blank" rel="noopener">awesome-macos-command-line</a></li>
</ul>
<h2 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> ğŸšª ä¼ é€é—¨</h2>
<p>| <a href="https://github.com/dunwu/blog" target="_blank" rel="noopener">å›é¦–é </a> |</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/blog/os/windows/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Zhang Peng">
      <meta itemprop="description" content="Dunwu's Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/os/windows/" class="post-title-link" itemprop="url">Windows å¸¸ç”¨æŠ€å·§æ€»ç»“</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-05-07 20:35:00" itemprop="dateCreated datePublished" datetime="2019-05-07T20:35:00+08:00">2019-05-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-08-10 09:56:46" itemprop="dateModified" datetime="2020-08-10T09:56:46+08:00">2020-08-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index">
                    <span itemprop="name">æ“ä½œç³»ç»Ÿ</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/blog/os/windows/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="os/windows/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>2.2k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>2 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="windows-å¸¸ç”¨æŠ€å·§æ€»ç»“"><a class="markdownIt-Anchor" href="#windows-å¸¸ç”¨æŠ€å·§æ€»ç»“"></a> Windows å¸¸ç”¨æŠ€å·§æ€»ç»“</h1>
<!-- TOC depthFrom:2 depthTo:3 -->
<ul>
<li><a href="#%E8%BD%AF%E4%BB%B6">è½¯ä»¶</a>
<ul>
<li><a href="#%E8%A7%86%E9%A2%91%E9%9F%B3%E9%A2%91">è§†é¢‘éŸ³é¢‘</a></li>
<li><a href="#%E5%8E%8B%E7%BC%A9">å‹ç¼©</a></li>
<li><a href="#%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86">æ–‡ä»¶ç®¡ç†</a></li>
<li><a href="#%E5%BC%80%E5%8F%91">å¼€å‘</a></li>
<li><a href="#%E7%BC%96%E8%BE%91%E5%99%A8">ç¼–è¾‘å™¨</a></li>
<li><a href="#%E6%96%87%E6%A1%A3">æ–‡æ¡£</a></li>
<li><a href="#%E6%95%88%E7%8E%87%E6%8F%90%E5%8D%87">æ•ˆç‡æå‡</a></li>
<li><a href="#%E5%8A%9E%E5%85%AC">åŠå…¬</a></li>
<li><a href="#%E4%B8%AA%E6%80%A7%E5%8C%96">ä¸ªæ€§åŒ–</a></li>
</ul>
</li>
<li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">å‚è€ƒèµ„æ–™</a></li>
</ul>
<!-- /TOC -->
<h2 id="è½¯ä»¶"><a class="markdownIt-Anchor" href="#è½¯ä»¶"></a> è½¯ä»¶</h2>
<blockquote>
<p>æ‰©å±•é˜…è¯»ï¼š</p>
<ul>
<li><a href="https://github.com/Awesome-Windows/Awesome/blob/master/README-cn.md" target="_blank" rel="noopener">Awesome Windows</a></li>
<li><a href="https://github.com/stackia/best-windows-apps" target="_blank" rel="noopener">best-windows-apps</a></li>
</ul>
</blockquote>
<h3 id="è§†é¢‘éŸ³é¢‘"><a class="markdownIt-Anchor" href="#è§†é¢‘éŸ³é¢‘"></a> è§†é¢‘éŸ³é¢‘</h3>
<ul>
<li><a href="http://getmusicbee.com/" target="_blank" rel="noopener">Musicbee</a> - ç±»ä¼¼ iTunesï¼Œä½†æ¯” iTunes æ›´å¥½ç”¨ã€‚</li>
<li><a href="http://www.screentogif.com/" target="_blank" rel="noopener">ScreenToGif</a> - å®ƒå…è®¸ä½ å½•åˆ¶å±å¹•çš„ä¸€éƒ¨åˆ†åŒºåŸŸå¹¶ä¿å­˜ä¸º gif æˆ–è§†é¢‘ã€‚</li>
<li><a href="http://potplayer.daum.net/" target="_blank" rel="noopener">PotPlayer</a> - å¤šåª’ä½“æ’­æ”¾å™¨ï¼Œå…·æœ‰å¹¿æ³›çš„ç¼–è§£ç å™¨é›†åˆï¼Œå®ƒè¿˜ä¸ºç”¨æˆ·æä¾›å¤§é‡é…ç½®é€‰é¡¹ã€‚</li>
<li><a href="http://www.splayer.org/" target="_blank" rel="noopener">å°„æ‰‹å½±éŸ³æ’­æ”¾å™¨</a> - æ¥è‡ªå°„æ‰‹ç½‘ï¼Œå°å·§å¼€æºï¼Œé¦–åˆ›è‡ªåŠ¨åŒ¹é…å­—å¹•åŠŸèƒ½ã€‚</li>
</ul>
<h3 id="å‹ç¼©"><a class="markdownIt-Anchor" href="#å‹ç¼©"></a> å‹ç¼©</h3>
<ul>
<li><a href="http://www.7-zip.org/" target="_blank" rel="noopener">7-Zip</a> - ç”¨äºå¤„ç†å‹ç¼©åŒ…çš„å¼€æº Windows å®ç”¨ç¨‹åºã€‚å®Œç¾æ”¯æŒ 7zï¼ŒZIPï¼ŒGZIPï¼ŒBZIP2 å’Œ TAR çš„å…¨éƒ¨ç‰¹æ€§ï¼Œå…¶ä»–æ ¼å¼ä¹Ÿå¯è§£å‹ç¼©ã€‚</li>
<li><a href="http://www.rarlab.com/" target="_blank" rel="noopener">WinRAR</a> - å¼ºå¤§çš„å½’æ¡£ç®¡ç†å™¨ã€‚ å®ƒå¯ä»¥å¤‡ä»½æ‚¨çš„æ•°æ®å¹¶å‡å°ç”µå­é‚®ä»¶é™„ä»¶çš„å¤§å°ï¼Œè§£å‹ç¼© RARï¼ŒZIP å’Œå…¶ä»–æ–‡ä»¶ã€‚</li>
</ul>
<h3 id="æ–‡ä»¶ç®¡ç†"><a class="markdownIt-Anchor" href="#æ–‡ä»¶ç®¡ç†"></a> æ–‡ä»¶ç®¡ç†</h3>
<ul>
<li><a href="http://en.ejie.me/" target="_blank" rel="noopener">Clover</a> - ä¸ºèµ„æºç®¡ç†å™¨åŠ ä¸Šå¤šæ ‡ç­¾åŠŸèƒ½ã€‚</li>
<li><a href="http://www.ghisler.com/" target="_blank" rel="noopener">Total Commander</a> - è€ç‰Œã€åŠŸèƒ½å¼‚å¸¸å¼ºå¤§çš„æ–‡ä»¶ç®¡ç†å¢å¼ºè½¯ä»¶ã€‚</li>
<li><a href="http://www.softwareok.com/?seite=Freeware/Q-Dir" target="_blank" rel="noopener">Q-Dir</a> - è½»é‡çº§çš„æ–‡ä»¶ç®¡ç†å™¨ï¼Œå„ç§å¸ƒå±€è§†å›¾åˆ‡æ¢çµæ´»ï¼Œé»˜è®¤å››ä¸ªå°çª—å£ç»„æˆä¸€ä¸ªå¤§çª—å£ï¼Œæ“ä½œå¿«æ·ã€‚è½¯ä»¶è™½å°ï¼Œç²‰ä¸å¿ è¯šã€‚</li>
<li><a href="https://github.com/Wox-launcher/Wox" target="_blank" rel="noopener">WoX</a> - æ–°ä¸€ä»£æ–‡ä»¶å®šä½å·¥å…·ï¼Œå ªç§° Windows ä¸Šçš„ Alfredã€‚</li>
<li><a href="http://www.voidtools.com/" target="_blank" rel="noopener">Everything</a> - æœ€å¿«çš„æ–‡ä»¶/æ–‡ä»¶å¤¹æœç´¢å·¥å…·ï¼Œ é€šè¿‡åç§°æœç´¢ã€‚</li>
<li><a href="http://www.listary.com/" target="_blank" rel="noopener">Listary</a> - éå¸¸ä¼˜ç§€çš„ Windows æ–‡ä»¶æµè§ˆå’Œæœç´¢å¢å¼ºå·¥å…·ã€‚</li>
<li>Beyond Compare - å¥½ç”¨åˆä¸‡èƒ½çš„æ–‡ä»¶å¯¹æ¯”å·¥å…·ã€‚</li>
<li><a href="https://www.piriform.com/ccleaner/download" target="_blank" rel="noopener">CCleaner</a> - å¦‚æœä½ æœ‰ç³»ç»Ÿæ´ç™–ï¼Œé‚£ä¸€å®šè¦é€‰æ‹©ä¸€æ¬¾å¹²å‡€ã€è‰¯å¿ƒã€è€ç‰Œçš„æ¸…æ´è½¯ä»¶ã€‚</li>
<li><a href="https://chocolatey.org/" target="_blank" rel="noopener">chocolatey</a> - åŒ…ç®¡ç†å™¨</li>
<li><a href="https://ninite.com/" target="_blank" rel="noopener">Ninite</a> - æœ€ç®€å•ï¼Œæœ€å¿«é€Ÿçš„æ›´æ–°æˆ–å®‰è£…è½¯ä»¶çš„æ–¹å¼ã€‚</li>
<li><a href="http://www.piriform.com/RECUVA" target="_blank" rel="noopener">Recuva</a> - æ¥è‡ª piriform æ¢¨å­å…¬å¸äº§å“ï¼Œå…è´¹çš„æ•°æ®æ¢å¤å·¥å…·ã€‚</li>
<li><a href="http://www.launchy.net/" target="_blank" rel="noopener">Launchy</a>ï¼šè‡ªç”±çš„è·¨å¹³å°å·¥å…·ï¼Œå¸®åŠ©ä½ å¿˜è®°å¼€å§‹èœå•ã€æ¡Œé¢å›¾æ ‡ç”šè‡³æ–‡ä»¶ç®¡ç†å™¨ã€‚</li>
</ul>
<h3 id="å¼€å‘"><a class="markdownIt-Anchor" href="#å¼€å‘"></a> å¼€å‘</h3>
<ul>
<li><a href="http://www.telerik.com/fiddler" target="_blank" rel="noopener">Fiddler</a> - web è°ƒè¯•ä»£ç†å·¥å…·ã€‚</li>
<li><a href="https://www.getpostman.com/postman" target="_blank" rel="noopener">Postman</a> - é€‚åˆ API å¼€å‘çš„å®Œæ•´å·¥å…·é“¾ï¼Œæœ€å¸¸ç”¨çš„ REST å®¢æˆ·ç«¯ã€‚</li>
<li><a href="https://www.sourcetreeapp.com/" target="_blank" rel="noopener">SourceTree</a> - ä¸€ä¸ªå…è´¹çš„ Git &amp; Mercurial å®¢æˆ·ç«¯ã€‚</li>
<li><a href="https://tortoisesvn.net/" target="_blank" rel="noopener">TortoiseSVN</a> - Subversion(SVN)çš„å›¾å½¢å®¢æˆ·ç«¯</li>
<li><a href="https://www.wireshark.org/" target="_blank" rel="noopener">Wireshark</a> - ä¸€ä¸ªç½‘ç»œåè®®åˆ†æå·¥å…·ã€‚</li>
<li>Switchhosts</li>
<li><a href="https://github.com/cmderdev/cmder" target="_blank" rel="noopener">Cmder</a> - æ§åˆ¶å°æ¨¡æ‹Ÿå™¨åŒ…ã€‚æ‰©å±•é˜…è¯»ï¼š<a href="https://www.jeffjade.com/2016/01/13/2016-01-13-windows-software-cmder/" target="_blank" rel="noopener">Win ä¸‹å¿…å¤‡ç¥å™¨ä¹‹ Cmder</a></li>
<li><a href="http://babun.github.io/" target="_blank" rel="noopener">Babun</a> - åŸºäº Cygwinï¼Œç”¨äºæ›¿ä»£ Windows shellã€‚</li>
</ul>
<h3 id="ç¼–è¾‘å™¨"><a class="markdownIt-Anchor" href="#ç¼–è¾‘å™¨"></a> ç¼–è¾‘å™¨</h3>
<ul>
<li><a href="http://www.jetbrains.com/" target="_blank" rel="noopener">JetBrain IDE ç³»åˆ—</a> - çœŸé¦™ï¼</li>
<li><a href="https://code.visualstudio.com/" target="_blank" rel="noopener">Visual Studio Code</a> - ç”¨äºæ„å»ºå’Œè°ƒè¯•ç°ä»£ Web å’Œäº‘åº”ç”¨ç¨‹åºã€‚</li>
<li><a href="https://eclipse.org/downloads/" target="_blank" rel="noopener">Eclipse</a> - ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„ IDEã€‚</li>
<li><a href="https://www.visualstudio.com/vs/" target="_blank" rel="noopener">Visual Studio</a> - å¾®è½¯å®˜æ–¹çš„ IDEï¼Œé€šè¿‡æ’ä»¶å¯æ”¯æŒå¤§é‡ç¼–ç¨‹è¯­è¨€ã€‚</li>
<li><a href="https://netbeans.org/" target="_blank" rel="noopener">NetBeans IDE</a> - å…è´¹å¼€æºçš„ IDEã€‚</li>
<li><a href="https://www.typora.io/" target="_blank" rel="noopener">Typora</a> - ä¸ªäººè§‰å¾—æœ€å¥½ç”¨çš„ Markdown ç¼–è¾‘å™¨ã€‚</li>
<li><a href="https://www.zybuluo.com/cmd/" target="_blank" rel="noopener">Cmd Markdown</a> - è·¨å¹³å°ä¼˜ç§€ Markdown ç¼–è¾‘å™¨ï¼Œæœ¬æ–‡å³ç”¨å…¶æ‰€å†™ã€‚</li>
<li><a href="https://notepad-plus-plus.org/" target="_blank" rel="noopener">Notepad++</a> - ä¸€æ¬¾æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€çš„æºç ç¼–è¾‘å™¨ã€‚</li>
<li><a href="http://www.flos-freeware.ch/notepad2.html" target="_blank" rel="noopener">Notepad2</a> - ç”¨äºæ›¿ä»£é»˜è®¤æ–‡æœ¬ç¼–è¾‘å™¨çš„è½»é‡å¿«é€Ÿçš„ç¼–è¾‘å™¨ï¼Œæ‹¥æœ‰ä¼—å¤šæœ‰ç”¨çš„åŠŸèƒ½ã€‚</li>
<li><a href="http://www.sublimetext.com/3" target="_blank" rel="noopener">Sublime Text 3</a> - é«˜çº§æ–‡æœ¬ç¼–è¾‘å™¨ã€‚</li>
<li><a href="https://atom.io/" target="_blank" rel="noopener">Atom</a> - é¢å‘ 21 ä¸–çºªçš„æå®¢æ–‡æœ¬ç¼–è¾‘å™¨ã€‚</li>
</ul>
<h3 id="æ–‡æ¡£"><a class="markdownIt-Anchor" href="#æ–‡æ¡£"></a> æ–‡æ¡£</h3>
<ul>
<li><a href="http://www.office.com/" target="_blank" rel="noopener">Microsoft Office</a> - å¾®è½¯åŠå…¬è½¯ä»¶ã€‚</li>
<li><a href="https://www.wps.com/office-free" target="_blank" rel="noopener">WPS Office</a> - é‡‘å±±å…è´¹åŠå…¬è½¯ä»¶ã€‚</li>
<li><a href="http://calibre-ebook.com/" target="_blank" rel="noopener">Calibre</a> - ç”¨äºç”µå­ä¹¦ç®¡ç†å’Œè½¬æ¢çš„å¼ºå¤§è½¯ä»¶ã€‚</li>
<li><a href="http://www.foxitsoftware.cn/products/reader/" target="_blank" rel="noopener">ç¦æ˜•é˜…è¯»å™¨</a> - åœ¨å…¨çƒæ‹¥æœ‰å¤§é‡ç”¨æˆ·ï¼Œæœ€ä¼˜ç§€çš„å›½äº§è½¯ä»¶ä¹‹ä¸€ã€‚Ribbon ç•Œé¢ï¼Œæ”¯æŒæ‰‹å†™ç­¾åã€æ’å…¥å°ç« ç­‰ã€‚</li>
</ul>
<h3 id="æ•ˆç‡æå‡"><a class="markdownIt-Anchor" href="#æ•ˆç‡æå‡"></a> æ•ˆç‡æå‡</h3>
<p><strong>ã€ç¬”è®°ã€‘</strong></p>
<ul>
<li><a href="http://www.xmind.net/" target="_blank" rel="noopener">XMind</a> - ä¼˜ç§€çš„æ€ç»´å¯¼å›¾ã€‚</li>
<li><a href="https://www.onenote.com/" target="_blank" rel="noopener">OneNote</a> - Windows ä¸‹ç»¼åˆè¯„ä»·éå¸¸é«˜çš„ç¬”è®°åº”ç”¨ã€‚</li>
<li><a href="http://www.yinxiang.com/" target="_blank" rel="noopener">å°è±¡ç¬”è®°</a> - è€ç‰Œè·¨å¹³å°ç¬”è®°å·¥å…·ï¼Œå›½é™…ç‰ˆ Evernoteã€‚ä¸€å®¶ç«‹å¿—äºåšç™¾å¹´å…¬å¸çš„ä¼ä¸šï¼Œå®‰å…¨ã€å¯é ã€‚</li>
<li><a href="http://www.wiz.cn/index.html" target="_blank" rel="noopener">ä¸ºçŸ¥ç¬”è®°</a> - è¶Šæ¥è¶Šå¥½çš„ç¬”è®°åº”ç”¨ï¼Œè®°å½•ã€æŸ¥é˜…ä¸€åˆ‡æœ‰ä»·å€¼çš„ä¿¡æ¯ï¼ŒåŒæ ·è·¨å¹³å°æ”¯æŒã€‚</li>
<li><a href="http://note.youdao.com/" target="_blank" rel="noopener">æœ‰é“äº‘ç¬”è®°</a> - ç½‘æ˜“æ——ä¸‹ç¬”è®°å·¥å…·ï¼ŒåŒæ ·è·¨ä¸»æµå¹³å°æ”¯æŒï¼Œæ–‡å­—ã€æ‰‹å†™ã€å½•éŸ³ã€æ‹ç…§å¤šç§è®°å½•æ–¹å¼ï¼Œæ”¯æŒä»»æ„é™„ä»¶æ ¼å¼ã€‚</li>
<li><a href="https://getsharex.com/" target="_blank" rel="noopener">ShareX</a> - ä½ è¦çš„æ‰€æœ‰ä¸æˆªå›¾ã€å½•å±ç›¸å…³çš„åŠŸèƒ½ï¼Œè¿™é‡Œéƒ½æœ‰äº†ã€‚</li>
</ul>
<p>ã€å¿«æ·é”®ã€‘</p>
<ul>
<li><a href="https://autohotkey.com/" target="_blank" rel="noopener">AutoHotkey</a> - Windows å¹³å°çš„ç»ˆæè‡ªåŠ¨åŒ–è„šæœ¬è¯­è¨€ã€‚</li>
</ul>
<blockquote>
<p>æŠ€å·§ï¼š</p>
<ul>
<li><a href="https://www.jeffjade.com/2016/03/11/2016-03-11-autohotkey/" target="_blank" rel="noopener">https://www.jeffjade.com/2016/03/11/2016-03-11-autohotkey/</a></li>
<li><a href="https://www.autohotkey.com/boards/viewtopic.php?f=29&amp;t=4296" target="_blank" rel="noopener">https://www.autohotkey.com/boards/viewtopic.php?f=29&amp;t=4296</a></li>
</ul>
</blockquote>
<h3 id="åŠå…¬"><a class="markdownIt-Anchor" href="#åŠå…¬"></a> åŠå…¬</h3>
<ul>
<li><a href="http://cidian.youdao.com/index.html" target="_blank" rel="noopener">æœ‰é“è¯å…¸</a> - æœ€å¥½ç”¨çš„å…è´¹å…¨èƒ½ç¿»è¯‘è½¯ä»¶ã€‚</li>
<li><a href="http://office.microsoft.com/zh-cn/outlook/" target="_blank" rel="noopener">Outlook</a> - å¤§åé¼é¼çš„ Microsoft Office ç»„ä»¶ä¹‹ä¸€ï¼Œé™¤äº†ç”µå­é‚®ä»¶ï¼Œè¿˜åŒ…å«äº†æ—¥å†ã€ä»»åŠ¡ç®¡ç†ã€è”ç³»äººã€è®°äº‹æœ¬ç­‰åŠŸèƒ½ã€‚</li>
<li><a href="http://www.gmail.com/" target="_blank" rel="noopener">Gmail</a> - åŠŸèƒ½ä¸Šå¯ä»¥ç§°ä¸ºä¸šç•Œæ ‡æ†ï¼Œç”¨æˆ·æ•°é‡ä¸–ç•Œç¬¬ä¸€ï¼Œæˆ–è®¸ä½ çœŸçš„æ‰¾ä¸åˆ°æ¯”å®ƒæ›´å¥½çš„é‚®ä»¶ç³»ç»Ÿã€‚</li>
<li><a href="https://www.google.com/intl/zh-CN/chrome/browser/" target="_blank" rel="noopener">Chrome</a> - æœ€å¥½çš„æµè§ˆå™¨ã€‚</li>
<li><a href="http://www.teamviewer.com/Zhcn/index.aspx" target="_blank" rel="noopener">Teamviewer</a> - ä¸“ä¸šã€åŠŸèƒ½å¼ºå¤§çš„è¿œç¨‹æ§åˆ¶è½¯ä»¶ã€‚ä½¿ç”¨ç®€å•ï¼Œå¯¹ä¸ªäººç”¨æˆ·å…è´¹ã€‚</li>
</ul>
<h3 id="ä¸ªæ€§åŒ–"><a class="markdownIt-Anchor" href="#ä¸ªæ€§åŒ–"></a> ä¸ªæ€§åŒ–</h3>
<ul>
<li><a href="https://github.com/TranslucentTB/TranslucentTB" target="_blank" rel="noopener">TranslucentTB</a> - é€æ˜åŒ–ä½ çš„ Windows ä»»åŠ¡æ ã€‚</li>
<li><a href="http://qttabbar.wikidot.com/" target="_blank" rel="noopener">QTTabBar</a> - é€šè¿‡å¤šæ ‡ç­¾å’Œé¢å¤–çš„æ–‡ä»¶å¤¹è§†å›¾æ‰©å±•èµ„æºç®¡ç†å™¨çš„åŠŸèƒ½ã€‚</li>
<li><a href="https://www.stardock.com/products/fences/" target="_blank" rel="noopener">Fences</a> - ç®¡ç†æ¡Œé¢å¿«æ·æ–¹å¼ã€‚</li>
</ul>
<h2 id="å‚è€ƒèµ„æ–™"><a class="markdownIt-Anchor" href="#å‚è€ƒèµ„æ–™"></a> å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://github.com/Awesome-Windows/Awesome/blob/master/README-cn.md" target="_blank" rel="noopener">https://github.com/Awesome-Windows/Awesome/blob/master/README-cn.md</a></li>
<li><a href="https://love.appinn.com/" target="_blank" rel="noopener">https://love.appinn.com/</a></li>
<li><a href="https://github.com/stackia/best-windows-apps" target="_blank" rel="noopener">https://github.com/stackia/best-windows-apps</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/blog/theory/README/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Zhang Peng">
      <meta itemprop="description" content="Dunwu's Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/theory/README/" class="post-title-link" itemprop="url">åˆ†å¸ƒå¼ç³»ç»Ÿ</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-03-08 13:16:53" itemprop="dateCreated datePublished" datetime="2019-03-08T13:16:53+08:00">2019-03-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-08-10 09:56:46" itemprop="dateModified" datetime="2020-08-10T09:56:46+08:00">2020-08-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E5%88%86%E5%B8%83%E5%BC%8F/" itemprop="url" rel="index">
                    <span itemprop="name">åˆ†å¸ƒå¼</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/blog/theory/README/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="theory/README/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>786</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="åˆ†å¸ƒå¼ç³»ç»ŸåŸç†"><a class="markdownIt-Anchor" href="#åˆ†å¸ƒå¼ç³»ç»ŸåŸç†"></a> åˆ†å¸ƒå¼ç³»ç»ŸåŸç†</h1>
<blockquote>
<p>å¤§å‹è½¯ä»¶ä¸ºäº†åº”å¯¹æµ·é‡æ•°æ®ã€é«˜å¹¶å‘ï¼Œä¸€èˆ¬éƒ½ä¼šè¢«è®¾è®¡ä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿã€‚</p>
<p>åˆ†å¸ƒå¼ç³»ç»Ÿéœ€è¦è§£å†³å¾ˆå¤šä¸åŒé¢†åŸŸçš„é—®é¢˜ã€‚</p>
</blockquote>
<h2 id="å†…å®¹"><a class="markdownIt-Anchor" href="#å†…å®¹"></a> ğŸ“– å†…å®¹</h2>
<ul>
<li><a href="system-theory-interview.md">ç³»ç»ŸåŸç†é¢è¯•é¢˜</a></li>
<li><strong>åŸºç¡€ç†è®º</strong>
<ul>
<li><a href="distributed-base-theory.md">åˆ†å¸ƒå¼åŸºç¡€ç†è®º</a> - å…³é”®è¯ï¼š<code>æ‹œå åº­å°†å†›</code>ã€<code>CAP</code>ã€<code>BASE</code></li>
<li><a href="paxos.md">Paxos ç®—æ³•</a> - å…³é”®è¯ï¼š<code>å…±è¯†æ€§ç®—æ³•</code></li>
<li><a href="raft.md">Raft ç®—æ³•</a> - å…³é”®è¯ï¼š<code>å…±è¯†æ€§ç®—æ³•</code></li>
</ul>
</li>
<li><strong>æ ¸å¿ƒæŠ€æœ¯</strong>
<ul>
<li><a href="cache.md">ç¼“å­˜</a> - å…³é”®è¯ï¼š<code>è¿›ç¨‹å†…ç¼“å­˜</code>ã€<code>åˆ†å¸ƒå¼ç¼“å­˜</code>ã€<code>ç¼“å­˜é›ªå´©</code>ã€<code>ç¼“å­˜ç©¿é€</code>ã€<code>ç¼“å­˜å‡»ç©¿</code>ã€<code>ç¼“å­˜æ›´æ–°</code>ã€<code>ç¼“å­˜é¢„çƒ­</code>ã€<code>ç¼“å­˜é™çº§</code></li>
<li><a href="load-balance.md">è´Ÿè½½å‡è¡¡</a> - å…³é”®è¯ï¼š<code>è½®è¯¢</code>ã€<code>éšæœº</code>ã€<code>æœ€å°‘è¿æ¥</code>ã€<code>æºåœ°å€å“ˆå¸Œ</code>ã€<code>ä¸€è‡´æ€§å“ˆå¸Œ</code>ã€<code>è™šæ‹Ÿ hash æ§½</code></li>
<li><a href="mq.md">æ¶ˆæ¯é˜Ÿåˆ—</a> - å…³é”®è¯ï¼š<code>é‡å¤æ¶ˆè´¹</code>ã€<code>æ¶ˆæ¯ä¸¢å¤±</code>ã€<code>æ¶ˆæ¯é¡ºåºæ€§</code>ã€<code>æ¶ˆæ¯ç§¯å‹</code></li>
<li><a href="distributed-storage.md">åˆ†å¸ƒå¼å­˜å‚¨</a> - å…³é”®è¯ï¼š<code>è¯»å†™åˆ†ç¦»</code>ã€<code>åˆ†åº“åˆ†è¡¨</code>ã€<code>è¿ç§»</code>ã€<code>æ‰©å®¹</code></li>
<li><a href="distributed-lock.md">åˆ†å¸ƒå¼é”</a> - å…³é”®è¯ï¼š<code>æ•°æ®åº“</code>ã€<code>Redis</code>ã€<code>ZooKeeper</code>ã€<code>äº’æ–¥</code>ã€<code>å¯é‡å…¥</code>ã€<code>æ­»é”</code>ã€<code>å®¹é”™</code>ã€<code>è‡ªæ—‹å°è¯•</code></li>
<li><a href="distributed-id.md">åˆ†å¸ƒå¼ ID</a> - å…³é”®è¯ï¼š<code>UUID</code>ã€<code>è‡ªå¢åºåˆ—</code>ã€<code>é›ªèŠ±ç®—æ³•</code>ã€<code>Leaf</code></li>
<li><a href="distributed-transaction.md">åˆ†å¸ƒå¼äº‹åŠ¡</a> - å…³é”®è¯ï¼š<code>2PC</code>ã€<code>3PC</code>ã€<code>TCC</code>ã€<code>æœ¬åœ°æ¶ˆæ¯è¡¨</code>ã€<code>MQ æ¶ˆæ¯</code>ã€<code>SAGA</code></li>
<li><a href="distributed-session.md">åˆ†å¸ƒå¼ä¼šè¯</a> - å…³é”®è¯ï¼š<code>ç²˜æ€§ Session</code>ã€<code>Session å¤åˆ¶å…±äº«</code>ã€<code>åŸºäºç¼“å­˜çš„ session å…±äº«</code></li>
</ul>
</li>
<li><strong>å¾®æœåŠ¡</strong>
<ul>
<li><a href="micro-services.md">å¾®æœåŠ¡</a></li>
<li><a href="limiting.md">é™æµ</a> - å…³é”®è¯ï¼š<code>è®¡æ•°å™¨æ³•</code>ã€<code>æ—¶é—´çª—å£æ³•</code>ã€<code>ä»¤ç‰Œæ¡¶æ³•</code>ã€<code>æ¼æ¡¶æ³•</code></li>
<li><a href="rpc.md">RPC</a> - å…³é”®è¯ï¼š<code>å¾®æœåŠ¡</code>ã€<code>åºåˆ—åŒ–</code>ã€<code>åŠ¨æ€ä»£ç†</code>ã€<code>é€šä¿¡</code>ã€<code>æœåŠ¡æ³¨å†Œå‘ç°</code>ã€<code>å¥åº·æ£€æŸ¥</code>ã€<code>è·¯ç”±</code>ã€<code>è´Ÿè½½å‡è¡¡</code>ã€<code>å®¹é”™å¤„ç†</code>ã€<code>ä¼˜é›…ä¸Šçº¿ä¸‹çº¿</code>ã€<code>é™æµ</code>ã€<code>ç†”æ–­</code>ã€<code>ä¸šåŠ¡åˆ†ç»„</code></li>
</ul>
</li>
</ul>
<h2 id="èµ„æ–™"><a class="markdownIt-Anchor" href="#èµ„æ–™"></a> ğŸ“š èµ„æ–™</h2>
<ul>
<li><strong>ä¹¦ç±</strong>
<ul>
<li><a href="https://item.jd.com/11322972.html" target="_blank" rel="noopener">ã€Šå¤§å‹ç½‘ç«™æŠ€æœ¯æ¶æ„ï¼šæ ¸å¿ƒåŸç†ä¸æ¡ˆä¾‹åˆ†æã€‹</a> - æµ…æ˜¾æ˜“æ‡‚çš„å°†è§£å¤§å‹ç½‘ç«™æ¶æ„æ¼”è¿›ä¹‹è·¯ï¼›ç®€ä»‹äº†å¤§å‹ç³»ç»Ÿæ‰€é¢ä¸´çš„æŒ‘æˆ˜ä»¥åŠæ ¸å¿ƒæŠ€æœ¯ç‚¹ã€‚</li>
<li><a href="https://item.jd.com/11449803.html" target="_blank" rel="noopener">å¤§å‹ç½‘ç«™ç³»ç»Ÿä¸ Java ä¸­é—´ä»¶å®è·µ</a></li>
<li><a href="https://item.jd.com/12153914.html" target="_blank" rel="noopener">äº¿çº§æµé‡ç½‘ç«™æ¶æ„æ ¸å¿ƒæŠ€æœ¯ï¼šè·Ÿå¼€æ¶›å­¦æ­å»ºé«˜å¯ç”¨é«˜å¹¶å‘ç³»ç»Ÿ</a></li>
<li><a href="https://item.jd.com/12176278.html" target="_blank" rel="noopener">ä¼ä¸š IT æ¶æ„è½¬å‹ä¹‹é“ï¼šé˜¿é‡Œå·´å·´ä¸­å°æˆ˜ç•¥æ€æƒ³ä¸æ¶æ„å®æˆ˜</a> - é˜è¿°é˜¿é‡Œå·´å·´ä¸­å°ç³»ç»Ÿå‘å±•ï¼Œæ›´å¤šçš„æ˜¯è®²è§£åº”ç”¨åœºæ™¯å’Œèƒ½åŠ›ï¼Œæ²¡æœ‰è®²è§£æŠ€æœ¯ç»†èŠ‚ã€‚</li>
<li><a href="https://item.jd.com/12238227.html" target="_blank" rel="noopener">é€†æµè€Œä¸Šï¼šé˜¿é‡Œå·´å·´æŠ€æœ¯æˆé•¿ä¹‹è·¯</a> - ä¸»è¦ä»¥è¿ç»´çš„è§†è§’é˜è¿°ç³»ç»Ÿè¿ç»´ä¸­é‡åˆ°çš„å›°éš¾ï¼Œå®šä½æ€è·¯ä»¥åŠè§£å†³æ–¹æ³•ã€‚</li>
</ul>
</li>
<li><strong>æ•™ç¨‹</strong>
<ul>
<li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md" target="_blank" rel="noopener">system-design-primer</a></li>
</ul>
</li>
</ul>
<h2 id="ä¼ é€"><a class="markdownIt-Anchor" href="#ä¼ é€"></a> ğŸšª ä¼ é€</h2>
<p>â—¾ ğŸ¯ <a href="https://github.com/dunwu/blog" target="_blank" rel="noopener">æˆ‘çš„åšå®¢</a> â—¾</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/blog/design/architecture/README/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Zhang Peng">
      <meta itemprop="description" content="Dunwu's Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/design/architecture/README/" class="post-title-link" itemprop="url">æ¶æ„è®¾è®¡</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-03-08 13:16:53" itemprop="dateCreated datePublished" datetime="2019-03-08T13:16:53+08:00">2019-03-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-08-10 09:56:46" itemprop="dateModified" datetime="2020-08-10T09:56:46+08:00">2020-08-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index">
                    <span itemprop="name">è®¾è®¡</span>
                  </a>
                </span>
                  ï¼Œ
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E8%AE%BE%E8%AE%A1/%E6%9E%B6%E6%9E%84/" itemprop="url" rel="index">
                    <span itemprop="name">æ¶æ„</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/blog/design/architecture/README/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="design/architecture/README/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>792</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="æ¶æ„è®¾è®¡"><a class="markdownIt-Anchor" href="#æ¶æ„è®¾è®¡"></a> æ¶æ„è®¾è®¡</h1>
<p>æ¶æ„è®¾è®¡çš„ç›®çš„æ˜¯è§£å†³è½¯ä»¶ç³»ç»Ÿçš„å¤æ‚åº¦å¸¦æ¥çš„é—®é¢˜ã€‚æ¶æ„å³(é‡è¦)å†³ç­–ï¼Œæ˜¯åœ¨ä¸€ä¸ªæœ‰çº¦æŸçš„ç›’å­é‡Œå»æ±‚è§£æˆ–æ¥è¿‘æœ€åˆé€‚çš„è§£ã€‚è¿™ä¸ªæœ‰çº¦æŸçš„ç›’å­æ˜¯å›¢é˜Ÿç»éªŒã€æˆæœ¬ã€èµ„æºã€è¿›åº¦ã€ä¸šåŠ¡æ‰€å¤„é˜¶æ®µç­‰æ‰€ç¼–ç»‡ã€æºæ‚åœ¨ä¸€èµ·çš„ç»¼åˆä½“(äººï¼Œè´¢ï¼Œç‰©ï¼Œæ—¶é—´ï¼Œäº‹æƒ…ç­‰)ã€‚æ¶æ„æ— ä¼˜åŠ£ï¼Œä½†æ˜¯å­˜åœ¨æ°å½“çš„æ¶æ„ç”¨åœ¨åˆé€‚çš„è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œè€Œè¿™äº›å°±æ˜¯å†³ç­–çš„ç»“æœã€‚</p>
<p>æ¶æ„è®¾è®¡åŸåˆ™ï¼š<strong>åˆé€‚åŸåˆ™ã€ç®€å•åŸåˆ™ã€æ¼”åŒ–åŸåˆ™</strong>ã€‚åˆé€‚ä¼˜äºå…ˆè¿› =&gt; æ¼”åŒ–ä¼˜äºä¸€æ­¥åˆ°ä½ =&gt; ç®€å•ä¼˜äºå¤æ‚</p>
<p>æ¶æ„è®¾è®¡æœ‰ä¸šåŠ¡éœ€æ±‚é©±åŠ¨ï¼Œéœ€è¦è¯†åˆ«å‡ºä¸»è¦é—®é¢˜ï¼Œç„¶åæ ¹æ®ä¸šåŠ¡ã€æŠ€æœ¯ã€å›¢é˜Ÿã€æˆæœ¬ç­‰ç»¼åˆè¯„ä¼°æ’åºï¼Œä¼˜å…ˆè§£å†³å½“å‰é¢ä¸´çš„æœ€ä¸»è¦çš„å¤æ‚åº¦é—®é¢˜ã€‚</p>
<p>æ¶æ„è®¾è®¡ä¸€èˆ¬è¦ç»™å‡ºå¤šå¥—å¤‡é€‰æ–¹æ¡ˆï¼ˆ3 ~ 5 ä¸ªæœ€ä½³ï¼‰ï¼Œå¹¶è¯„ä¼°å„æ–¹æ¡ˆåˆ©å¼Šã€‚</p>
<p>è¯„ä¼°æ–¹æ¡ˆæ—¶ï¼Œåº”è¯¥å…ˆåˆ—å‡ºå…³æ³¨çš„ç»´åº¦ï¼ˆå¦‚ï¼šåŠŸèƒ½æ€§ã€æ€§èƒ½ã€å¯ç”¨æ€§ã€å¤æ‚åº¦ã€ç¡¬ä»¶æˆæœ¬ã€è¿ç»´æˆæœ¬ç­‰ï¼‰ï¼Œç„¶åæ ¹æ®è¿™äº›ç»´åº¦å»è¯„ä¼°æ‰“åˆ†ï¼Œå†ç»¼åˆæŒ‘é€‰æœ€åˆé€‚å½“æ—¶æƒ…å†µçš„æ–¹æ¡ˆã€‚</p>
<p>æ¶æ„å¤±è´¥çš„ä¸»å› ï¼š</p>
<ul>
<li>æ²¡é‚£ä¹ˆå¤šäººï¼Œå´æƒ³å¹²é‚£ä¹ˆå¤šæ´»</li>
<li>æ²¡æœ‰é‚£ä¹ˆå¤šç§¯ç´¯ï¼Œå´æƒ³ä¸€æ­¥ç™»å¤©</li>
<li>æ²¡æœ‰é‚£ä¹ˆå“è¶Šçš„ä¸šåŠ¡åœºæ™¯ï¼Œå´å¹»æƒ³çµå…‰ä¸€é—ªæˆä¸ºå¤©æ‰</li>
</ul>
<h2 id="å†…å®¹"><a class="markdownIt-Anchor" href="#å†…å®¹"></a> ğŸ“– å†…å®¹</h2>
<ul>
<li><a href="system-architecture-interview.md">ç³»ç»Ÿæ¶æ„é¢è¯•é¢˜</a></li>
<li><a href="system-architecture-overview.md">ç³»ç»Ÿæ¶æ„æ¦‚è¿°</a></li>
<li><a href="high-performance-architecture.md">é«˜æ€§èƒ½æ¶æ„</a></li>
<li><a href="high-availability-architecture.md">é«˜å¯ç”¨æ¶æ„</a></li>
<li><a href="scalable-architecture.md">ä¼¸ç¼©æ€§æ¶æ„</a></li>
<li><a href="extensible-architecture.md">æ‰©å±•æ€§æ¶æ„</a></li>
<li><a href="security-architecture.md">å®‰å…¨æ€§æ¶æ„</a></li>
<li><a href="system-core-technologies.md">å¤§å‹ç³»ç»Ÿæ ¸å¿ƒæŠ€æœ¯</a></li>
<li><a href="ddd.md">é¢†åŸŸé©±åŠ¨è®¾è®¡</a></li>
</ul>
<h2 id="èµ„æ–™"><a class="markdownIt-Anchor" href="#èµ„æ–™"></a> ğŸ“š èµ„æ–™</h2>
<ul>
<li><strong>ä¹¦ç±</strong>
<ul>
<li><a href="https://item.jd.com/11322972.html" target="_blank" rel="noopener">ã€Šå¤§å‹ç½‘ç«™æŠ€æœ¯æ¶æ„ï¼šæ ¸å¿ƒåŸç†ä¸æ¡ˆä¾‹åˆ†æã€‹</a> - æµ…æ˜¾æ˜“æ‡‚çš„å°†è§£å¤§å‹ç½‘ç«™æ¶æ„æ¼”è¿›ä¹‹è·¯ï¼›ç®€ä»‹äº†å¤§å‹ç³»ç»Ÿæ‰€é¢ä¸´çš„æŒ‘æˆ˜ä»¥åŠæ ¸å¿ƒæŠ€æœ¯ç‚¹ã€‚</li>
<li><a href="https://item.jd.com/12153914.html" target="_blank" rel="noopener">ã€Šäº¿çº§æµé‡ç½‘ç«™æ¶æ„æ ¸å¿ƒæŠ€æœ¯ï¼šè·Ÿå¼€æ¶›å­¦æ­å»ºé«˜å¯ç”¨é«˜å¹¶å‘ç³»ç»Ÿã€‹</a></li>
<li><a href="https://item.jd.com/11449803.html" target="_blank" rel="noopener">å¤§å‹ç½‘ç«™ç³»ç»Ÿä¸ Java ä¸­é—´ä»¶å®è·µ</a></li>
<li><a href="https://item.jd.com/12176278.html" target="_blank" rel="noopener">ä¼ä¸š IT æ¶æ„è½¬å‹ä¹‹é“ï¼šé˜¿é‡Œå·´å·´ä¸­å°æˆ˜ç•¥æ€æƒ³ä¸æ¶æ„å®æˆ˜</a> - é˜è¿°é˜¿é‡Œå·´å·´ä¸­å°ç³»ç»Ÿå‘å±•ï¼Œæ›´å¤šçš„æ˜¯è®²è§£åº”ç”¨åœºæ™¯å’Œèƒ½åŠ›ï¼Œæ²¡æœ‰è®²è§£æŠ€æœ¯ç»†èŠ‚ã€‚</li>
<li><a href="https://item.jd.com/12238227.html" target="_blank" rel="noopener">é€†æµè€Œä¸Šï¼šé˜¿é‡Œå·´å·´æŠ€æœ¯æˆé•¿ä¹‹è·¯</a> - ä¸»è¦ä»¥è¿ç»´çš„è§†è§’é˜è¿°ç³»ç»Ÿè¿ç»´ä¸­é‡åˆ°çš„å›°éš¾ï¼Œå®šä½æ€è·¯ä»¥åŠè§£å†³æ–¹æ³•ã€‚</li>
</ul>
</li>
<li><strong>æ•™ç¨‹</strong>
<ul>
<li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md" target="_blank" rel="noopener">system-design-primer</a></li>
<li><a href="https://time.geekbang.org/column/intro/100006601" target="_blank" rel="noopener">ä» 0 å¼€å§‹å­¦æ¶æ„</a></li>
<li><a href="https://time.geekbang.org/column/intro/100014401" target="_blank" rel="noopener">ä» 0 å¼€å§‹å­¦å¾®æœåŠ¡</a></li>
<li><a href="https://time.geekbang.org/column/intro/100046201" target="_blank" rel="noopener">RPC å®æˆ˜ä¸æ ¸å¿ƒåŸç†</a></li>
<li><a href="https://time.geekbang.org/course/intro/100003901" target="_blank" rel="noopener">å¾®æœåŠ¡æ¶æ„æ ¸å¿ƒ 20 è®²</a></li>
<li><a href="https://time.geekbang.org/column/intro/100037301" target="_blank" rel="noopener">DDD å®æˆ˜è¯¾</a></li>
</ul>
</li>
</ul>
<h2 id="ä¼ é€"><a class="markdownIt-Anchor" href="#ä¼ é€"></a> ğŸšª ä¼ é€</h2>
<p>â—¾ ğŸ¯ <a href="https://github.com/dunwu/blog" target="_blank" rel="noopener">æˆ‘çš„åšå®¢</a> â—¾</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/blog/page/2/"><i class="fa fa-angle-left" aria-label="ä¸Šä¸€é¡µ"></i></a><a class="page-number" href="/blog/">1</a><a class="page-number" href="/blog/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/blog/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/blog/page/9/">9</a><a class="extend next" rel="next" href="/blog/page/4/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="site-author-image" itemprop="image" alt="Zhang Peng"
    src="/blog/images/avatar.gif">
  <p class="site-author-name" itemprop="name">Zhang Peng</p>
  <div class="site-description" itemprop="description">Dunwu's Blog</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blog/archives/">
        
          <span class="site-state-item-count">90</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/blog/categories/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/blog/tags/">
          
        <span class="site-state-item-count">50</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/dunwu" title="GitHub &amp;rarr; https:&#x2F;&#x2F;github.com&#x2F;dunwu" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:forbreak@163.com" title="E-Mail &amp;rarr; mailto:forbreak@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/blog/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 2015 â€“ 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-paper-plane"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zhang Peng</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">477k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">7:14</span>
</div>

        












        
      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="//cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-nest@1/canvas-nest.min.js"></script>
  <script src="/blog/lib/anime.min.js"></script>
  <script src="/blog/lib/velocity/velocity.min.js"></script>
  <script src="/blog/lib/velocity/velocity.ui.min.js"></script>

<script src="/blog/js/utils.js"></script>

<script src="/blog/js/motion.js"></script>


<script src="/blog/js/schemes/pisces.js"></script>


<script src="/blog/js/next-boot.js"></script>

<script src="/blog/js/bookmark.js"></script>




  




  
<script src="/blog/js/local-search.js"></script>














  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://blog-ajay4qmfci.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>

</body>
</html>
